var gewara=gewara||{};gewara.util={};var gewa=gewa||{};gewa.string={};gewa.util={};var GewaraUtil=gewara.util,gewaUtil=gewa.util,gewaString=gewa.string;gewara.util.onReturn=function(a,b){if(!a){a=window.event}if(a&&a.keyCode&&a.keyCode==13){b()}};gewara.util.rtime=function(){return new Date().getTime()};gewara.util.basePath="/";gewara.util.httpsPath="https://www.gewara.com/";gewara.util.imgPath="http://img5.gewara.com/";gewara.util.cdnPath="http://static5.gewara.com/";gewara.util.icon=gewara.util.cdnPath+"css/global/pub_icon.png";gewara.util.retdata={};gewara.util.retdata.success=true;gewara.util.member={};gewara.util.member.login=false;gewara.util.member.isMobile=false;gewara.util.member.headUrl="";gewara.util.isNumber=function(a){return/^\d+$/.test(a)};gewara.util.isWarp=window.screen.availWidth>=1280;gewa.util.cinemaCityPy="";gewara.util.isNotNull=function(a){return(!(a.match(/^\s*$/)))};gewara.util._isObject=function(a){return a.toString()==="[object Object]"};gewara.util._hasObject=function(a){a=a.toString().indexOf("[object Object]");
return a>=0?true:false};gewara.util.isMobile=function(a){return(/^(?:13\d|15[0-9]|18[0-9]|17[0-9]|14[0-9])-?\d{5}(\d{3}|\*{3})$/.test(a))};gewara.util.isEmail=function(a){return(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)*(\.[a-zA-Z]{2,4})$/.test(a))};gewara.util.isIdCard=function(a){return(/(^\d{15}$)|(^\d{17}([0-9]|[X,x])$)/.test(a))};gewara.util.replaceStr=function(a){$(a).value=$(a).value.replace(/[^\d]/g,"")};gewara.util.isVideoURL=function(a){var b="^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*'().&amp;=+$%-]+: )?[0-9a-z_!~*'().&amp;=+$%-]+@)?(([0-9]{1,3}\\.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+\\.)*(tudou|youku|56|ku6|qq|sohu|iqiyi|qiyi)\\.[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-zA-Z_\\/!~*'().;?:@&amp;=+$,%#-]+)+/?)$";return new RegExp(b).test(a)};var _debug=function(){if("\v"=="v"){alert(arguments)}else{try{console.info(arguments)}catch(a){}}};gewara.util.refreshCaptcha=function(f,c,e){if($(f+"Img")){$(f+"Img").setStyle("background","url("+gewara.util.cdnPath+"css/images/loading2.gif) center center no-repeat")
}var h=gewara.util.basePath;var d=gewara.util.httpsPath;if(e){h=e.replace("https","http");d=e}if($("baoshan_test_001")||!document.location.href.contains("gewara.com")||document.location.href.contains("w137.gewara.com")||document.location.href.contains("m137.gewara.com")){var b=h.indexOf("://");if(b>0){b+=3;h=h.substring(b,h.length);b=h.indexOf("/");h=h.substring(b,h.length)}var g=d.indexOf("://");if(g>0){g+=3;d=d.substring(g,d.length);g=d.indexOf("/");d=d.substring(g,d.length)}}if($(f).value==""){gewara.util.sendRequest(h+"getCaptchaId.xhtml",{r:gewara.util.rtime()},function(i){if(i.success){$(f).value=i.retval;var j=d+"captcha.xhtml?captchaId="+i.retval+"&r="+gewara.util.rtime();if(c){j=j+"&zt="+c}$(f+"Img").src=j}else{alert("获取验证码出错，请重新获取！")}},"get")}else{var a=d+"captcha.xhtml?captchaId="+$(f).value+"&r="+gewara.util.rtime();if(c){a=a+"&zt="+c}$(f+"Img").src=a}$(f+"Input").value="";if($(f+"Input").retrieve("label")){$(f+"Input").retrieve("label").text.innerHTML="输入验证码"}$(f+"Input").onfocus=null
};gewara.util.openwin=function(a,c){var b=new Element("form",{target:c,action:a,method:"post",styles:{display:"none","z-index":"-1"}}).addEvent("submit",function(){b.submit()}).inject(document.body);b.fireEvent("submit")};gewara.util.getLength=function(c){var b=0;for(var a in c){if(c.hasOwnProperty(a)){b++}}return b};gewara.util.baseValidForm=function(f,c){var b=$(f).getElements("*[mustTxt]");var a=true;try{$each(b,function(e,h){var g=$(e).get("value");if(!GewaraUtil.isNotNull(g)){if(c=="admin"){alert($(e).get("mustTxt"))}else{if(c=="member"){gewaUtil.alert($(e).get("mustTxt"))}else{if($(e)){$(e).focus()}if($(e)&&$(e).type!="hidden"&&!$(e).match("textarea")){GewaraUtil.showValidateErr(e,$(e).get("mustTxt"))}else{gewaUtil.alert($(e).get("mustTxt"))}}}a=false;throw"break"}})}catch(d){return false}return a};gewara.util.showValidateErr=function(c,e,a,b){c=$(c);if(!c){gewaUtil.alert(e);return false}if(c.retrieve("tips")==null){c.store("tips",true);var d=new Element("div",{styles:{position:"absolute",width:"auto",height:"20px",border:"1px solid #ffcccc",background:"#ffeeee",padding:"0px 5px",color:"#333","z-index":"999",overflow:"hidden"}}).inject(document.body);
new Element("div",{"class":"errmsg",html:e}).inject(d);d.position({relativeTo:c,position:"leftBottom",offset:{x:(c.getParent("label.text"))?-7:0,y:(c.getParent("label.text"))?-2:0}});(function(){d.dispose();c.store("tips",null)}).delay(2600)}else{return false}};gewara.util.showErrorMsg=function(a,b){if(!$(a)){return}var c=new Hash(b);c.each(function(f,d){var e=$(a).getElement("*[name="+d+"]");if(d&&e){GewaraUtil.showValidateErr(e,f)}})};gewara.util.showLoading=function(b){if(!$("loadingPic")){var a=new Element("img",{id:"loadingPic",src:GewaraUtil.cdnPath+"css/home/loading.gif",styles:{display:"block",position:"absolute",top:"0px",left:"0px",visibility:"hidden",padding:"4px","z-index":"401"}});a.inject(document.body)}gewara.util.toCenter("loadingPic",b)};gewara.util.hideLoading=function(){if($("loadingPic")){$("loadingPic").setStyle("visibility","hidden")}};gewara.util.showDialog=function(e,f,b,c){if(!f){f=$(e).getStyle("z-index")}if(f<10){f=200}var d=$("dialogDisabledZone"),a=$(document.body).getScrollSize();
if(!d){d=new Element("div",{id:"dialogDisabledZone",styles:{position:"absolute","z-index":f-1,left:"0px",top:"0px","background-color":"#000"}});d.inject($(document.body),"top")}d.setStyles({width:a.x,height:a.y,display:"",visibility:"visible","z-index":f-1});d.setOpacity(0.6);$(e).setStyles({position:"absolute","z-index":f,display:"",top:0,left:0,visibility:"visible"}).show();gewara.util.toCenter(e);if(b){$(e).pin()}};gewara.util.showAlbumDialog=function(d,f,a,b){if(!f){f=$(d).getStyle("z-index")}if(f<10){f=200}$(document.body).setStyle("overflow","hidden");var c=$("dialogDisabledZone"),e=$(document.body).getSize();winSize=$(document.body).getScrollSize();if(!c){c=new Element("div",{id:"dialogDisabledZone",styles:{position:"absolute","z-index":f-1,left:"0px",top:"0px","background-color":"#474747"}});c.inject($(document.body),"top")}c.setStyles({width:winSize.x,height:winSize.y,display:"",visibility:"visible","z-index":f-1});$(d).setStyles({position:"absolute",height:e.y,"z-index":f,display:"",top:0,left:0,visibility:"visible"}).show();
gewara.util.toCenter(d);if(a){$(d).pin()}};gewara.util.hideAlbumDialog=function(a){if($("dialogDisabledZone")){$("dialogDisabledZone").setStyles({visibility:"hidden",top:"0px",height:"0px"})}if($(a)){$(a).setStyles({display:"none",visibility:"hidden",top:"0px"})}};gewara.util.hideDialog=function(a){if($("dialogDisabledZone")){$("dialogDisabledZone").setStyles({visibility:"hidden",top:"0px",height:"0px"})}if($(a)){$(a).setStyles({display:"none",visibility:"hidden",top:"0px"})}};gewara.util.toCenter=function(c,b){var a=$(b)||document.body,d=$(c).getStyle("z-index");if(!d||(d<10)){d=100}$(c).setStyles({position:"absolute","z-index":d,visibility:"visible"});$(c).position({relativeTo:a,position:"center",edge:"center"})};gewara.util.moveTo=function(d,c,b,a){if(!b){b=0}if(!a){a=0}var e=$(d).getStyle("z-index");if(!e||e<10){e=100}$(d).setStyles({position:"absolute","z-index":e,visibility:"visible"});$(d).position({relativeTo:$(c),position:"upperLeft",offset:{x:b,y:a}});return this};gewara.util.moveToMouse=function(b,a,c){$(b).setStyles({position:"absolute","z-index":zIndex,visibility:"visible"});
$(b).position({relativeTo:document.body,position:"upperLeft"})};gewara.util.getValues=function(c,d){if(!$(c)){return null}var b=$(c).toQueryString().parseQueryString();if(!d){return b}var e=new Hash(b),a={};e.each(function(g,f){if(f){a[f]=(g&&g.join)?g.join(d):g}});return a};gewara.util.getPostValues=function(b){if(!$(b)){return null}var a=$(b).toQueryString().parseQueryString();return a};gewara.util.setValues=function(a){var b=new Hash(a);b.each(function(d,c){if(c&&$(c)){if($(c).getAttribute("type")){$(c).value=d}else{if($(c).match("select")){$(c).getElements("option").each(function(e){if(e.value==d){e.selected=true}})}else{$(c).innerHTML=d}}}})};gewara.util.updateHtml=function(b,a){var c=new Hash(b);c.each(function(e,d){if(d&&$(d+"_"+a)){$(d+"_"+a).set("html",e)}})};gewara.util.inArea=function(b,a,d){var c=$(b).getCoordinates();return a>=c.left&&a<=c.right&&d>=c.top&&d<=c.bottom};gewara.util.outArea=function(b,a,d){var c=$(b).getCoordinates();return a<c.left||a>c.right||d<c.top||d>c.bottom
};gewara.util.show=function(a){try{a.show()}catch(b){}};gewara.util.hide=function(a){try{a.hide()}catch(b){}};gewara.util.openWindow=function(b,c,d,j,a,h,f){var i=20,e=120,g;if(window.screen.height){i=(window.screen.height-j)/2}if(window.screen.width){e=(window.screen.width-d)/2}g=window.open(b,c,"width="+d+",height="+j+",resizable="+(a?"yes":"no")+",scrollbars="+(h?"yes":"no")+",status="+(f?"1":"0")+",top="+i+",left="+e);if(g){g.focus()}return g};gewara.util.isEmptyObject=function(b){for(var a in b){return false}return true};gewara.util.sendRequest=function(url,values,callback,vmethod){if(typeof values==="object"){if(gewara.util.isEmptyObject(values)){vmethod="get"}}var myRequest=new Request({url:url,method:vmethod||"post",onSuccess:function(resText){eval(resText);if(callback){callback.run(data)}},onFailure:function(res){if(callback){var data={success:false,msg:"网络请求错误！"};if(res.status==403){data.msg="无权限！"}callback.run(data)}}});myRequest.send({data:values})};gewara.util.sendRequest4Json=function(c,a,e,b){if(typeof a==="object"){if(gewara.util.isEmptyObject(a)){b="get"
}}a.callMethod="ajax";var d=new Request.JSON({url:c,method:b||"post",onSuccess:function(f){f.success=f.success||(f.code=="0000");f.msg=f.msg||f.error;f.retval=f.retval||f.data;if(e){e.run(f)}},onFailure:function(g){if(e){var f={success:false,msg:"网络请求错误！"};if(g.status==403){f.msg="无权限！"}e.run(f)}},onError:function(h,f){var g={success:false,msg:"数据格式错误！"};if(e){e.run(g)}}});d.send({data:a})};gewara.util.sendLoad=function(c,b,a,f,d,e){return gewara.util.sendLoadCore(c,b,a,f,"true",d,e)};gewara.util.sendLoadEasy=function(c,b,a,f,d,e){return gewara.util.sendLoadCore(c,b,a,f,"false",d,e)};gewara.util.sendLoadCore=function(el,url,values,callback,iseval,ori,method){try{var off=url.indexOf("#"),selector="";if(off>=0){selector=url.slice(off+1,url.length);url=url.slice(0,off)}var storeValue=$(ori)?$(ori).retrieve("key"):null;var storeJS=$(ori)?$(ori).retrieve("js"):null;iseval=iseval||"true";if(storeValue==null){new Request.HTML({headers:{"Cache-Control":"no-cache,no-store","If-Modified-Since":"0"},url:url,method:method||"get",evalScripts:false,async:true,link:"cancel",onSuccess:function(responseTree,responseElements,responseHTML,responseJavaScript){if(selector&&responseElements.length!=0){var child=new Element("div",{html:responseHTML}).getElement("*[id="+selector+"]");
responseHTML=child.innerHTML}if(responseElements.length==0){if(callback){try{eval(responseHTML)}catch(e){}if(typeof data=="object"){callback.run({success:false,html:responseHTML,json:data})}else{callback.run({success:true,html:responseHTML})}}}else{if(el&&$(el)){$(el).set("html",responseHTML);if(iseval=="true"){eval(responseJavaScript)}$(ori)?$(ori).store("key",responseHTML):null;$(ori)?$(ori).store("js",responseJavaScript):null;if(callback){callback.run({success:true,html:responseHTML})}}else{if(callback){callback.run(responseHTML)}}}},onFailure:function(res){if(callback){callback.run({success:false,msg:"网络请求错误！"})}}}).send({data:values})}else{if(el&&$(el)){if(storeValue){$(el).set("html",storeValue)}if(storeJS){eval(storeJS)}if(callback){callback.run({success:true,html:storeValue})}}else{if(callback){callback.run(storeValue)}}}}catch(e){}};gewara.util.sendLoadXML=function(c,b,a,d){new Request({headers:{"Cache-Control":"no-cache,no-store","If-Modified-Since":"0"},url:b,method:"get",evalScripts:false,onSuccess:function(f,e){if(d){d.run({success:true,html:f,xml:e})
}},onFailure:function(e){if(d){d.run({success:false,msg:"网络请求错误！"})}}}).send({data:a})};gewara.util.slideIn=function(c){var b=$(c);var a=new Fx.Slide(b,{mode:"vertical",transition:"sine:in",duration:300});a.slideIn()};gewara.util.removeAllOptions=function(a){var b=$(a);b.getElements("option").dispose()};gewara.util.addOptions=function(a,c,g,d){var f=$(a),b,e;c.each(function(h){if(g instanceof Function){b=g.run(h)}else{b=h[g]}if(d instanceof Function){e=d.run(h)}else{e=h[d]}new Element("option",{value:b,text:e}).inject(f)})};gewara.util._escapeHtml=true;gewara.util.setEscapeHtml=function(a){gewara.util._escapeHtml=a};gewara.util._shouldEscapeHtml=function(a){if(a&&a.escapeHtml!=null){return a.escapeHtml}return gewara.util._escapeHtml};gewara.util.escapeHtml=function(a){var c=document.createElement("div");var b=document.createTextNode(a);c.appendChild(b);return c.innerHTML};gewara.util._isHTMLElement=function(a,c){if(a==null||typeof a!="object"||a.nodeName==null){return false}if(c!=null){var b=a.nodeName.toLowerCase();
if(typeof c=="string"){return b==c.toLowerCase()}}return true};gewara.util._isArray=function(a){return(a&&a.join)?true:false};gewara.util.addRows=function(e,d,a,b){e=$(e);if(e==null){return}if(!gewara.util._isHTMLElement(e,["table","tbody","thead","tfoot"])){return}if(!b){b={}}if(!b.rowCreator){b.rowCreator=gewara.util._defaultRowCreator}if(!b.cellCreator){b.cellCreator=gewara.util._defaultCellCreator}var c,f;if(gewara.util._isArray(d)){for(f=0;f<d.length;f++){b.rowData=d[f];b.rowIndex=f;b.rowNum=f;b.data=null;b.cellNum=-1;c=gewara.util._addRowInner(a,b);if(c!=null){e.appendChild(c)}}}else{if(typeof d=="object"){f=0;for(var g in d){b.rowData=d[g];b.rowIndex=g;b.rowNum=f;b.data=null;b.cellNum=-1;c=gewara.util._addRowInner(a,b);if(c!=null){e.appendChild(c)}f++}}}};gewara.util._addRowInner=function(a,b){var d=b.rowCreator(b);if(d==null){return null}for(var e=0;e<a.length;e++){var c=a[e];if(typeof c=="function"){b.data=c(b.rowData,b)}else{b.data=c||""}b.cellNum=e;var f=b.cellCreator(b);if(f!=null){if(b.data!=null){if(gewara.util._isHTMLElement(b.data)){f.appendChild(b.data)
}else{if(gewara.util._shouldEscapeHtml(b)&&typeof(b.data)=="string"){f.innerHTML=gewara.util.escapeHtml(b.data)}else{f.innerHTML=b.data}}}d.appendChild(f)}}return d};gewara.util._defaultRowCreator=function(a){return document.createElement("tr")};gewara.util._defaultCellCreator=function(a){return document.createElement("td")};gewara.util.removeAllRows=function(c,a){c=$(c);if(c==null){return}if(!a){a={}}if(!a.filter){a.filter=function(){return true}}if(!gewara.util._isHTMLElement(c,["table","tbody","thead","tfoot"])){return}var d=c.firstChild;var b;while(d!=null){b=d.nextSibling;if(a.filter(d)){c.removeChild(d)}d=b}};function selectAll(a){$(a).getElements("option").each(function(b){b.selected=true})}var PanelGroup=new Class({tabList:[],initialize:function(c,g,d,i,e,b){this.activeClass=d||"active";this.hideClass=i||"none";this.eventName=e||"click";this.current=g||"";var j=this.activeClass,f=this.hideClass,h=this.eventName,a=this;if(g&&$(g)){$(g).addClass(this.activeClass);$(g+"_content").removeClass(f)
}this.tableList=c;c.each(function(l,k){if($(l)){$(l).addEvent(h,function(){if($(a.current)){$(a.current).removeClass(j);$(a.current+"_content").addClass(f)}a.current=l;$(l).addClass(j);$(l+"_content").removeClass(f);if(b&&$defined(b)&&typeof b=="function"){b.call(this,this)}})}})}});var ClassGroup=new Class({initialize:function(a,f,e,d){this.current=f||"";this.activeClass=e||"active";this.hideClass=d||"none";this.tableList=a;var c=this.activeClass,b=this;if(f){$(f).addClass(c)}a.each(function(g){if($(g)){$(g).addEvent("click",function(){if($(b.current)){$(b.current).removeClass(c)}b.current=g;$(g).addClass(c)})}})}});function resizePicture(b,g,e,f,d){var a=0,c=0,i=f||"/userfiles/",h="";b.each(function(j){Asset.image(j.get("src"),{styles:{opacity:0,position:"absolute",left:0,top:0},onLoad:function(){var k=this.getSize();if(k.x>=g){if(k.x>=g||e){if(j.getParent().tagName!="A"){j.inject(new Element("a",{href:j.src.replace(d+"/","sw600h600/"),rel:"lightbox[galerie]",target:"_blank"}).inject(j,"before"))
}}if(k.x>=g&&!d){a=k.y*g/k.x;c=g;j.set("width",c);j.set("height",a);j.setStyles({width:c+"px",height:a+"px"})}slidePicture()}this.dispose()}}).inject(document.body)})}function slidePicture(){var a=$$("a").filter(function(b){return b.rel&&b.rel.test(/^lightbox/i)});$$(a).slimbox({},null,function(b){return(this==b)||((this.rel.length>8)&&(this.rel==b.rel))})}function copyToClipboard(a){var b=$(a);if(Browser.Engine.trident){b.select();therange=b.createTextRange();therange.execCommand("Copy");gewaUtil.alert("复制成功。现在您可以粘贴（Ctrl+v）到Blog 或BBS中了。");return}else{gewaUtil.alert("您使用的浏览器不支持此复制功能，请使用Ctrl+C或鼠标右键。");b.select()}}function stopPropagation(a){a.stopPropagation()}function getFCKHtml(a){var b=FCKeditorAPI.GetInstance(a);return b.GetXHTML()}function getFCKText(a,b){var c=FCKeditorAPI.GetInstance(a),d=$(c.EditorDocument.body).get("text");if(b&&d.length>b){return d.substring(0,b)}return d}function setFCKHtml(a,c){var b=FCKeditorAPI.GetInstance(a);return b.SetHTML(c)}function getAndClearFCKElement(a){var c=FCKeditorAPI.GetInstance(a);
var b=new Element("div",{html:c.GetXHTML()});["script","link","style"].each(function(d){b.getElements(d).dispose()});_process(b);c.SetHTML(b.innerHTML);return b.innerHTML}function _process(a){a.removeAttribute("class");a.getChildren().each(function(b){_process(b)})}function insertFCKHtml(a,c){var b=FCKeditorAPI.GetInstance(a);return b.InsertHtml(c)}function refreshPage(){var c=""+document.location.href,a=c.indexOf("refresh"),d=c.indexOf("#"),b="";if(d>0){b=c.substring(d);c=c.substring(0,d)}if(a>0){c=c.substring(0,a-1)}else{a=c.indexOf("?");if(a>0){c=c+"&refresh=1"}else{c=c+"?refresh=1"}}c+=b;document.location.href=c}var runtopAndBottom=new Class({initialize:function(a,b){this.isPause=false;this.maxScroll=$(a).getScrollSize().y-$(a).getSize().y;var d=this,c=function(){if(!d.isPause){d.fx.start(0,$(a).getScroll().y+b)}};this.fx=new Fx.Scroll(a,{duration:500,transition:Fx.Transitions.Sine.easeOut,onComplete:function(){if($(a).getScroll().y==d.maxScroll){this.set(0,0)}}});$(a).addEvents({mouseover:function(){d.isPause=true
},mouseout:function(){d.isPause=false}});c.periodical(3000)}});function checkLogin(c,a,b){if(!b){b=function(){}}if(gewara.util.member.login){a()}else{gewara.util.sendRequest(GewaraUtil.basePath+"ma/common/checkLogon.xhtml",{},function(d){if(d.success){gewara.util.member.login=true;gewara.util.member.memberid=d.id;gewara.util.member.nickname=d.nickname;gewara.util.member.isMobile=d.isMobile;gewara.util.member.headUrl=d.headUrl;a()}else{showLogin(a,b)}})}}function gotoPosition(a){if($(a)){$(window).scrollTo(0,$(a).getPosition().y)}}function gotoURL(a,b){if(b){document.location.target=b}document.location.href=a}var DefaultValue=new Class({initialize:function(b,a){if($(b).value.trim()==""){$(b).value=a}$(b).addEvents({blur:function(){if(this.value.trim()==""){this.value=a}},focus:function(){if(this.value.trim()==a){this.value=""}}})}});function addMemberTreasure(memberid,tag,obj){checkLogin(true,function(){var url=GewaraUtil.basePath+"micro/addMicroAttention.xhtml";new Request({url:url,method:"post",onSuccess:function(resText){eval(resText);
if(data.success){if(tag=="micro"){if($chk(obj)&&$chk(obj.getParent("span"))){obj.getParent("span").set("text","已关注").addClass("gray")}else{refreshPage()}}else{gewaUtil.alert(data.retval)}}else{gewaUtil.alert(data.msg)}}}).send({data:{memberid:memberid}})})}function microChange(c){var a=140;if($chk($(c).value)){a=140-$(c).value.length}if(a<0){var b=Math.abs(a);$("microText").set("styles",{color:"#C03B0C"});$("microText").set("html",'已超出<b style="font-size:15px;font-family: Constantia,Georgia" id="font">'+b+"</b>个汉字")}else{$("microText").set("styles",{color:"black"}).set("html",'你还可以输入<b style="font-size:15px;font-family: Constantia,Georgia" id="font">'+a+"</b>个字")}}function isCommuBlack(c,d){var b=GewaraUtil.basePath+"home/commu/isCommuBlack.xhtml";var a={commuid:c};return GewaraUtil.sendRequest(b,a,function(e){if(e.success){if(d){window.document.location=d}}else{gewaUtil.alert(e.msg)}})}function addFans(e,d,a){var c=GewaraUtil.basePath+"ajax/common/tobeFans.xhtml";var b={relatedid:d,tag:a};
GewaraUtil.sendRequest(c,b,function(f){if(f.success){gewaUtil.alert("已添加成功!")}else{gewaUtil.alert(f.msg)}});$(e).removeEvent("click",addFans)}function removeFriendRelate(c){if(confirm("解除好友关系从好友列表中删除，确认删除吗？")){var b=GewaraUtil.basePath+"wala/removeFriend.xhtml";var a={memberid:c};GewaraUtil.sendRequest(b,a,function(d){if(d.success){refreshPage()}else{gewaUtil.alert(d.msg)}})}}gewara.util.successAlert=function(a){$(a).addClass("OkMsg");$(a).innerHTML="设置成功！";(function(){$(this).removeClass("OkMsg");$(this).innerHTML=""}.bind(a)).delay(3000)};var tableDialog=new Class({Implements:[Options,Events],options:{},initialize:function(c){this.setOptions(c);this.options.table=new Element("table",{cellspacing:"0",cellpadding:"0",border:"0",width:"100%"});var b=new Element("tbody").inject(this.options.table);var d=new Element("tr").inject(b);new Element("td").addClass("dialog_tl").inject(d);new Element("td").addClass("dialog_c").inject(d);new Element("td").addClass("dialog_tr").inject(d);var e=new Element("tr").inject(b);
new Element("td").addClass("dialog_c").inject(e);this.options.content=new Element("td").inject(e);new Element("td").addClass("dialog_c").inject(e);var a=new Element("tr").inject(b);new Element("td").addClass("dialog_bl").inject(a);new Element("td").addClass("dialog_c").inject(a);new Element("td").addClass("dialog_br").inject(a)}});gewara.util.mask=function(b,a){gewa.util.mask({element:b,mid:a||"mskid_defined_",title:"正在提交，请稍等..."})};gewara.util.mask2=function(b,a){gewa.util.mask2({element:b,mid:a||"mskid_defined_"})};gewara.util.unmask=function(){gewa.util.clearMask(arguments[0])};gewa.util.maskContent=function(d,h,i,b,c,l,n,f,g,k,a,m){var e=(i?i.length*20+100:""),j=h?h.length*12>360?360:h.length*12+20:40,j=e?e>j?e:j:e;gewa.util.core({bgel:$chk(d)?$(d):document.body,content:h,title:i||"",width:b||j,def:c||"",callback:l||$empty,bgcolor:n||"#fff",dialogBgcolor:f||"#aaa",isEsc:g||false,cancelCallback:k||$empty,initCallback:a||$empty,isPin:m||false})};gewa.util.issure=function(d,g,h,b,c,j,e,k,a,l){var f=(h?h.length*20+100:""),i=g?g.length*12>360?360:g.length*12+40:40,i=f?f>i?f:i:f;
gewa.util.core({bgel:$chk(d)?$(d):document.body,content:g,title:h||"",width:b||i,def:c||"",callback:j||$empty,issure:true,cancelCallback:k||$empty,initCallback:a||$empty,sureBt:e||"确定",cancelBt:l||"取消"})};gewa.util.confirm=function(f,g,e,d,b,c){var a=f.length*16<320?320:f.length*16+60;a=a>360?360:a;return gewa.util.core({bgel:$chk(e)?$(e):document.body,content:f,title:"格瓦拉生活网提示",width:d||a,issure:true,callback:g,zIndex:600,isConfirm:true,opacity:0.4,def:"confirm",sureBt:b||"确定",cancelBt:c||"取消"})};gewa.util.alert=function(e,g,d,c,f,b){var a=e?e.length*16<320?e.length*16>360?360:320:e.length*16+60:320;return gewa.util.core({bgel:$chk(d)?$(d):document.body,content:e,title:f||"格瓦拉生活网提示",width:c||a,issure:true,callback:g||$empty,zIndex:601,isAlert:true,opacity:0.4,def:"alert",sureBt:b||"确定"})};gewa.util.tips=function(){var a=arguments[1]?arguments[1].length*12>360?360:arguments[1].length*12+40:60;gewa.util.core({bgel:$chk($(arguments[0]))?$(arguments[0]):document.body,content:arguments[1],isFlag:false,width:arguments[2]||a,def:arguments[3]?arguments[3]:"tips",point:arguments[4]||"down",callback:arguments[5]||$empty(),zindex:arguments[6]?arguments[4]:300,ishide:arguments[7]||1,isEsc:arguments[8]||false,size:arguments[9]||15,tipsBgColor:arguments[10]||"#fff",tipsPtImg:arguments[11]||"css/home/opt.png"})
};gewa.util.popo=function(e,d,c,a,b,g){d=$(d)?$(d).getElement(".none").get("html"):d;var f=function(h,i){if(b&&typeof b=="function"){b(h,i,a,g)}else{gewa.util.tips(h,d,c,i,a,g)}};e.each(function(h){h.addEvents({mouseenter:function(){this.store("isher",true);(function(){if(this.retrieve("isher")!=null){var i=e.indexOf(this);if(gewa.util.container["tips_"+i]){gewa.util.container["tips_"+i].isAttach=true}else{f(this,"tips_"+i)}}}).delay(200,this)},mouseleave:function(){var i=e.indexOf(this);this.store("isher",null);if(gewa.util.container["tips_"+i]){gewa.util.container["tips_"+i].isAttach=false;gewa.util.container["tips_"+i].disposeTips.delay(120,["tips_"+i])}}})})};gewa.util.container=new Hash();gewa.util.core=function(i){var e=i.def||"default";var j=i.recreate||true;if(gewa.util.container[e]&&$defined(gewa.util.container[e])&&gewa.util.container[e].coreDialog){gewa.util.container[e].show(e);return false}var d={};gewa.util.container[e]=d;d.options=$extend({def:"default",content:"",bgel:document.body,isFlag:true,ishide:true,border:1,width:360,title:"",bgcolor:"#fff",zIndex:300,issrue:false,callback:$empty,cancelCallback:$empty,initCallback:$empty,sureBt:"确定",cancelBt:"取消",isConfirm:false,isAlert:false,point:"up",opacity:0.4,tipsBorderColor:"#999",tipsBgColor:"#fff",tipsPtImg:"css/home/opt.png",ietipsPtImg:"css/home/opt.gif?v=000",allowmax:960,dialogBgcolor:"#aaa",isEsc:false,isPin:false},i||{});
d.coreDialog={};d.options.bgel=$(d.options.bgel);if(d.options.bgel&&d.options.bgel.match("body")){d.p=d.options.bgel.getScrollSize()}else{d.p=d.options.bgel.getDimensions()}d.pos=d.options.bgel.getPosition();d.coreDialog=new Element("div",{styles:{width:"auto",display:"inline-block",height:"auto",opacity:0,position:"absolute",top:0,"z-index":d.options.zIndex+1}}).inject(document.body);d.coreDialog.set("id","self"+d.options.def);d.isAttach=true;d.coreTable=new Element("table",{cellspacing:"0",cellpadding:"0",border:"0",width:"100%"}).addClass("tableLayer").inject(d.coreDialog);d.coreTbody=new Element("tbody").inject(d.coreTable);d.coreTR=new Element("tr").inject(d.coreTbody);new Element("td").addClass("t_l").inject(d.coreTR);new Element("td").addClass("t_c").inject(d.coreTR);new Element("td").addClass("t_r").inject(d.coreTR);d.coreTR=new Element("tr").inject(d.coreTbody);new Element("td").addClass("m_l").inject(d.coreTR);d.coreTD=new Element("td",{styles:{padding:1,background:d.options.dialogBgcolor}}).addClass("m_c").inject(d.coreTR);
new Element("td").addClass("m_r").inject(d.coreTR);d.coreTR=new Element("tr").inject(d.coreTbody);new Element("td").addClass("b_l").inject(d.coreTR);new Element("td").addClass("b_c").inject(d.coreTR);new Element("td").addClass("b_r").inject(d.coreTR);if(d.options.isFlag){if(d.options.isEsc){if($("dailogCoreDisable")){$("dailogCoreDisable").setStyles({width:d.p.x+"px",height:d.p.y+"px",top:d.pos.y+"px",left:d.pos.x+"px","background-color":d.options.dialogBgcolor,"z-index":d.options.zIndex}).show()}else{new Element("div",{id:"dailogCoreDisable",styles:{position:"absolute",width:d.p.x+"px",height:d.p.y+"px",top:d.pos.y+"px",left:d.pos.x+"px","z-indent":"9",opacity:d.options.opacity,"background-color":d.options.dialogBgcolor,"z-index":d.options.zIndex}}).inject(document.body)}}else{oldStyle={styles:{position:"absolute",width:d.p.x+"px",height:d.p.y+"px",top:d.pos.y+"px",left:d.pos.x+"px","z-indent":"9",opacity:d.options.opacity,"background-color":d.options.dialogBgcolor,"z-index":d.options.zIndex}};
newStyle={styles:{position:"fixed",width:"100%",height:"100%",top:0,left:0,"z-indent":"9",opacity:d.options.opacity,"background-color":d.options.dialogBgcolor,"z-index":d.options.zIndex,"overflow-y":"scroll"}};d.coreDisable=new Element("div",oldStyle).inject(document.body);d.coreDisable.set("id","parent"+d.options.def)}}else{d.tapImg=gewara.util.cdnPath+d.options.tipsPtImg;d.ietipsPtImg=gewara.util.cdnPath+d.options.ietipsPtImg;d.coreTable.addClass("fixTableLayer");d.los=new Element("div",{styles:{height:(d.options.point=="up"||d.options.point=="down")?"15px":"33px",width:(d.options.point=="up"||d.options.point=="down")?"33px":"15px",overflow:"hidden",position:"absolute",background:"url("+(!Browser.ie6?d.tapImg:d.ietipsPtImg)+") no-repeat"}}).inject(d.coreDialog);if(d.options.ishide&&d.options.ishide==1){d.coreDialog.addEvents({mouseenter:function(){d.isAttach=true;if(d.options.callback){d.options.callback()}},mouseleave:function(){d.isAttach=false;if(d.options.callback){d.options.callback()
}d.disposeTips.delay(120,[e])}})}else{if(d.options.callback){d.options.callback()}}}if(d.options.title){new Element("h2",{text:d.options.title?d.options.title:"格瓦拉生活网提示",styles:{height:"42px","line-height":"42px","text-indent":"10px","font-size":"16px","font-weight":"bold",background:"#f0f0f0",width:"100%",display:"block",color:"#333"}}).inject(d.options.isFlag?d.coreTD:d.coreDialog);if(!d.options.isConfirm&&!d.options.isAlert){new Element("span",{styles:{position:"absolute",top:"14px",right:"16px",cursor:"pointer",display:"block",height:"23px",width:"23px",background:"url("+gewara.util.icon+") 0 -142px no-repeat"}}).addEvents({click:function(){d.options.cancelCallback.call();d.dispose(e)},mouseenter:function(){this.setStyle("background-position","-23px -142px")},mouseleave:function(){this.setStyle("background-position","0 -142px")}}).inject(d.options.isFlag?d.coreTD:d.coreDialog)}}d.content=new Element("div",{styles:{padding:d.options.isEsc?"":"10px",width:"auto","line-height":"22px",color:"#666","font-size":"12px","font-weight":"normal","background-color":d.options.isFlag?d.options.bgcolor:d.options.tipsBgColor,height:"auto",overflow:"hidden"}}).inject(d.coreTD);
if($(d.options.content)){$(d.options.content).show().setStyle("opacity",1).inject(d.content)}else{d.content.innerHTML=d.options.content?d.options.content:"哦，出错了..."}d.show=function(){var k=arguments[0]?arguments[0]:"default";if(gewa.util.container[k]){gewa.util.show(gewa.util.container[k].coreDialog,function(){if(gewa.util.container[k].coreDisable){gewa.util.container[k].coreDisable.show()}})}};d.getPositionSettings=function(k){var l=d.options.isFlag?0:d.options.size||15;var m=d.options.isFlag?"center":d.options.point;switch(m){case"left":case 8:case 9:case 10:return{edge:{x:"left",y:"top"},position:{x:"right",y:"top"},offset:{x:l,y:-l}};case"right":case 2:case 3:case 4:return{edge:{x:"right",y:"top"},position:{x:"left",y:"top"},offset:{x:-l,y:-l}};case"up":case 11:case 12:case 1:return{edge:{x:k?k:"left",y:"bottom"},position:{x:k?k:"left",y:"top"},offset:{y:-l,x:(!k)?(-l):l+10}};case"down":case 5:case 6:case 7:return{edge:{x:k?k:"left",y:"top"},position:{x:k?k:"left",y:"bottom"},offset:{y:l,x:(!k)?(-l-5):l+10}};
case"center":return{edge:{x:"center",y:"center"},position:{x:"center",y:"center"},offset:{y:0,x:0}}}};d.hide=function(){var k=arguments[0]?arguments[0]:"default";if(!gewa.util.container[k]){return}if(gewa.util.container[k]){d.morph(gewa.util.container[k],function(){if(gewa.util.container[k]){gewa.util.container[k].coreDisable.hide()}})}};d.dispose=function(){var k=arguments[0]?arguments[0]:"default",l=arguments[1];if(!gewa.util.container[k]){return}if(gewa.util.container[k]){d.morph(gewa.util.container[k],function(){if(gewa.util.container[k]&&$(gewa.util.container[k].options.content)){if(l){$(gewa.util.container[k].options.content).dispose()}else{$(gewa.util.container[k].options.content).hide().inject(document.body)}}if(gewa.util.container[k]&&gewa.util.container[k].coreDialog){gewa.util.container[k].coreDialog.dispose()}if($("dailogCoreDisable")&&gewa.util.container[k].options.isEsc){$("dailogCoreDisable").hide()}else{if(gewa.util.container[k]&&gewa.util.container[k].coreDisable){gewa.util.container[k].coreDisable.dispose()
}}gewa.util.container.erase(k)})}};d.morph=function(n,l){if(!n){return}if(n.coreDialog){var q=n.coreDialog.getPosition(),o=window.getScroll(),p=n.coreDialog.getDimensions();var k=n.coreFloor.retrieve("key");if(k){if(!n.options.bgel.match("body")){q.x=q.x==0?k.l:q.x+o.x;q.y=q.y==0?k.t:q.y+o.y}if(!d.options.isFlag){var m=d.options.bgel.retrieve("vp")}n.coreDialog.setStyle("overflow","hidden");n.coreDialog.set("morph",{duration:d.options.isFlag?260:200,transition:Fx.Transitions.linear,link:"cancel",onComplete:function(){if(l&&typeof l=="function"){l()}}}).morph({opacity:[1,0],width:[p.width,0],height:[p.height,0],top:[d.options.isFlag?q.y:m.top-d.coreDialog.h/2,(!d.options.isFlag)?m.top:p.height/2+q.y],left:[d.options.isFlag?q.x:m.left-d.coreDialog.w/2,(!d.options.isFlag)?m.left:p.width/2+q.x],"font-size":[12,4]});if(n.coreDialog.getElement("table")){n.coreDialog.getElement("table").set("morph",{duration:300,transition:Fx.Transitions.linear,link:"cancel"}).morph({"margin-left":[0,-p.width/5],"margin-top":[0,-p.height/5],width:[p.width,p.width/5],height:[p.height,p.height/5],"font-size":[12,4]})
}}else{l()}}};d.disposeTips=function(){if(gewa.util.container[this]&&!gewa.util.container[this].isAttach){d.dispose(this,true)}};d.sanim=function(){var m=arguments[0],l=arguments[1];d.options.counter={count:l};var k=(function(){if(this.count==0){if(d.options.callback){d.options.callback()}d.dispose(e);clearInterval(k)}m.setStyle("width","80px");m.value=d.options.sureBt+"("+this.count+")";this.count--}).periodical(1000,d.options.counter)};if(d.options.issure){d.buttonBox=new Element("div",{styles:{width:"94%",height:"100%",overflow:"hidden"}}).inject(new Element("div",{styles:{height:"32px",padding:"0 0 15px 0",width:"100%",background:"#fff",overflow:"hidden"}}).inject(d.options.isFlag?d.coreTD:d.coreDialog));if(!d.options.isAlert){new Element("input",{type:"button",value:d.options.cancelBt}).addEvents({click:function(){d.options.cancelCallback.call();d.dispose(e)}}).inject(new Element("label",{styles:{"float":"right",margin:"0 0 0 15px"}}).addClass("bigWhiteBt bigBt button").addEvents({mouseenter:function(){this.addClass("bg_hover")
},mouseleave:function(){this.removeClass("bg_hover")}}).inject(d.buttonBox))}d.cancel=new Element("input",{type:"button",value:d.options.sureBt}).addEvents({click:function(){if(d.options.isConfirm&&d.options.callback){d.options.callback();d.dispose(e)}else{if(d.options.counter){d.options.counter.count=0}else{if(d.options.callback){d.options.callback()}}}}}).inject(new Element("label",{styles:{"float":"right"}}).addClass("button redBt bigBt").addEvents({mouseenter:function(){this.addClass("bg_hover")},mouseleave:function(){this.removeClass("bg_hover")}}).inject(d.buttonBox));if(d.options.isAlert||d.options.isConfirm){d.content.setStyles({padding:"20px 20px 20px 60px","background-image":"url("+gewara.util.icon+")","background-repeat":"no-repeat","font-size":"16px","background-position":d.options.isAlert?"6px -742px":"6px -447px"})}if(d.options.isAlert){d.sanim(d.cancel,4)}}d.coreDialog.w=d.options.width?d.options.width:d.coreDialog.clientWidth>360?360:d.coreDialog.clientWidth;d.coreDialog.h=d.coreDialog.offsetHeight;
var a="";if(!d.options.isFlag){a=d.options.tipsBgColor}else{if(d.options.isAlert||d.options.isConfirm){a="#fff"}else{a=d.options.bgcolor}}var b="";if(d.options.point=="up"||d.options.point=="down"){var h=d.options.bgel.getPosition(),f=d.options.bgel.getDimensions(),g=(window.getSize().x-d.options.allowmax)/2;if((h.x+f.width+d.coreDialog.w)>(g+d.options.allowmax)){b="right"}}d.coreFloor=new Element("div",{styles:{border:"1px solid #dcdcdc",width:1,height:1,position:"absolute",overflow:"hidden","background-image":(!d.options.isAlert||!d.options.isConfirm)?"":"url("+gewara.util.cdnPath+"css/images/loading.gif)","background-position":"center center","background-repeat":"no-repeat","background-color":a,"z-index":d.options.zIndex}}).inject(document.body).position($extend({relativeTo:d.options.bgel},d.getPositionSettings(b)));d.coreDialog.l=d.coreFloor.getPosition().x;d.coreDialog.t=d.coreFloor.getPosition().y;if(d.coreFloor.retrieve("key")==null){d.coreFloor.store("key",{x:d.coreDialog.w,y:d.coreDialog.h,t:d.coreDialog.t,l:d.coreDialog.l})
}d.coreDialog.setStyle("width",d.coreDialog.w);d.coreFloor.set("morph",{duration:d.options.isFlag?260:200,transition:Fx.Transitions.linear,link:"cancel",onComplete:function(){try{d.coreDialog.setStyles({opacity:1});d.coreDialog.position($extend({relativeTo:d.options.bgel},d.getPositionSettings(b)));if(d.options.bgel==document.body&&!d.options.isPin&&!navigator.userAgent.match(/Windows NT 6.1/i)&&!navigator.userAgent.match(/rv:11/i)){d.coreDialog.pin()}d.coreFloor.dispose();if(navigator.userAgent.match(/Windows NT 6.1/i)&&navigator.userAgent.match(/rv:11/i)){(function(){d.coreDialog.setStyles({top:d.coreDialog.t-d.coreDialog.h/2,left:d.coreDialog.l-d.coreDialog.w/2})}).delay(10)}if(d.options.isFlag&&(d.options.isEsc||d.options.isAlert||d.options.isConfirm)){document.addEvent("keypress",function(l){if(l.key=="esc"){d.dispose(e,true)}if(l.key=="enter"){if(d.options.isConfirm&&d.options.callback){d.options.callback();d.dispose(e)}else{if(d.options.counter){d.options.counter.count=0}else{if(d.options.callback){d.options.callback()
}}}}document.removeEvent("keypress",arguments.callee)})}d.options.initCallback.call()}catch(k){}}});if(d.options.isFlag){d.coreFloor.morph({opacity:[0,1],width:[0,d.options.width?d.options.width:d.coreDialog.clientWidth>360?360:d.coreDialog.clientWidth],height:[0,d.coreDialog.offsetHeight],left:[d.coreDialog.l,d.coreDialog.l-d.coreDialog.w/2],top:[d.coreDialog.t,d.coreDialog.t-d.coreDialog.h/2]})}else{var c={};c.chlid=d.options.bgel.getDimensions();if(d.options.point=="left"){c.left=d.coreDialog.l+d.coreDialog.w/2+10;c.top=d.coreDialog.t+d.coreDialog.h/2;d.los.setStyles({left:"-9px",top:"12px","background-position":"0 -11px"})}else{if(d.options.point=="right"){c.left=d.coreDialog.l-d.coreDialog.w/2-10;c.top=d.coreDialog.t+d.coreDialog.h/2;d.los.setStyles({right:"-9px",top:"12px","background-position":"-33px -11px"})}else{if(d.options.point=="up"){if(b==""){d.los.setStyles({bottom:"-9px",left:"20px","background-position":"-9px -32px"});c.left=d.coreDialog.l+d.coreDialog.w/2}else{d.los.setStyles({bottom:"-9px",right:"20px","background-position":"-9px -32px"});
c.left=d.coreDialog.l-d.coreDialog.w/2}c.top=d.coreDialog.t-d.coreDialog.h/2+f.y/2}else{if(b==""){d.los.setStyles({top:"-9px",left:"20px","background-position":"-13px 0"});c.left=d.coreDialog.l+d.coreDialog.w/2}else{d.los.setStyles({top:"-9px",right:"10px","background-position":"-13px 0"});c.left=d.coreDialog.l-d.coreDialog.w/2}c.top=d.coreDialog.t+d.coreDialog.h/2+10}}}d.options.bgel.store("vp",c);d.coreFloor.morph({width:[0,d.options.width?d.options.width:d.coreDialog.clientWidth>360?360:d.coreDialog.clientWidth],height:[0,d.coreDialog.offsetHeight],left:[c.left,c.left-d.coreDialog.w/2],top:[c.top,c.top-d.coreDialog.h/2]})}};gewa.util.mask=function(a){this.options=$extend({mid:"mskid_defined_",table:"",content:"",title:"",element:document.body,opacity:"0.2",zindex:600,bgcolor:"#fff"},a||{});if($(this.options.element)){this.options.element=$(this.options.element)}else{this.options.element=document.body}this.dialog=new Element("div",{styles:{width:"130px",height:"30px",position:"absolute","z-index":this.options.zindex+1,background:"#eee",padding:"2px",border:"1px solid #aaa"}}).inject(document.body);
this.dialog.set("id",this.options.mid+"maskDialog");this.dialog.position({relativeTo:this.options.element,position:"center",edge:"center"});this.winSize=this.options.element.getScrollSize();this.winfacebox=new Element("div",{styles:{position:"absolute",width:this.winSize.x+"px",height:this.winSize.y+"px",top:"0",left:"0","z-indent":"9",opacity:this.options.opacity,"background-color":this.options.bgcolor,"z-index":this.options.zindex}}).inject($(document.body));this.winfacebox.set("id",this.options.mid+"winfacebox");gewara.util.toCenter(this.winfacebox,this.options.element);this.loadUrl=gewara.util.cdnPath+"css/home/load.gif";new Element("h2",{text:this.options.title?this.options.title:"请稍等...",styles:{height:"22px",width:"100%","line-height":"22px",color:"#333","font-size":"12px","font-weight":"normal","text-indent":"8px",background:"#eee",display:"block"}}).inject(this.dialog);new Element("div",{styles:{height:"8px",width:"100%",background:"#eee url("+this.loadUrl+") center center no-repeat"}}).inject(this.dialog)
};gewa.util.mask2=function(a){this.options=$extend({mid:"mskid_defined_",table:"",content:"",title:"",element:document.body,opacity:"0.4",zindex:600,bgcolor:"#000",height:""},a||{});if($(this.options.element)){this.options.element=$(this.options.element)}else{this.options.element=document.body}this.dialog=new Element("div",{styles:{width:"130px",height:"30px",position:"absolute","z-index":this.options.zindex+1}}).inject(document.body);this.dialog.set("id",this.options.mid+"maskDialog");this.dialog.position({relativeTo:this.options.element,position:"center",edge:"center"});this.winSize=this.options.element.getScrollSize();this.winfacebox=new Element("div",{styles:{position:"absolute",width:this.winSize.x+"px",height:this.options.opacity?this.options.opacity:this.winSize.y+"px",top:"0",left:"0","z-index":"9",opacity:this.options.opacity,"background-color":this.options.bgcolor,"z-index":this.options.zindex}}).inject($(document.body));this.winfacebox.set("id",this.options.mid+"winfacebox");
gewara.util.toCenter(this.winfacebox,this.options.element);this.loadUrl=gewara.util.cdnPath+"css/images/loading4.gif";new Element("div",{styles:{height:"8px",width:"100%",background:"url("+this.loadUrl+") center center no-repeat"}}).inject(this.dialog)};gewa.util.clearMask=function(){var b=arguments[0]&&$defined(arguments[0])?arguments[0]:"mskid_defined_",c=b+"maskDialog",a=b+"winfacebox";if($(c)&&$(a)){$(c).set("tween",{duration:1000,onComplete:function(){document.getElements("*[id="+a+"]").dispose();document.getElements("*[id="+c+"]").dispose()}}).tween("opacity","0")}};gewa.util.popoFlag=function(b){b=new Event(b);var a=this[0],c=this[1];if(a!=b.target&&!a.hasChild(b.target)&&!c.hasChild(b.target)&&c!=b.target){if(this[3]){this[3]()}document.removeEvents(this[2],this[4])}};gewa.util.loadData=function(){var a="T"+Date.now();var b=arguments[0]?arguments[0]:"";GewaraUtil.mask(b,a);gewara.util.sendLoad(arguments[0],arguments[1],arguments[2],function(){GewaraUtil.unmask(a);this(arguments[0])
}.bind(arguments[3]&&typeof(arguments[3])=="function"?arguments[3]:$empty),arguments[4])};gewa.util.dispose=function(){gewa.util.hide(arguments[0],function(){this.dispose()}.bind($(arguments[0])))};gewa.util.hide=function(){var b=$(arguments[0]);if(b.retrieve("fx")==null){var a=new Fx.Reveal(b,{duration:500,transition:"linear",onComplete:function(){if(typeof(this)=="function"){this()}}.bind(arguments[1]?arguments[1]:this)});b.store("fx",a);a.dissolve()}else{b.retrieve("fx").dissolve()}};gewa.util.show=function(){var b=$(arguments[0]);if(b.retrieve("fx")==null){var a=new Fx.Reveal(b,{duration:500,transition:"linear",onComplete:function(){if(typeof(this)=="function"){this()}}.bind(arguments[1]?arguments[1]:this)});b.store("fx",a);a.reveal()}else{b.retrieve("fx").reveal()}};gewa.util.shutOpen=function(e,c,b,f){var d=$(e),a=c,b=$(b),h="收起",g="展开";if(d){if(b){if(b.hasClass("shut")){b.removeClass("shut");b.set("text",b.get("text").replace(h,g));$(d).tween("height",f);return}else{b.addClass("shut");
b.set("text",b.get("text").replace(g,h))}}$(d).tween("height",a)}};var HoverGroup=new Class({Implements:[Options,Events],Binds:["enter","leave","remain"],options:{elements:[],delay:300,start:["mouseenter"],remain:[],end:["mouseleave"]},initialize:function(a){this.setOptions(a);this.attachTo(this.options.elements);this.addEvents({leave:function(){this.active=false},enter:function(){this.active=true}})},elements:[],attachTo:function(d,e){var b={},c={},a={};this.options.start.each(function(f){b[f]=this.enter},this);this.options.end.each(function(f){a[f]=this.leave},this);this.options.remain.each(function(f){c[f]=this.remain},this);if(e){d.each(function(f){f.removeEvents(b).removeEvents(a).removeEvents(c);this.elements.erase(f)})}else{d.each(function(f){f.addEvents(b).addEvents(a).addEvents(c)});this.elements.combine(d)}return this},detachFrom:function(a){this.attachTo(a,true)},enter:function(a){this.isMoused=true;this.assert(a)},leave:function(a){this.isMoused=false;this.assert(a)},remain:function(a){if(this.active){this.enter(a)
}},assert:function(a){$clear(this.assertion);this.assertion=(function(){if(!this.isMoused&&this.active){this.fireEvent("leave",a)}else{if(this.isMoused&&!this.active){this.fireEvent("enter",a)}}}).delay(this.options.delay,this)}});var dwCheckboxes=new Class({Implements:[Options],options:{elements:"input[type=checkbox]",mode:"toggle",relativ:""},initialize:function(a){this.setOptions(a);document.ondragstart=function(){return false};this.options.elements=$$(this.options.elements);this.manage()},manage:function(){var a=0;this.options.elements.each(function(c){c.addEvents({mousedown:function(d){d.stop();a=1;c.checked=!c.checked},mouseenter:function(d){if(a===1){c.checked=("toggle"==this.options.mode?!c.checked:"check"==this.options.mode)}this.allManager()}.bind(this),click:function(d){c.checked=!c.checked;a=0;this.allManager()}.bind(this)});var b=$$("label[for="+c.get("id")+"]");if(b.length){b[0].addEvent("click",function(){c.checked=!c.checked})}}.bind(this));window.addEvent("mouseup",function(){a=0;
this.allManager()}.bind(this))},allManager:function(){if(this.options.relativ){if(this.options.elements.filter(function(a){return a.checked}).length==this.options.elements.length){this.options.relativ.checked=true}else{this.options.relativ.checked=false}}}});String.implement({equals:function(a){return(this==a||JSON.encode(this)==JSON.encode(a))}});Element.implement({click:function(a){return this.addEvent("click",a)},hasEvent:function(a,b){var c=this.retrieve("events");return c&&c[a]&&(b==undefined||c[a].keys.contains(b))},definedHight:function(a){if(this.retrieve("height")==null){this.store("height",this.getDimensions().y)}this.setStyles({height:0,opacity:0,display:"block"});if(this.retrieve("fx")==null){this.set("morph",{duration:240,transition:Fx.Transitions.linear,link:"cancel",onComplete:function(){if(a&&typeof a=="function"){a()}}}).morph({height:this.retrieve("height"),opacity:1});this.store("fx",true)}else{this.morph({height:this.retrieve("height"),opacity:1})}},zeroHight:function(){this.morph({height:0,opacity:0})
},hasProperty:function(a){return this.getProperty(a)?true:false},toggleDisplay:function(){if(this.getStyle("display")=="none"){this.show()}else{this.hide()}},PlayPicture:function(a,g,h,e){var c={},b=this.getElement(".selected"),i=this,d=this.getElements(".selected");if($defined(a)&&this.retrieve(a)==null){var f=new Element("img",{src:gewara.util.cdnPath+"css/images/loading3.gif",styles:{top:"46%",left:"46%"}}).inject(this);c.img=Asset.image(a,{styles:{opacity:0},onLoad:function(){if(this.width>g||this.height>h){rateWidth=this.width/g;rateHeight=this.height/h;if(rateWidth>rateHeight){c.width=g;c.height=this.height/rateWidth}else{c.width=this.width/rateHeight;c.height=h}}else{c.width=this.width;c.height=this.height}c.left=(g-c.width)/2;c.top=(h-c.height)/2;if(b!=null&&b!=this){if(gewa.util.container.pic){gewa.util.container.pic.dispose("pic")}d.removeClass("selected");b.morph({height:0,width:0,opacity:0,left:b.width/2,top:b.height/2})}f.dispose();this.setStyles({height:0,width:0,left:c.width/2,top:c.height/2});
this.addClass("selected").morph({height:c.height,opacity:1,width:c.width,left:0,top:0});i.morph({height:c.height,width:c.width,"margin-left":c.left,"margin-top":c.top});if(typeof(e)=="function"){e(true)}}}).inject(this);this.store(a,c)}else{var c=this.retrieve(a);b.morph({height:0,width:0,opacity:0,left:b.width/2,top:b.height/2});if(c!=null&&$defined(a)){if(gewa.util.container.pic){gewa.util.container.pic.dispose("pic")}d.removeClass("selected");c.img.addClass("selected").morph({height:c.height,opacity:1,width:c.width,left:0,top:0});i.morph({height:c.height,width:c.width,"margin-left":c.left,"margin-top":c.top})}else{if(!gewa.util.container.pic){gewa.util.maskContent(i,"没有图片了...","",220,"pic")}}if(typeof(e)=="function"){e(true)}}},hover:function(c,e,a,f,g,b){if(!$(c)){return null}c=$(c);if(c.retrieve("hover")==null){var d=new HoverGroup({elements:[this,c],delay:$defined(g)?g:300,onEnter:function(){if(a&&typeof a=="function"){a()}c.definedHight(e);if(b&&typeof b=="function"){b()}},onLeave:function(){c.zeroHight();
if(f&&typeof f=="function"){f()}}});c.store("hover",d);this.store("hover",d)}},mousehover:function(b,a){return this.addEvents({mouseenter:function(c){b.attempt(c,this)},mouseleave:function(c){a.attempt(c,this)}})},toPos:function(c,b,a,d){a=$defined(a)?a:0;d=$defined(d)?d:10;this.position({relativeTo:c,position:b,offset:{x:a,y:d}})},autoTips:function(a){a=a||{};if(document.body.retrieve("autotips")==null){var b={};b.child={};b.child.width=a.width;b.ispoint=a.ispoint||false;b.child.height=window.getSize().y;b.o=this.getPosition();b.point="upperRight";a.border=a.border||"#cdcdcd";b.inject=new Element("div",{styles:{width:b.child.width,height:b.child.height,position:"fixed",bottom:0,left:0,opacity:0,overflow:"hidden",background:a.bgColor,"z-index":100,"border-left":"1px solid "+a.border}}).inject(document.body);b.html=new Element("div",{styles:{width:b.child.width-1,height:"100%",overflow:"hidden","border-left":"1px solid #ffffff"}}).inject(b.inject);if(!b.ispoint){b.pl=new Element("div",{styles:{width:"16px",height:a.ch||"22px","border-width":"1px 0","border-style":"solid","border-color":a.plborder||a.border,position:"absolute","z-index":a.plIndex||101,display:"none",background:a.plBgcolor||a.bgColor}}).inject(document.body)
}window.addEvents({scroll:function(){var c=document.getScroll().y,d=window.getSize().y;if(!window.XMLHttpRequest){b.inject.setStyles({top:c,position:"absolute"})}},resize:function(){b.child.height=window.getSize().y;b.inject.setStyle("height",window.getSize().y)}});b.property={};b.property.content=function(d,c,e){b.html.innerHTML=$(d)?$(d).innerHTML:d;b.property.go(c);if(e&&typeof e=="function"){e()}};b.pos=b.inject.getPosition();b.isAttach=false;b.property.go=function(d){a.el=d;var c=!b.ispoint?10:0;b.inject.setStyle("left",d.getPosition().x+d.getDimensions().x+c);if(!b.ispoint){b.pl.position({relativeTo:d,position:b.point,offset:{x:-5,y:0}})}};b.isHide=function(){return b.isAttach};b.inject.addEvents({mouseenter:function(){b.isAttach=true;if(a.clazz&&a.el){a.el.addClass(a.clazz)}},mouseleave:function(){b.isAttach=false;b.hide.delay(120,[a.clazz])}});b.show=function(){b.inject.morph({width:b.child.width,opacity:1,onComplete:function(){b.isAttach=true;if(document.getElements("select").length>0&&!window.XMLHttpRequest){document.getElements("select").hide()
}if(!b.ispoint){b.pl.show()}if(a.clazz&&a.el){a.el.addClass(a.clazz)}}.bind(b.inject)})};b.hide=function(){if(!b.isAttach){if(!b.ispoint){b.pl.hide()}b.inject.morph({width:0,opacity:0,onComplete:function(){b.isAttach=false;if(document.getElements("select").length>0&&!window.XMLHttpRequest){document.getElements("select").show()}if(a.clazz&&a.el){a.el.removeClass(a.clazz)}}.bind(b.inject)})}};document.body.store("autotips",b);return b}else{return document.body.retrieve("autotips")}}});var Widget=new Class({Implements:[Class.Occlude],initialize:function(a){if(this.occlude("widget",a)){return this.occluded}}});var Collapsable=new Class({Extends:Fx.Reveal,initialize:function(b,e,d,a,c){this.clicker=$(b);this.section=$(e);this.f=a;this.parent(c);this.obj=d;this.addEvents()},addEvents:function(){this.clicker.addEvent("click",function(b){var a=$(b)?$(b):$(b.target);if(!a.hasClass("AC")){a=a.getParent(".AC")}if($defined(this.obj)&&this.obj!=null){checkLogin(true,function(){var c=this.obj.elements.indexOf(a);
this.obj.options.count=c;this.element=this.obj.loadElements[c];this.obj.replay();if(a.retrieve(a.get("lang"))==null){this.obj.getReplay(a,this.obj.loadElements[c].getElement("ul").getNext("._replayList"),a.get("id"))}if(typeof(this.f)=="function"){this.f()}this.toggle()}.bind(this))}else{this.element=this.section;if(typeof(this.f)=="function"){this.f()}this.toggle()}}.bind(this))}});var modifyDefiend=new Class({Extends:Fx.Reveal,initialize:function(a,b){this.selectSwitchDis=$$("select"+a);this.radioSwitchDis=$$("input"+a);this.parent(this.section,b);if(this.options.address&&$(this.options.address)){this.address=$(this.options.address)}this.elementTo=$(this.options.to);this.cookieCitycode=this.options.cookieCitycode;this.select();this.radio()},addEvents:function(b,a){if(b.get("lang")==null||b.get("lang")==""){if(this.elementTo.getElement("div")){this.elementTo.getElement("div").show()}this.elementTo.getElement('input[type="radio"]').checked=true;if($defined(this.dialog)&&this.dialog!=null){this.hide();
this.clearChoice()}}else{this.elementPlugs(b);this.element=this.dialog;gewa.util.mask({element:this.elementTo,title:"正在加载,请稍候..."});this.selection(b,a);this.update(b.get("lang"),function(){this.loadElement.getElements("input[type='text']").each(function(e){if(!$("myScript"+e.get("name"))){var c=this,d=new Date();new Asset.javascript(gewara.util.basePath+"activity/getConst.xhtml?citycode="+this.cookieCitycode+"&tag="+b.get("lang")+"&v="+d.getMilliseconds(),{id:"myScript"+e.get("name"),onLoad:function(){c.autoChoice(b,e)}})}else{this.autoChoice(b,e)}}.bind(this))}.bind(this));this.reveal()}if(this.choice&&this.elementTo){this.choice.store("relatedid",null);this.choice.store("categoryid",null);this.elementTo.store("relatedid",null);this.elementTo.store("categoryid",null)}OverText.update()},autoChoice:function(filter,item){var tokens=eval(filter.get("lang")+item.get("lang"));new Autocompleter.Local(item,tokens,{delay:100,maxChoices:10,ipt:item,relatedFun:this.objectRelated.bind(this),filter:function(){var values=this.queryValue.split(/ +/);
return this.tokens.filter(function(token){var result=values.every(function(v){var reg=new RegExp(v.escapeRegExp(),"i");return reg.test(token.skey)});return result})},injectChoice:function(choice){modifyPlug(this,choice,item.get("name"),item.get("lang"))},addChoiceEvents:function(el){return el.addEvents({mouseover:this.choiceOver.bind(this,[el]),click:this.choiceSelect.bind(this,[el])})}})},selection:function(b,a){this.elementTo.getElement("div").hide();this.clearChoice();this.elementTo.getElements('input[type="radio"]').each(function(c){this.showChoice.show();if(c.value.trim()==b.get("lang").trim()){c.checked=true;new Element("span",{text:"请选择关联的"+c.get("title"),styles:{"padding-right":"8px",cursor:"pointer"}}).inject(new Element("span").addClass("releBt releHover").addEvent("click",function(){this.addEvents(c,false);this.dialog.show()}.bind(this)).inject(this.showChoice));if(!a){new Element("img",{src:gewara.util.cdnPath+"css/images/blank.gif"}).addEvent("click",function(){this.elementTo.getElement('input[type="radio"]').checked=true;
this.elementTo.getElement("div").show();this.dialog.hide();this.clearChoice();if(this.address){this.address.value="";this.address.fireEvent("blur",[this.address])}c.checked="";OverText.update()}.bind(this)).inject(new Element("span",{text:c.getParent().get("text")}).inject(new Element("span",{"class":"releBt releHover"}).inject(this.showChoice,"top")))}GewaraUtil.unmask()}else{c.checked=""}}.bind(this));OverText.update()},create:function(b){this.dialog=new Element("div",{"class":"plugpanel",styles:{width:"600px",display:"none",visibility:"visible"}}).inject(document.body);this.inner=new Element("div",{"class":"inner"}).inject(this.dialog);new Element("img",{src:gewara.util.cdnPath+"css/home/min_pt.gif",styles:{position:"absolute",top:"-5px",left:"20px"}}).inject(this.inner);this.close=new Element("span",{"class":"more",styles:{background:"url("+gewara.util.cdnPath+"css/home/del.gif) no-repeat",width:"10px",height:"10px",display:"inline-block",top:"10px",cursor:"pointer"}}).addEvent("click",function(){this.dialog.hide();
this.choice.empty();if(Browser.ie6){document.getElements("select").fade(1)}}.bind(this)).inject(this.inner);this.loadElement=new Element("div").inject(this.inner);new Element("span",{"class":"gr-r"}).inject(new Element("span",{"class":"gr-l"}).inject(new Element("div",{"class":"line mt10"}).inject(this.inner)),"after");this.choice=new Element("dd").inject(new Element("dl",{"class":"ui_80 clear relePlugs mt10"}).inject(this.inner));new Element("b",{text:"你已选择"}).inject(new Element("dt").inject(this.choice,"before"));this.footer=new Element("div",{"class":"plugFooter mt10"}).inject(this.inner);this.sure=new Element("label",{"class":"button redBt minBt ml20"}).addEvents({mouseenter:function(){this.addClass("hover")},mouseleave:function(){this.removeClass("hover")},click:function(){this.confirmChoice("relatedid","categoryid")}.bind(this)}).inject(this.footer);new Element("input",{type:"button",value:"确认，添加"}).inject(this.sure);this.cancel=new Element("label",{"class":"button whiteBt minBt ml10"}).addEvents({mouseenter:function(){this.addClass("hover")
},mouseleave:function(){this.removeClass("hover")},click:function(){this.choice.empty();this.dialog.hide();if(Browser.ie6){document.getElements("select").fade(1)}}.bind(this)}).inject(this.footer);new Element("input",{type:"button",value:"取消"}).inject(this.cancel);this.dialog.toPos(this.elementTo,"bottomLeft",0,0);var a={dialog:this.dialog,close:this.close,loadEm:this.loadElement,choice:this.choice,sure:this.sure,cancel:this.cancel};this.dialog.store(b.get("lang"),a)},elementPlugs:function(a){if(!$defined(this.dialog)&&this.dialog==null){this.create(a)}else{if(this.dialog.retrieve(a.get("lang"))!=null){var b=this.dialog.retrieve(a.get("lang"));this.dialog=b.dialog;this.close=b.close.addEvent("click",function(){this.dialog.hide()}.bind(this));this.loadElement=b.loadEm;this.choice=b.choice;this.sure=b.sure.addEvent("click",function(){this.confirmChoice("relatedid","categoryid")}.bind(this));this.cancel=this.cancel.addEvent("click",function(){this.dialog.hide()}.bind(this))}else{this.create(a)
}}},select:function(){this.selectSwitchDis.addEvent("change",function(a){if(this.dialog){this.dialog.hide()}this.addEvents($(a.target).getElements("option").filter(function(b){return b.get("selected")})[0],true)}.bind(this))},radio:function(){this.radioSwitchDis.addEvent("click",function(a){if($(a.target).checked=true){this.addEvents($(a.target),false)}}.bind(this))},clearChoice:function(){if(this.elementTo.getElements("div.relePlugs").length>0){this.showChoice=this.elementTo.getElement("div.relePlugs");this.showChoice.hide().empty()}else{this.showChoice=new Element("div",{"class":"relePlugs clear"}).inject(this.elementTo,"bottom")}if(Browser.ie6){document.getElements("select").fade(0)}},update:function(d,c){var b=gewara.util.basePath+"ajaxLoadUserFav.xhtml";var a={tag:d,citycode:this.cookieCitycode};if(this.loadElement.retrieve(d)==null){GewaraUtil.sendLoad(this.loadElement,b,a,function(){c();this.loadElement.store(d,this.loadElement.get("html"));this.switchobject();gewaUtil.textOver(".text")
}.bind(this))}else{this.loadElement.innerHTML=this.loadElement.retrieve(d);c();this.switchobject();gewaUtil.textOver(".text")}},switchobject:function(){var a=this;this.loadElement.getElements("a").addEvent("click",function(b){b.preventDefault();var c={rel:this.get("rel"),id:this.get("id"),name:this.get("name"),text:this.get("text"),address:this.get("config")?this.get("config"):""};a.objectRelated(c)})},objectRelated:function(c,f,b){if(!this.choice){return}var i=this;if(this.choice.retrieve(c.rel)==null){var h=new Element("span").addClass("releBt releHover _plugC").inject(f?this.showChoice:this.choice);if(i.address&&c.address!=""&&c.address!=null){i.address.value=c.address;i.address.fireEvent("focus",[i.address])}var a=new Element("input",{type:"hidden",name:c.rel,value:c.id}).inject(new Element("img",{src:gewara.util.cdnPath+"css/images/blank.gif"}).addEvent("click",function(){if(i.address&&c.rel=="relatedid"){i.address.value="";i.address.fireEvent("blur",[i.address])}i.choice.store(c.rel,null);
i.elementTo.store(c.rel,null);if(b==""&&i.showChoice.getElements("._plugC").length<2){i.elementTo.getElement('input[type="radio"]').checked=true;i.elementTo.getElement("div").show();i.dialog.hide();OverText.update();i.clearChoice()}this.getParent(".releBt").dispose();if(i.elementTo.retrieve("relatedid")==null&&i.elementTo.retrieve("categoryid")==null){i.showChoice.getLast().show()}}).inject(new Element("span",{text:c.text}).inject(h)),"before");if(c.rel=="categoryid"){new Element("input",{type:"hidden",name:"category",value:c.name}).inject(a,"before")}i.choice.store(c.rel,h);if(f){i.elementTo.getElement(".releBt").hide();i.elementTo.store(c.rel,h)}}else{var g=i.choice.retrieve(c.rel).getElement("span"),e=g.getElements("input"),d=e.getNext();g.set("text",c.text);e.each(function(j){if(j.name=="category"){j.value=c.name}else{if(j.name=="categoryid"){j.value=c.id}else{j.value=c.id}}j.inject(g)});d.inject(g)}},confirmChoice:function(b,a){var d=$("plugChoose"),c=$("plug_show");this.elementTo.store(b,this.choice.retrieve(b));
this.elementTo.store(a,this.choice.retrieve(a));if(this.choice){this.choice.getElements("._plugC").inject(this.showChoice.getElement(".releBt"),"after")}if(this.elementTo.retrieve(b)==null&&this.elementTo.retrieve(a)==null){this.showChoice.getLast().show()}else{this.showChoice.getLast().hide()}this.dialog.hide();if(Browser.ie6){document.getElements("select").fade(1)}},reset:function(a){if(a.lang!=""){this.selection(a,true);this.create(a)}var b={rel:a.rel,id:a.id,name:a.name,text:a.text,address:a.get("config")};this.objectRelated(b,true,a.lang)}});gewa.util.removeBodyClick=function(b,a,c){b=$(b);document.addEvent("click",function(f){var d=$(f.target);if(d!=b&&!b.contains(d)&&d!=a&&!a.contains(d)){document.removeEvent("click",arguments.callee);b.hide();if(c){c()}}})};(function(){var b=function(e,c,d,h){var f=e[c];var g=[];while(f){if(f.nodeType==1){if(!d||Element.match(f,d)){break}else{g.push(f)}}f=f[c]}return new Elements(g,{ddup:false,cash:!h})};var a=function(e,c,f){var d=0;var g=[];while(d<f){g.push(e.getElements(c)[d]);
d++}return new Elements(g,{ddup:false})};Element.implement({getAllPreviousUntil:function(c,d){return b(this,"previousSibling",c,d)},getAllNextUntil:function(c,d){return b(this,"nextSibling",c,d)},getParentsUntil:function(c,d){return b(this,"parentNode",c,d)},getElementsByCount:function(c,d){return a(this,c,d)}})})();Fx.implement({initStyles:function(){this.init={};$A(arguments).each(function(b){if(b=="opacity"){this.init.opacity=this.element.get("opacity")}else{(this.element.getStyle(b).test("px"))?this.init[b]=this.element.getStyle(b).toInt():this.init[b]=this.element.getStyle(b)}},this);return this},removeAuto:function(){if(!this.init){this.init={}}$A(arguments).each(function(b){if(this.element.getStyle(b)=="auto"){this.element.setStyle(b,"0px");this.init[b]=0}},this);return this},setPosition:function(){if(this.element.getStyle("position")=="static"){this.element.setStyle("position","relative")}return this}});Fx.Toggle=new Class({Extends:Fx.Tween,initialize:function(b,a){this.parent(b,a);
this.initStyles("height","width","opacity");this.element.setStyle("overflow","hidden")},toggleHeight:function(d,c){var b=this.element.getChildren().getDimensions(),a=this.init.height;d=d||0;if(a==d&&b.length>0){b.each(function(e){a=e.y+a})}a=a=="auto"?d:a;(this.element.getStyle("height").toInt()>d)?this.start("height",d):this.start("height",a);if(c&&typeof(c)=="function"){c()}return this},toggleHeightValue:function(a){a=a||0;this.start("height",a);return this},toggleWidth:function(){(this.element.getStyle("width").toInt()>0)?this.start("width",0):this.start("width",this.init.width);return this},toggleOpacity:function(){(this.element.getStyle("opacity").toInt()>0)?this.start("opacity",0):this.start("opacity",this.init.opacity);return this},toggleDisplay:function(){this.toggleProperty("display","none","block");return this},toggleVisibility:function(){this.toggleProperty("visibility","hidden","visible");return this},toggleStyle:function(){},toggleProperty:function(b,d,c,a){if($string(d)&&$string(c)){if(!a){(this.element.getStyle(b)==d.toLowerCase())?this.element.setStyle(b,c):this.element.setStyle(b,d)
}else{(this.element.getStyle(b)==d.toLowerCase())?this.start(b,c):this.start(b,d)}}else{if($int(d)&&$int(c)){if(!a){(this.element.getStyle(b).toInt()==d)?this.set(b,c):this.set(b,d)}else{(this.element.getStyle(b).toInt()==d)?this.start(b,c):this.start(b,d)}}}return this},toggle:function(a){switch(a){case"height":this.toggleHeight();break;case"width":this.toggleWidth();break;case"opacity":this.toggleOpacity();break;case"display":this.toggleDisplay();break;case"visibility":this.toggleVisibility();break}return this}});Fx.Grow=new Class({Extends:Fx.Morph,initialize:function(c,b,a){this.parent(c,b);this.values=a||{height:200,width:200,fontsize:10};this.element.setStyle("overflow","hidden")},start:function(b){var b=b||this.values,a=this.element.getDimensions().x,c=this.element.getDimensions().y;this.parent({top:(c>0)?[(this.element.getParent().clientHeight-this.values.height)/2,this.values.height/2]:[this.values.height/2,(this.element.getParent().clientHeight-this.values.height)/2],left:(a>0)?[(this.element.getParent().clientWidth-this.values.width)/2,this.element.getParent().clientWidth-this.values.width/2]:[this.values.width/2,(this.element.getParent().clientWidth-this.values.width)/2],height:(c>0)?[this.values.height,0]:[0,this.values.height],width:(a>0)?[this.values.width,0]:[0,this.values.width],opacity:(c>0&&a>0)?[1,0]:[0,1]})
}});gewa.util.pagePos=function(b){var a;if(b){a=$(b)}else{var c=gewa.util.getRequestParams("topos");a=$(c.trim())}if(a){$(window).scrollTo(0,a.getPosition().y)}};gewa.util.getRequestParams=function(b,e){var a=window.location.search||e;if(a&&a.indexOf(b)>0){var c=new RegExp("(^|&)"+b+"=([^&]*)(&|$)","i"),d=a.substr(1).match(c);return(d!=null)?d[2]:""}else{return""}};gewa.util.getUrlParams=function(c){var b=window.location.search||c;if(b){array=b.substr(1).split("&");var a={};if(array){array.each(function(e){keyValue=e.split("=");var d=keyValue[0];if($chk(d)){a[d]=keyValue[1]?keyValue[1]:""}})}return a}else{return{}}};gewa.util.setInterval=function(){};var Icon=new Class({Implements:[Options,Events],options:{unit:["32","20"],dir:{xg:"格小拉",jd:"经典"},icon:new Object(),path:GewaraUtil.cdnPath+"img/minFace/",isLoad:[0,0]},initialize:function(a){this.setOptions(a);this.getIconTitle()},getIconTitle:function(){this.options.icon=[{"01":"点头","02":"发飙","03":"发呆","04":"呵呵","05":"黑线","06":"贱贱","07":"惊讶","08":"可怜","09":"哭","010":"酷","011":"狂汗","012":"喷","013":"期待","014":"亲亲","015":"色眯眯","016":"微笑","017":"笑","018":"笑cry","019":"疑问","020":"晕"},{"01":"害羞","02":"可爱","03":"呵呵","04":"花心","05":"嘻嘻","06":"亲亲","07":"噢耶","08":"懒得理你","09":"抱抱","010":"鄙视","011":"汗","012":"晕","013":"泪","014":"悲伤","015":"闭嘴","016":"吃惊","017":"酷","018":"哈哈","019":"困","020":"花","021":"伤心","022":"邮件","023":"电话","024":"干杯","025":"调谢","026":"握手","027":"good","028":"唱歌","029":"得意","030":"疑问","031":"便便","032":"呆","033":"河蟹","034":"囧","035":"咖啡","036":"礼花","037":"礼物","038":"篮球","039":"骷髅","040":"闪电","041":"弱","042":"怒","043":"衰","044":"失望","045":"生病","046":"睡觉","047":"太阳","048":"下雨","049":"心","050":"星","051":"药","052":"月亮","053":"钟","054":"抓狂","055":"足球"}]
},innerHTML:function(h,a){h=$(h);a=$(a);var d="",g="",e="";Object.each(this.options.dir,function(j,i){g+=this.replaceTabs(i,j)}.bind(this));var c=new Element("div",{html:d,"class":"dalogIcon uidialog clear",id:"uidialog"});var f=new Element("ul",{"class":"dalogIconTags clear",html:g,id:"dalogIconTags"}).inject(c);for(var b=0;b<Object.getLength(this.options.dir);b++){if(b==0){e+="<div class='dalogIconBox clear'></div>"}else{e+="<div class='dalogIconBox none clear'></div>"}}new Element("div",{html:e,"class":"dalogIconConts clear",id:"dalogIconConts"}).inject(f,"after");gewa.util.tips(h,c,422,"icon","",function(){var j=this;var i=f.getElements("a");i.each(function(l,k){l.addEvent("click",function(){if(j.options.isLoad[k]===0){j.loadImg(k,a)}$("uidialog").getElements(".dalogIconBox").addClass("none");$("uidialog").getElements(".dalogIconBox")[k].removeClass("none")})});i.addEvent("click",function(){i.each(function(k){k.getParent("li").removeClass("select")});this.getParent("li").addClass("select")
});document.addEvent("click",function(m){var l=$(m.target),k=gewa.util.container.icon;if(l!=k.coreDialog&&!k.coreDialog.contains(l)&&l!=h&&!h.contains(l)){document.removeEvent("click",arguments.callee);k.dispose(["icon"],true)}})}.bind(this),"","0");this.loadImg(0,a)},replaceTabs:function(a,b){return"<li class='$2'><a href='javascript:void(0);'>$1</a></li>".replace(/\$1|\$2/g,function(c){if(c=="$2"){if(a=="xg"){return c="select"}else{return c=""}}return c=b}.bind(this))},loadImg:function(b,a){var d=$("uidialog").getElements(".dalogIconBox")[b];var c="";Object.each(this.options.icon[b],function(f,e){c+=this.replaceHTML(e,f,b)}.bind(this));d.innerHTML=c;this.bindEvent(a);this.options.isLoad[b]=1},replaceHTML:function(b,c,a){return"<a href='' rel='[$3]'><img src='$1' width='$4' height='$4' title='$2'/></a>".replace(/\$1|\$2|\$3|\$4/g,function(d){if(d=="$1"){return d=this.options.path+Object.keys(this.options.dir)[a]+"/"+b+".gif"}else{if(d=="$3"){return d=Object.keys(this.options.dir)[a]+b}else{if(d=="$4"){return d=this.options.unit[a]
}else{return d=c}}}}.bind(this))},bindEvent:function(a){$("dalogIconConts").getElements("a").each(function(c){if(c.hasEvent("click")){return}c.addEvent("click",function(b){b.preventDefault();try{a.focus();if(a.hasEvent("focus")&&Browser.ie){a.fireEvent("focus")}a.value+=this.get("rel")}catch(b){}})})}});var IconOld=new Class({Implements:[Options,Events],options:{icon:new Object(),path:GewaraUtil.cdnPath+"/img/minFace/"},initialize:function(a){this.setOptions(a);this.getIconTitle()},getIconTitle:function(){this.options.icon={"01":"害羞","02":"可爱","03":"呵呵","04":"花心","05":"嘻嘻","06":"亲亲","07":"噢耶","08":"懒得理你","09":"抱抱","010":"鄙视","011":"汗","012":"晕","013":"泪","014":"悲伤","015":"闭嘴","016":"吃惊","017":"酷","018":"哈哈","019":"困","020":"花","021":"伤心","022":"邮件","023":"电话","024":"干杯","025":"调谢","026":"握手","027":"good","028":"唱歌","029":"得意","030":"疑问","031":"便便","032":"呆","033":"河蟹","034":"囧","035":"咖啡","036":"礼花","037":"礼物","038":"篮球","039":"骷髅","040":"闪电","041":"弱","042":"怒","043":"衰","044":"失望","045":"生病","046":"睡觉","047":"太阳","048":"下雨","049":"心","050":"星","051":"药","052":"月亮","053":"钟","054":"抓狂","055":"足球"}
},innerHTML:function(d,a){d=$(d);a=$(a);var c="";Object.each(this.options.icon,function(f,e){c+=this.replaceHTML(e,f)}.bind(this));var b=new Element("div",{html:c,"class":"dalogIcon uidialog clear",id:"uidialog"});gewa.util.tips(d,b,396,"icon","",function(){b.getElements("a").addEvent("click",function(f){f.preventDefault();try{a.focus();if(a.hasEvent("focus")&&Browser.ie){a.fireEvent("focus")}a.insertAtCursor(this.get("rel"))}catch(f){}});document.addEvent("click",function(h){var g=$(h.target),f=gewa.util.container.icon;if(g!=f.coreDialog&&!f.coreDialog.contains(g)&&g!=d&&!d.contains(g)){document.removeEvent("click",arguments.callee);f.dispose(["icon"],true)}})},"","0")},replaceHTML:function(a,b){return"<a href='' rel='[$3]'><img src='$1' width='20' height='20' title='$2'/></a>".replace(/\$1|\$2|\$3/g,function(c){if(c=="$1"){return c=this.options.path+a+".gif"}else{if(c=="$3"){return c=a}else{return c=b}}}.bind(this))}});gewa.util.makeRelation=function(b,a){checkLogin(true,function(){a=$(a);
GewaraUtil.sendRequest(GewaraUtil.basePath+"micro/addMicroAttention.xhtml",{memberid:b},function(d){if(d.success){a.hide();var c=new Element("span",{text:"|",styles:{background:"#EFEFEF",border:"1px solid #cccccc",display:"inline-block",height:"22px","line-height":"22px",padding:"0 8px","float":"left"}}).inject(a,"before");new Element("span",{text:"取消",styles:{color:"#C03B0C","margin-left":"5px",cursor:"pointer"}}).addEvent("click",function(){gewaUtil.cancelRelation(b,this.getParent(),a)}).inject(c);new Element("span",{text:"已关注",styles:{color:"#666666","margin-right":"5px"}}).inject(c,"top")}else{gewaUtil.alert(d.msg)}})})};gewa.util.cancelRelation=function(c,a,b){checkLogin(true,function(){if($(a)){a=$(a)}GewaraUtil.sendRequest(GewaraUtil.basePath+"micro/cancelAttention.xhtml",{memberid:c},function(d){if(d.success){gewaUtil.alert("取消成功！",function(){if($(a)){a.dispose()}if($(b)){$(b).show();$(b).removeClass("none")}})}else{gewaUtil.alert(d.msg)}},"get")})};gewa.util.dialogSingleUpdate=function(c,a,b){c={id:$(c)};
if(c.id.retrieve("iframe")==null){c.html=new Element("div",{styles:{display:"none"}}).inject(document.body);new Element("iframe",{src:"blank.html",name:"iframe_async_upload",id:"iframe_async_upload",styles:{display:"none"}}).inject(c.html);c.form=new Element("form",{action:GewaraUtil.basePath+"common/uploadPicture.xhtml",method:"post",target:"iframe_async_upload"}).inject(c.html);if(Browser.ie6||Browser.ie7){c.form.setAttribute("encoding","multipart/form-data")}else{c.form.setAttribute("enctype","multipart/form-data")}new Element("input",{type:"hidden",name:"callback",value:b}).inject(c.form);new Element("input",{type:"hidden",name:"callbackUrl",value:GewaraUtil.basePath+"common/afterUploadPicture.xhtml?uploadtag=micro&callbackf=gewa.util.updateCallback"}).inject(c.form);c.t=new Element("div",{text:"支持上传 .gif .jpg .png 格式图片，最大不超过2M。",styles:{width:"100%",height:"22px",overflow:"hidden","text-indent":"10px",color:"#999"}}).inject(c.form);c.pic=new Element("div",{id:"async_upload",styles:{width:"290px",height:"120px",overflow:"hidden",position:"relative","margin-top":"10px"}}).inject(c.form);
c.tl=new Element("div",{id:"async_upload_file",styles:{width:"76px",height:"24px",overflow:"hidden",position:"absolute",left:"95px",top:"49px"}}).inject(c.pic);c.input=new Element("input",{type:"file",name:"headlogo",id:"file_async_upload",styles:{background:"transparent",outline:"none","hide-focus":"expression(this.hideFocus=true)",opacity:0,position:"absolute","z-index":2,left:"-60px",width:150,top:"-2px","font-size":"20px",visibility:"visible",cursor:"pointer"}}).addEvent("change",function(){checkLogin(true,function(){c.form.submit()})}).inject(c.tl);new Element("span",{text:"上传图片"}).inject(new Element("a",{"for":"file_async_upload","class":"button minBt redBt",href:"javascript:void(0);"}).addEvent("click",function(){c.input.fireEvent("focus")}).inject(c.tl),"top");c.id.store("iframe",c.html)}else{c.html=c.id.retrieve("iframe")}gewa.util.tips(c.id,c.html,340,"dailogpic","",function(){document.addEvent("click",function(g){var f=$(g.target),d=gewa.util.container.dailogpic;if(f!=d.coreDialog&&!d.coreDialog.contains(f)&&f!=c.id&&!c.id.contains(f)){document.removeEvent("click",arguments.callee);
d.dispose(["dailogpic"],true)}})},"","0")};gewa.util.updateCallback=function(b){var a={};a.img=Asset.image(GewaraUtil.cdnPath+b.picpath,{onLoad:function(){if(this.width>290||this.height>120){rateWidth=this.width/290;rateHeight=this.height/120;if(rateWidth>rateHeight){this.width=290;this.height=this.height/rateWidth}else{this.width=this.width/rateHeight;this.height=120}this.setStyles({"margin-left":(290-this.width)/2,"margin-top":(120-this.height)/2})}}}).inject("async_upload");$("async_upload_file").hide();a.input=new Element("input",{type:"hidden",name:"bodypic",id:"bodypic",value:b.picpath}).inject(b.callback,"before");$(b.callback).value=$(b.callback).value+"分享图片";if($("wala_defV")){$("wala_defV").hide()}new Element("span",{text:"删除图片",styles:{display:"inline-block",background:"#fff","border-radius":"3px",height:"20px","line-height":"20px",padding:"0 6px",cursor:"pointer",color:"#DD9966",border:"1px solid #ddd",position:"absolute","*line-height":"21px",left:115,top:49,"z-index":1}}).addEvent("click",function(){GewaraUtil.sendRequest(GewaraUtil.basePath+"micro/delMicroBlogPic.xhtml",{picpath:b.picpath},function(c){this.dispose();
a.img.dispose();a.input.dispose();$("async_upload_file").show()}.bind(this))}).inject("async_upload")};gewa.util.replay=new Class({Implements:[Options,Events],options:{},initialize:function(a){this.setOptions(a)},createMessageDialog:function(i){if(i.id.contains("img")){i.id=i.id.substring(3);c="回复";var e=this}else{var e=this,b=(i._this.get("lang")=="f")?true:false,c=b?"转发":"回复"}if(i.element.retrieve("dom")==null){var a=new Element("dl",{"class":"isFirstNode"}).inject(i.element,"top");new Element("img",{"class":"picmin",src:(GewaraUtil.cdnPath+(GewaraUtil.member.headUrl!=""?GewaraUtil.member.headUrl:"cw30h30/img/default_head.png")),width:30,height:30}).inject(new Element("span",{"class":"picmin"})).inject(new Element("dt").inject(a));var g=new Element("dd").inject(a);i.atmemberid=new Element("input",{type:"hidden",name:"atmemberid"}).inject(g,"top");i.replyid=new Element("input",{type:"hidden",name:"replyid"}).inject(g,"top");var h=new Date().getTime()+i.id;i.replayBt=new Element("button",{html:c,"class":"button"}).addEvent("click",function(){if(i.textarea.value.trim()==""){i.textarea.highlight("#ffcc99","#fff")
}else{e.datas=this.getParent("dd").toQueryString().parseQueryString();e.datas.commentid=i.id;e.criteDom=new Element("div").hide().inject(a,"after");checkLogin(true,function(){GewaraUtil.sendLoad(e.criteDom,GewaraUtil.basePath+"activity/ajax/sns/oldReplyComment.xhtml",e.datas,function(j){if(j.success){i.textarea.value="";e.criteDom.reveal()}else{gewaUtil.alert(j.json.msg)}})})}}).inject(g);var f=new Element("div",{"class":"review"}).inject(g);new Element("input",{type:"checkbox",checked:b?"checked":"",name:"isMicro",id:h,styles:{"margin-right":"3px"}}).addEvent("click",function(){if(b){this.checked=b}}).inject(new Element("label",{html:"转发到我的哇啦","class":"left ui_wala_rzf","for":h}).inject(f),"top");var d=new Element("b",{html:140,styles:{"float":"right","font-family":"Constantia,Georgia","font-size":"14px",color:"#CC3300","margin-right":"70px"}}).inject(f);i.textarea=new Element("textarea",{name:"body",id:"body",root:"text",alt:"请输入"+c+"内容...",styles:{color:"#666"}}).inject(g,"top");i.textarea.addEvent("focus",function(){this.addClass("onFocus")
});i.textarea.addEvent("blur",function(){this.removeClass("onFocus")});i.textarea.addEvent("keyup",function(){this.value=this.value.replace(/\n/g,"");if(this.value.length>0){i.replayBt.addClass("onButton")}else{i.replayBt.removeClass("onButton")}if(140-this.value.length>=0){e.values=this.value;d.innerHTML=140-this.value.length;this.setStyle("height",this.getScrollSize().y)}else{this.value=e.values;d.innerHTML=0;this.highlight("#ffcc99","#fff")}}).inject(g,"top");if(i._this.hasProperty("form")){i.textarea.set("value",(i._this.hasProperty("form"))?i._this.get("form"):"");if(i._this.hasProperty("data-atmid")){i.atmemberid.set("value",i._this.get("data-atmid"))}if(i._this.hasProperty("data-replyid")){i.replyid.set("value",i._this.get("data-replyid"))}}new Element("em",{"class":"dmore"}).inject(new Element("span",{"class":"iserm",text:"表情"}).addEvent("click",function(){i.icon.innerHTML(this,i.textarea)}).inject(f,"top"));if(typeof i.callback=="function"){i.callback.run()}i.element.store("dom",a)
}else{i.node=i.element.retrieve("dom");i.button=i.node.getElement("button");i.textArea=i.node.getElement("textArea");i.checkbox=i.node.getElement("input[type=checkbox]");i.atmemberid=i.node.getElement("input[name=atmemberid]");i.replyid=i.node.getElement("input[name=replyid]");i.checkbox.removeEvents("click");i.button.checked="";i.button.set("text","回复");i.checkbox.checked="";if(i._this.hasProperty("form")){i.textArea.value=i._this.get("form");if(i._this.hasProperty("data-atmid")){i.atmemberid.value=i._this.get("data-atmid")}if(i._this.hasProperty("data-replyid")){i.replyid.value=i._this.get("data-replyid")}}else{i.textArea.set("alt","请输入回复的内容...")}if(typeof i.callback=="function"){i.callback.run()}}}});function logout(){var a=GewaraUtil.basePath+"cas/logout.xhtml?ptn=smp";new Request({url:a,method:"get",onComplete:function(){gewaUtil.alert("成功退出！",refreshPage)}}).send()}gewa.util.messageInit=function(){var a={};a.tgs=document.getElements("*[lang=r],*[lang=f]");if(a.tgs.length>0){if(!$("walasCss")){Asset.css(GewaraUtil.cdnPath+"css/readwala.css",{id:"walasCss"})
}a.replay=new gewa.util.replay();a.icon=new Icon();a.tgs.addEvent("click",function(b){b.preventDefault();a.url=this.get("rel");a.element=this.getParent("*[data=isvalid] div[root=replay]");a.id=this.id;a._this=this;a.replay.createMessageDialog(a)})}};var RatingGroup=new Class({initialize:function(d,f,a,e,b,h){this.groupId=d;this.itemList=$(d).getElements("li");this.rating=f.toInt();this.tag=a;this.relatedid=e;this.desc=$(this.groupId+"Desc");this.group_id=$(this.groupId+"Point");this.marks=$defined(b)&&typeof(b)=="object"?b:false;this.callback=h||"";var c=1;var g=this;this.starList=[];if(this.rating==0&&this.marks){this.marks[this.groupId]=0}this.itemList.each(function(j,i){if(i%2!=0){j.set("class","no")}if(i<this.rating){if(i%2!=0){j.set("class","on")}else{j.set("class","half")}if(this.desc){this.desc.set("text",j.get("lang"))}if(this.group_id){this.group_id.set("text",j.id+".0")}if(this.marks){this.marks[this.groupId]=j.id}}this.starList[i]=j.get("class");j.addEvents({mouseover:function(){this.showStatus(j.id);
if(this.desc){this.desc.set("text",j.get("lang"))}if(this.group_id){this.group_id.set("text",j.id+".0")}}.bind(this),mouseout:function(){this.resetStatus()}.bind(this),click:function(){this.vote(j)}.bind(this)});c++}.bind(this))},resetStatus:function(){var a=1;this.itemList.each(function(c,b){if(b>=10){return}if(this.starList[b]=="on"||this.starList[b]=="half"){if(this.desc){this.desc.set("text",c.get("lang"))}if(this.group_id){this.group_id.set("text",c.id+".0")}if(b%2!=0){c.set("class","on")}else{c.set("class","half")}}else{if(c.hasClass("on")||b%2!=0){c.set("class","no")}else{c.set("class","")}}a++}.bind(this));if(!this.itemList.some(function(b){return(b.hasClass("on")||b.hasClass("half"))})){if($(this.groupId+"Desc")){$(this.groupId+"Desc").set("text","")}if(this.group_id){this.group_id.set("text","")}}},showStatus:function(b){var a=1;this.itemList.each(function(d,c){if(c>=10){return}if(a<=b){if(c%2!=0||d.hasClass("on")){d.set("class","on")}else{d.set("class","half")}}else{if(d.hasClass("on")||c%2!=0){d.set("class","no")
}else{d.set("class","")}}a++}.bind(this))},vote:function(a){checkLogin(true,function(){var d=this.groupId;var e=this;this.showStatus(a.id);if(this.marks){this.marks[this.groupId]=a.id;this.rating=a.id;this.itemList.each(function(g,f){this.starList[f]=g.get("class")}.bind(this));if(this.callback&&typeof this.callback=="function"){this.callback()}else{if(typeof(showMovieMark)=="function"&&this.groupId=="generalmark"){showMovieMark()}}}else{var c=GewaraUtil.basePath+"ma/common/addComment.xhtml",b={tag:this.tag,relatedid:this.relatedid,marks:d+"="+a.id};GewaraUtil.sendRequest(c,b,function(f){if(f.success){this.rating=a.id;this.itemList.each(function(h,g){this.starList[g]=h.get("class")}.bind(this));if(typeof(showMovieMark)=="function"&&this.groupId=="generalmark"){showMovieMark()}}else{gewaUtil.alert(f.msg)}}.bind(this))}}.bind(this))},fixStar:function(a){this.itemList.each(function(b){b.removeEvents("mouseover");b.removeEvents("mouseout");b.removeEvents("click")})}});gewa.util.deleteReComment=function(a){checkLogin(true,function(){gewaUtil.confirm("确认要删除吗?",function(){var c=GewaraUtil.basePath+"activity/ajax/sns/deleteMicroReComment.xhtml?r="+GewaraUtil.rtime();
var b={id:a};GewaraUtil.sendRequest(c,b,function(d){if(d.success){document.getElement("div[id="+a+"]").set("dissolve",{duration:"long",onComplete:function(){this.dispose()}.bind(document.getElement("div[id="+a+"]"))}).dissolve()}else{gewaUtil.alert(d.json.msg)}})})})};gewa.util.affix=function(b){var a=function(c){var g=c.getPosition().y,i=c.getStyle("position"),f=c.getDimensions().y,e=$$(".index_wrap")[0],d=$$(".index_wrap")[0].getDimensions().y,h=$$(".index_wrap")[0].getPosition().y;window.addEvent("scroll",function(){var j=this.getScroll().y;if(j>g){if(window.XMLHttpRequest){c.setStyles({position:"fixed",top:0})}else{c.setStyles({top:j})}}else{c.setStyles({position:"absolute",top:g})}if(e){if(f+Document.getScrollTop()>=d+h){e.setStyles({position:"relative"});c.setStyles({position:"absolute",bottom:"0",top:""})}else{e.setStyles({position:"static"})}}})};if($type(b)==="array"){return b.each(function(c){a(c)})}else{if($type(b)==="element"){a(b)}}};var GewaOverText=new Class({Implements:[Options,Events,Class.Occlude],Binds:["reposition","assert","focus","hide","keypress"],options:{element:"label",labelClass:"overTxtLabel",positionOptions:{position:"upperLeft",edge:"upperLeft",offset:{x:4,y:2}},poll:false,pollInterval:250,wrap:false},property:"GewaOverText",initialize:function(b,a){b=this.element=document.id(b);
if(this.occlude()){return this.occluded}this.setOptions(a);this.attach(b);GewaOverText.instances.push(this);if(this.options.poll){this.poll()}},toElement:function(){return this.element},attach:function(){var b=this.element,a=this.options,c=a.textOverride||b.get("alt")||b.get("title");if(!c){return this}var d=this.text=Element(a.element,{"class":a.labelClass,styles:{lineHeight:this.element.getDimensions().y,height:this.element.getDimensions().y,position:"absolute",cursor:"text",color:"#ccc",width:this.element.getDimensions().x,"text-indent":6},html:c,events:{click:function(){this.element.focus()}.bind(this)}}).inject(b,"after");if(a.element=="label"){if(!b.get("id")){b.set("id","input_"+String.uniqueID())}d.set("for",b.get("id"))}if(a.wrap){this.textHolder=new Element("div.overTxtWrapper",{styles:{lineHeight:"normal",position:"relative"}}).grab(d).inject(b,"before")}return this.enable()},destroy:function(){this.element.eliminate(this.property);this.disable();if(this.text){this.text.destroy()
}if(this.textHolder){this.textHolder.destroy()}return this},disable:function(){this.element.removeEvents({focus:this.focus,blur:this.assert,keypress:this.keypress,keyup:this.assert,change:this.assert});window.removeEvent("resize",this.reposition);this.hide(true,true);return this},enable:function(){this.element.addEvents({focus:this.focus,blur:this.assert,keypress:this.keypress,keyup:this.assert,change:this.assert});window.addEvent("resize",this.reposition);this.reposition();return this},wrap:function(){if(this.options.element=="label"){if(!this.element.get("id")){this.element.set("id","input_"+String.uniqueID())}this.text.set("for",this.element.get("id"))}},startPolling:function(){this.pollingPaused=false;return this.poll()},poll:function(a){if(this.poller&&!a){return this}if(a){clearInterval(this.poller)}else{this.poller=(function(){if(!this.pollingPaused){this.assert(true)}}).periodical(this.options.pollInterval,this)}return this},stopPolling:function(){this.pollingPaused=true;return this.poll(true)
},focus:function(){this.text.setStyle("color","#dedede");return this},hide:function(c,a){if(this.text&&(this.text.isDisplayed()&&(!this.element.get("disabled")||a))){this.text.hide();this.fireEvent("textHide",[this.text,this.element]);this.pollingPaused=true;if(!c){try{this.element.fireEvent("focus");this.element.focus()}catch(b){}}}return this},show:function(){if(this.text&&!this.text.isDisplayed()){this.text.show();this.reposition();this.fireEvent("textShow",[this.text,this.element]);this.pollingPaused=false}return this},test:function(){return !this.element.get("value")},keypress:function(){return this["hide"](true)},assert:function(a){this.text.setStyle("color","#ddd");return this[this.test()?"show":"hide"](a)},reposition:function(){this.assert(true);if(!this.element.isVisible()){return this.stopPolling().hide()}if(this.text&&this.test()){this.text.position(Object.merge({position:"upperLeft",edge:"upperLeft",offset:{x:0,y:1}},{relativeTo:this.element}))}return this}});GewaOverText.instances=[];
Object.append(GewaOverText,{each:function(a){return GewaOverText.instances.each(function(c,b){if(c.element&&c.text){a.call(GewaOverText,c,b)}})},update:function(){return GewaOverText.each(function(a){return a.reposition()})},hideAll:function(){return GewaOverText.each(function(a){return a.hide(true,true)})},showAll:function(){return GewaOverText.each(function(a){return a.show()})}});gewa.util.textOver=function(b,a){try{if($$("input"+b+" ,textarea"+b).length>0){b=$$("input"+b+" ,textarea"+b)}else{return}b.each(function(f,e){var d=f.getPosition();if(f.hasProperty("alt")&&d.x>0&&d.y>0&&f.value==""){(function(){if(f.retrieve("label")==null){var g=new GewaOverText(f);f.store("label",g)}else{GewaOverText.update()}}).delay(500)}})}catch(c){}};gewa.util.fixIE=function(){if(Browser.ie&&9>parseInt(Browser.version,10)){var b=function(){1300>(document.documentElement.clientWidth||document.body.clientWidth)?document.body.addClass("wrap_mini"):document.body.removeClass("wrap_mini")};b()}};var evengo=new Class({Implements:[Options,Events],options:{element:".eventses",flag:true,fx:"",np:"left",right:0,times:3,width:98,allwidth:490,parent:"",auto:false,clear:$empty,control:true},initialize:function(b){this.setOptions(b);this.element=$(this.options.parent);this.options.element=this.element.getElements(".eventses");this.elements=this.element.getElements("li");var a=this;if(this.elements.length>5||this.options.auto||this.options.flag){var c=a.element.getElement("ul"),d=c.getElements("li").length*this.options.width;this.options.right=c.getStyle("right");if(this.elements.length<10){this.elements.each(function(e){e.clone().inject(c)});d=c.getElements("li").length*this.options.width}c.setStyle("width",d+"px");this.options.element.each(function(e){e.addEvent("click",function(){if(a.options.flag){a.options.flag=false;if(this.getNext()){a.options.np="right";var g=-d.toInt()+a.options.allwidth+a.options.times*a.options.width;var f=0;while(f<a.options.times){c.getLast().inject(c,"top");
f++}c.setStyles({left:"auto",right:g+"px"});a.options.fx.start("right",g,g-a.options.times*a.options.width)}else{a.options.np="left";a.options.fx.start("left",0,-a.options.times*a.options.width)}}})});this.options.fx=new Fx.Tween(this.element.getElement("ul"),{duration:1000,onComplete:function(){var f=this.element.getElement("ul");this.options.flag=true;if(this.options.np=="left"){var e=0;while(e<this.options.times){f.getFirst().inject(f);e++}}f.setStyle("left","0");$clear(this.options.clear);if(this.options.control&&this.options.auto){this.auto()}}.bind(this)})}if(this.options.auto){this.auto();this.element.addEvents({mouseenter:function(){a.options.control=false;$clear(a.options.clear)},mouseleave:function(){a.options.control=true;a.auto()}})}},auto:function(){this.options.clear=this.play.periodical(3000,this)},play:function(){this.options.np="left";this.options.fx.start("left",0,-this.options.times*this.options.width)}});var marquee=new Class({Implements:[Options,Events],options:{transition:"fade",autointerval:5000,items:".items",tween:{duration:1000},me:"",autotimer:0,flag:true,fx:""},initialize:function(b,a){this.setOptions(a);
this.element=$(b);this.initmarquee();this.auto()},initmarquee:function(){var a=this,b=this.element.getElements(this.options.items);b.each(function(d,c){var e={};e.h=d.getDimensions().y;e.fx=new Fx.Morph(d,{wait:false,duration:1000,transition:Fx.Transitions.linear,onComplete:function(){if(this.element.getChildren()){this.element.getChildren().fade("in")}a.readymarquee()}});d.store("obj",e);if(c==(b.length-1)){this.readymarquee()}}.bind(this))},readymarquee:function(){var a=this.element.getElements(this.options.items).getLast();a.setStyles({height:"0px",overflow:"hidden",visibility:"hidden",position:"relative"});a.hide();a.inject(this.element,"top");if(a.getChildren()){a.getChildren().fade("out")}},show:function(){if(this.options.flag){var a=this.element.getElement(this.options.items);if(a.retrieve("obj")!=null){var b=a.retrieve("obj");a.show();b.fx.start({height:[0,b.h],opacity:[0,1]});this.options.fx=b.fx}else{return}}},stop:function(){$(this.element.parentNode).addEvents({mouseenter:function(){if(this.options.fx){this.options.fx.pause()
}this.options.flag=false}.bind(this),mouseleave:function(){if(this.options.fx){this.options.fx.resume()}this.options.flag=true}.bind(this)})},auto:function(){this.options.autotimer=this.show.periodical(this.options.autointerval,this);this.stop()}});var objectSolid=new Class({Implements:[Options,Events],options:{autointerval:5000,pr:162,width:50,nav:".choiceNave"},initialize:function(a,c,d,b){this.setOptions(b);this.container=$(a);this.objWoher=$(c);this.objWohin=$(d);this.objMouse();this.defiend();this.cur=this.container.getElement("img");this.choice=this.objWoher.getFirst();this.textFx();this.autotimer=this.autoExecute.periodical(this.options.autointerval,this)},defiend:function(){this.objWoher.setStyle("width",this.objWoher.getElements("li").length*this.options.width+10);this.options.pr=(this.objWoher.getElements("li").length-1)*this.options.width+12;$$(this.options.nav).setStyle("right",Browser.Engine.version!=4?this.options.pr:this.options.pr-4)},objMouse:function(){var a=this;this.objWoher.getElements("li").each(function(c,b){if(this.container.retrieve(c.get("lang"))==null){this.container.store(c.get("lang"),new Element("img",{src:c.get("lang"),"class":"choiceImg",styles:{opacity:0}}).inject(new Element("a",{href:c.getElement("a").get("href"),target:"_blank"}).inject(this.container)))
}c.addEvent("mouseenter",function(){a.ansin(this,b)})}.bind(this));this.objWoher.addEvents({mouseenter:function(){$clear(this.autotimer)}.bind(this),mouseleave:function(){this.autotimer=this.autoExecute.periodical(this.options.autointerval,this)}.bind(this)})},autoExecute:function(){if(this.choice.getNext()){var a=this.objWoher.getElements("li").indexOf(this.choice.getNext());this.ansin(this.choice.getNext(),a)}else{this.choice=this.objWoher.getFirst();this.ansin(this.choice,0)}},ansin:function(c,b){this.choice=c;this.cur.morph({opacity:0,width:85,height:35,left:340,top:140});if(this.container.retrieve(c.get("lang"))!=null){this.container.retrieve(c.get("lang")).morph({height:280,width:680,opacity:1,left:0,top:0});var a=Browser.Engine.version!=4?this.options.pr:this.options.pr-4;$$(this.options.nav).tween("right",a-this.options.width*b);this.objWohin.innerHTML=this.choice.innerHTML;this.myFx.start("opacity",0,1);this.cur=this.container.retrieve(c.get("lang"))}},textFx:function(){this.myFx=new Fx.Tween(this.objWohin,{duration:"2000",transition:"bounce:out",link:"cancel",onComplete:function(){this.container.getElements("img").each(function(a){if(a!=this.cur){a.setStyles({width:680,height:280,left:680,top:0})
}}.bind(this))}.bind(this)})}});var adSoild=new Class({Implements:[Options,Events],options:{autointerval:5000,nav:".nav",choice:"choice",width:16,margin:5,position:{x:660,y:80}},initialize:function(a,c,b){this.setOptions(b);this.container=$(a);this.obj=$(c);this.defiend()},defiend:function(){this.width=this.obj.getDimensions().x;this.obj.setStyle("width",this.width);this.obj.getElements(this.options.nav).each(function(d,c){if(this.container.retrieve(d.get("name"))==null){var b=new Element("a",{href:d.get("href"),title:d.get("title"),target:"_blank"});var a=new Element("img",{src:d.get("name"),styles:{opacity:0}}).inject(b.inject(this.container));if(d.get("config")){new Element("img",{src:d.get("config"),style:{width:"1px",height:"1px",position:"absolute"}}).inject(b)}this.container.store(d.get("name"),a);if(this.obj.getElements(this.options.nav).length>1){d.addEvent("mouseenter",function(){this.ansin(a,c);this.choice=d}.bind(this))}}}.bind(this));if(this.obj.getElements(this.options.nav).length>1){this.choice=this.obj.getFirst();
this.createFx();this.ansin(this.container.retrieve(this.obj.getElement(".nav").get("name")),0);this.autotimer=this.autoExecute.periodical(this.options.autointerval,this);this.objMouse()}else{this.container.getElement("img").setStyle("opacity",1);$("navControl").addClass("none")}},objMouse:function(){this.container.getParent().addEvents({mouseenter:function(){$clear(this.autotimer)}.bind(this),mouseleave:function(){this.autotimer=this.autoExecute.periodical(this.options.autointerval,this)}.bind(this)})},autoExecute:function(){if(this.choice.getNext()){var a=this.obj.getElements(this.options.nav).indexOf(this.choice.getNext());this.choice=this.choice.getNext();this.ansin(this.container.retrieve(this.choice.get("name")),a)}else{this.choice=this.obj.getFirst();this.ansin(this.container.retrieve(this.choice.get("name")),0)}},ansin:function(b,a){this.myFx.start("right",this.width-this.options.width*(a+1)-this.options.margin*a);this.container.getElements("img").each(function(c){if(c!=b){c.morph({opacity:0,width:this.options.position.x/2,height:this.options.position.y/2,left:this.options.position.x/4,top:this.options.position.y/4})
}}.bind(this));b.morph({opacity:1});this.container.getElements("img").setStyles({width:this.options.position.x,height:this.options.position.y,left:0,top:0})},createFx:function(){this.myFx=new Fx.Tween(new Element("span",{styles:{right:this.width-this.options.width}}).addClass(this.options.choice).inject(this.container.getParent()),{duration:"500",transition:Fx.Transitions.Sine,link:"cancel"})}});var fackLayout=new Class({Implements:[Options,Events],options:{clazz:["off","on"],annal:""},initialize:function(c,b,a){this.setOptions(a);this.elements=$(c).getElements(b);this.options.annal=this.elements.getLast().addClass("on");this.build()},build:function(){var a=this;this.elements.addEvent("mouseenter",function(){a.options.annal.removeClass("on");this.addClass("on");a.options.annal=this})}});var JUSlideShow8=new Class({Implements:[Options,Events],options:{right:0,slider:true},initialize:function(a){this.setOptions(a);this.juSlide8Bg=$$(this.options.juSlide8Bg);this.juSlide8Menu=$$(this.options.juSlide8Menu);
this.juSlide8Info=$$(this.options.juSlide8Info);this.juSlideMenuImg=$$(this.options.juSlideMenuImg);this.juSlide=$(this.options.juSlide);this.maxIter=this.juSlide8Bg.length;this.currentIter=0;this.constructElement();this.isEeven=true;this.count=this.options.count;this.butPre=$$(this.options.butPre)[0];this.butNext=$$(this.options.butNext)[0];this.width=this.options.width||this.juSlide8Bg[0].getDimensions().x;this.nextIter=0;this.juSlideMenuImg[0].getParent().setStyle("width",this.juSlideMenuImg.length*this.juSlideMenuImg[0].getDimensions().x);if(this.juSlideMenuImg[0].getParent(".ju-group")){this.juSlideMenuImg[0].getParent(".ju-group").setStyle("width",627)}if(this.juSlideMenuImg.length>0){[this.butPre,this.butNext].each(function(b){b.addEvents({mouseleave:function(c){this.fade(1)},mouseenter:function(c){this.fade(0.5)},click:function(c){if(this.isEeven){if($(c.target)==this.butPre){this.previous(true)}else{this.next(true)}}else{this.isEeven=false}}.bind(this)})}.bind(this))}else{this.butPre.hide();
this.butNext.hide()}this.juSlide.addEvents({mouseleave:function(){this.clearTimer();this.prepareTimer()}.bind(this),mouseenter:function(){this.clearTimer()}.bind(this)});this.juSlide.removeClass("loading");this.juSlide8Menu.each(function(c,b){c.addEvents({click:function(d){d=new Event(d);d.stop();this.goToByClick(b);this.nextIter=b}.bind(this)})}.bind(this));this.juSlide8Info[0].morph({opacity:1,duration:200});this.juSlideMenuImg[0].addClass("select");this.prepareTimer()},constructElement:function(){this.juSlide8Bg.each(function(b,a){b.setStyles({position:"absolute",left:0});b.setStyle("opacity",0)}.bind(this));this.juSlide8Info.each(function(b,a){b.setStyle("opacity",0)}.bind(this));this.juSlide8Bg[0].setStyle("opacity",1);this.currInter=-1},clearTimer:function(){$clear(this.timer)},prepareTimer:function(){this.timer=this.next.periodical(this.options.transaction,this)},previous:function(a){this.nextIter=this.currentIter-1;if(this.nextIter<=-1){this.nextIter=this.maxIter-1}if(a){this.clearTimer();
this.changeItem(this.nextIter,-1);return}this.goTo(this.nextIter)},next:function(a){this.nextIter=this.currentIter+1;if(this.nextIter>=this.maxIter){this.nextIter=0}if(a){this.clearTimer();this.changeItem(this.nextIter);return}this.goTo(this.nextIter)},goToByClick:function(a){if(a!=this.currentIter){this.clearTimer();this.changeItem(a);this.prepareTimer()}},goTo:function(a){this.clearTimer();this.changeItem(a);this.prepareTimer()},slidCousor:function(b,a){if(this.juSlideMenuImg.length<=(this.width/this.juSlideMenuImg[0].getDimensions().x).toInt()){return}if((this.juSlideMenuImg.length/this.count).toInt()==1||this.count==1){this.left=this.juSlideMenuImg[0].getDimensions().x*((this.count==1)?(-((b>(this.juSlideMenuImg.length-this.width/this.juSlideMenuImg[0].getDimensions().x).toInt())?((this.juSlideMenuImg.length-this.width/this.juSlideMenuImg[0].getDimensions().x).toInt()+1):b)):((b>=this.count)?(-(this.juSlideMenuImg.length%this.count)):0));this.juSlideMenuImg[0].getParent().tween("margin-left",this.left)
}else{if(((a)?(b+1):b)%this.count==0&&((a)?(b+1):b)+((this.juSlideMenuImg.length%this.count==0)?this.count:(this.juSlideMenuImg.length%this.count))==this.juSlideMenuImg.length){this.left=this.juSlideMenuImg[0].getDimensions().x*(-(((a)?(b-1):b)-this.count+this.juSlideMenuImg.length%this.count));this.juSlideMenuImg[0].getParent().tween("margin-left",this.left)}else{if(((a)?(b+1):b)%this.count==0){this.left=this.juSlideMenuImg[0].getDimensions().x*(-((a)?((b+1)/this.count-1):b));this.juSlideMenuImg[0].getParent().tween("margin-left",this.left)}}}},changeItem:function(c,b){if(this.currentIter!=c){if(this.juSlide8Info[c].retrieve("key")==null){this.juSlide8Info[c].store("key",this.juSlide8Info[c].getDimensions())}if(this.juSlide8Bg[this.currentIter].retrieve("key")==null){this.juSlide8Bg[this.currentIter].store("key",this.juSlide8Bg[this.currentIter].getDimensions())}if(this.juSlide8Bg[c].retrieve("key")==null){this.juSlide8Bg[c].store("key",this.juSlide8Bg[c].getDimensions())}var e=this.juSlide8Info[c].retrieve("key");
var d=this.juSlide8Bg[this.currentIter].retrieve("key");var a=this.juSlide8Bg[c].retrieve("key");this.juSlide8Bg[c].setStyles({left:0,top:0,width:a.x,height:a.y});if(this.juSlide8Info.length>0){this.juSlide8Info[this.currentIter].hide()}this.juSlide8Bg[this.currentIter].morph({opacity:0,left:this.options.slider?d.x:0,link:"cancel",transition:Fx.Transitions.Sine.easeOut,onComplete:function(){if(this.juSlideMenuImg.length>0){this.juSlideMenuImg[this.currentIter].removeClass("select");this.juSlideMenuImg[c].addClass("select");this.slidCousor(c,b)}if(this.juSlide8Info.length>0){this.juSlide8Info[c].setStyles({opacity:1,right:-this.width,width:e.x,height:e.y,bottom:40}).show();this.juSlide8Info[c].morph({right:this.options.right});this.isEeven=true}}.bind(this)});this.juSlide8Bg[c].morph({opacity:1,duration:"long",onComplete:function(){this.juSlide8Bg[this.currentIter].setStyles({left:0,top:0,width:d.x,height:d.y})}.bind(this)});this.currentIter=c}}});var slide_3d=new Class({Implements:[Options,Events],options:{w:150,h:200,mw:96,mh:128,showCount:0,clear:$empty,autofor:"next",time:5000},initialize:function(c,b,a){this.element=$(c);
this.clint=this.element.getDimensions();this.loadding=new Element("div",{styles:{width:this.clint.x,height:this.clint.y,background:"url(/css/images/loading3.gif) center center no-repeat",position:"absolute",left:0,top:0}}).inject(this.element);if(b&&$$(b).length>0){this.dataList=$$(b)}else{return}this.init()},init:function(){new Element("span").addClass("moveLeft moveCursor").addEvent("click",function(){this.play("pre",true)}.bind(this)).inject(this.element.getParent());new Element("span").addClass("moveRight moveCursor").addEvent("click",function(){this.play("next",true)}.bind(this)).inject(this.element.getParent());var b=this.options.showCount;this.dataList.each(function(e,d){if(d!=0){e.getParent("div[data-role=3d]").fade(0)}this.loadImg(e,d==this.options.showCount?true:false,function(){if(d>b+1){this.fade(0)}})}.bind(this));var c=this.dataList[this.options.showCount].getParent("div[data-role=3d]"),a=c.getDimensions().y;c.getParent().setStyle("height",a);c.fade(1);this.element.getParent().addEvents({mouseenter:function(){$$(".moveCursor").fade(1);
$clear(this.options.clear)}.bind(this),mouseleave:function(){$$(".moveCursor").fade(0);this.autoPlay()}.bind(this)});this.autoPlay()},autoPlay:function(){this.options.clear=this.play.periodical(this.options.time,this)},play:function(d,b){if(!d){d=this.options.autofor}var f=this.element.getElements("img"),a=this.element.getElement(".select"),c=f.indexOf(a),e=[];if(d==="next"){if(b){$$(".moveLeft").fade(1)}e[0]=this.getPre(f,c,0,0);e[1]=a;e[2]=this.getNex(f,c,0,0);e[3]=this.getNex(f,c,1,0);if(e[2]){this.switchContent(e[2],f,c)}if(!e[3]){if(b){$$(".moveRight").fade(0)}this.options.autofor="pre"}e.each(function(h,g){if(h&&e[2]){this.resizePicture(h,g==2?true:false,g<2?true:false,function(){if(e[0]){e[0].fade(0)}e[1].removeClass("select")})}}.bind(this))}else{if(b){$$(".moveRight").fade(1)}e[0]=this.getPre(f,c,1,0);e[1]=this.getPre(f,c,0,0);e[2]=a;e[3]=this.getNex(f,c,0,0);if(e[1]){this.switchContent(e[1],f,c)}if(!e[0]){if(b){$$(".moveLeft").fade(0)}this.options.autofor="next"}e.each(function(h,g){if(h&&e[1]){this.resizePicture(h,g==1?true:false,g>0?false:true,function(){if(e[3]){e[3].fade(0)
}e[2].removeClass("select")})}}.bind(this))}},switchContent:function(e,c,b){this.dataList[b].getParent("div[data-role=3d]").fade(0);var a=this.dataList[c.indexOf(e)].getParent("div[data-role=3d]"),d=a.getDimensions().y;a.fade(1);a.getParent().morph({height:d})},getPre:function(e,c,b,a){var d=null;while(e[c--]&&a<=b){d=e[c];a++}return d},getNex:function(e,d,c,a){var b=null;while(e[d++]&&a<=c){b=e[d];a++}return b},resizePicture:function(d,a,b,g){var f={};if(d.width>a?this.options.w:this.options.mw||d.height>a?this.options.h:this.options.mh){var e=a?this.options.w:this.options.mw,c=a?this.options.h:this.options.mh;rateWidth=d.width/e;rateHeight=d.height/c;if(rateWidth>rateHeight){f.width=a?this.options.w:this.options.mw;f.height=d.height/rateWidth}else{f.width=d.width/rateHeight;f.height=a?this.options.h:this.options.mh}}else{f.width=d.width;f.height=d.height}if(b){f.left=0}else{f.left=this.clint.x-f.width}if(a){f.left=(this.clint.x-f.width)/2}f.top=(this.clint.y-f.height)/2;d.fade(1);d.morph({left:f.left,top:f.top,width:f.width,height:f.height,"z-index":a?2:1,opacity:1,duration:50,onComplete:function(){if(a){this.addClass("select")
}g.call(this)}.bind(d)})},loadImg:function(c,a,d){var b=this;Asset.image(c.get("lazeImg"),{styles:{opacity:0},onLoad:function(){b.loadding.fade("out");b.resizePicture(this,a,false,d)}}).inject(new Element("a",{href:c.get("href")?c.get("href"):"",title:c.get("text"),target:"_blank"}).inject(this.element))}});var sigleLeep=new Class({Implements:[Options,Events],options:{leepNode:"*[config=isleep]",orientation:".orientation",isNode:"li",disable:"disable",selector:"select",point:"horizontal",count:0,size:0,length:5,screen:0,callback:$empty,isrelative:{id:"",hasclass:".isrelative",event:"mouseenter",callback:$empty}},initialize:function(b,c,a){this.setOptions(a);this.element=$(b);this.fxNode=$(c);this.orientation=this.element.getElements(this.options.orientation);this.leepNode=this.fxNode.getElements(this.options.isNode);this.screen=this.options.screen!=0?this.options.screen:(this.options.point=="vertical"?this.leepNode[0].getDimensions().y:this.leepNode[0].getDimensions().x);this.coreFx();this.setPoint();
this.orientationEventDrive()},setPoint:function(){this.orientation[0].addClass("disable");this.pos=(this.options.point=="vertical")?(function(){return"top"})():(function(){this.fxNode.setStyle("width",this.options.size*this.leepNode.length);return"left"}.bind(this))();this.storage=0;this.count=this.options.count;this.storagePos=0;this.isFlag=true;this.screenCount=(this.screen/this.options.size).toInt();this.sigleCount=this.leepNode.length%this.screenCount;this.screenfianelCount=(this.leepNode.length/this.screenCount).toInt()},orientationEventDrive:function(){var a=this;if(this.leepNode.length<=this.options.length){this.orientation.hide()}this.orientation.addEvent("click",function(){a.options.callback.apply(a);if(this.hasClass("disable")||!a.isFlag){return}a.isFlag=false;if(a.orientation[0]==this){a.count--}else{a.count++}a.skipNode(this)});if(a.count>0){this.orientation[1].fireEvent("click")}if($(this.options.isrelative.id)){this.leepNode.filter(function(b){return b.hasProperty("relative")
}).addEvent(this.options.isrelative.event,function(b){if(document.getElement("*[isrelative="+this.get("relative")+"]")){$(a.options.isrelative.id).getElements(a.options.isrelative.hasclass).hide();document.getElement("*[isrelative="+this.get("relative")+"]").show()}else{a.options.isrelative.callback(this)}a.leepNode.removeClass("select");this.addClass("select")})}},skipNode:function(a){if(this.leepNode[this.count]&&$defined(this.leepNode[this.count])){this.coreExecute()}else{a.addClass("disable");this.count=this.storage}},coreExecute:function(){this.options.point=="vertical"?(function(){if(this.screenCount==1){this.fx.start({top:[this.storagePos,-(this.options.size)*this.count]})}else{if((this.screenfianelCount==1&&this.count==0)||(this.count==0&&this.sigleCount!=0)){this.fx.start({top:[(((this.screenfianelCount==1)?0:this.storagePos)-this.sigleCount*this.options.size),0]});return}if(this.screenfianelCount==this.count){if(this.screenfianelCount==1){this.fx.start({top:[0,-(this.sigleCount*this.options.size)]})
}else{this.fx.start({top:[this.storagePos,this.storagePos-this.sigleCount*this.options.size]})}}else{this.fx.start({top:[this.storagePos,-(this.screen*this.count)]})}}}.bind(this)()):(function(){if(this.screenCount==1){this.fx.start({left:[this.storagePos,-(this.options.size)*this.count]})}else{if((this.screenfianelCount==1&&this.count==0)||(this.count==0&&this.sigleCount!=0)){this.fx.start({left:[(((this.screenfianelCount==1)?0:this.storagePos)-this.sigleCount*this.options.size),0]});return}if(this.screenfianelCount==this.count){if(this.screenfianelCount==1){this.fx.start({left:[0,-(this.sigleCount*this.options.size)]})}else{this.fx.start({left:[this.storagePos,this.storagePos-this.sigleCount*this.options.size]})}}else{this.fx.start({left:[this.storagePos,-(this.screen*this.count)]})}}}.bind(this)())},coreFx:function(){if(this.leepNode.length>this.options.length){this.fx=new Fx.Morph(this.fxNode,{duration:"400",transition:Fx.Transitions.Sine.easeOut,onComplete:function(){if(this.storage){this.orientation.removeClass("disable")
}this.storage=this.count;this.storagePos=this.fxNode.getStyle((this.options.point=="vertical")?"top":"left").toInt();if(((this.screenCount==1)?this.options.length:0)+this.count>=this.screenfianelCount&&this.orientation[1]){this.orientation[1].addClass("disable")}else{this.orientation[1].removeClass("disable")}if(this.count==0&&this.orientation[0]){this.orientation[0].addClass("disable")}else{this.orientation[0].removeClass("disable")}this.isFlag=true;if($(this.options.isrelative.id)&&this.screenCount==1){if(document.getElement("*[isrelative="+this.leepNode[this.count].get("relative")+"]")){$(this.options.isrelative.id).getElements(this.options.isrelative.hasclass).hide();document.getElement("*[isrelative="+this.leepNode[this.count].get("relative")+"]").show()}else{this.options.isrelative.callback(this.leepNode[this.count])}this.leepNode.removeClass("select");this.leepNode[this.count].addClass("select")}}.bind(this)})}else{return}}});var slideGallery=new Class({Implements:[Options,Events],options:{holder:".opiList",elementsParent:"ul",elements:"li",nextItem:".next",prevItem:".prev",stop:".stop",start:".start",speed:600,duration:3000,steps:1,current:0,transition:"sine:in:out",direction:"horizontal",mode:"callback",currentClass:"current",nextDisableClass:"next-disable",prevDisableClass:"prev-disable",paging:false,pagingEvent:"click",pagingHolder:".paging",random:false,autoplay:false,autoplayOpposite:false,stopOnHover:true},initialize:function(a,b){if(a.length==null){this.gallery=a
}else{this.gallery=a[0]}if(!this.gallery){return false}this.setOptions(b);this.holder=this.gallery.getElement(this.options.holder);this.itemsParent=this.holder.getElement(this.options.elementsParent);this.items=this.itemsParent.getElements(this.options.elements);this.next=this.gallery.getElement(this.options.nextItem);this.prev=this.gallery.getElement(this.options.prevItem);this.stop=this.gallery.getElement(this.options.stop);this.start=this.gallery.getElement(this.options.start);this.current=this.options.current;this.bound={rotate:this.rotate.bind(this)};if(this.options.direction=="horizontal"){this.direction="margin-left";this.size=this.items[0].getWidth();this.visible=Math.round(this.holder.getWidth()/this.size)}else{this.direction="margin-top";this.size=this.items[0].getHeight();this.visible=Math.round(this.holder.getHeight()/this.size)}if(this.items.length<=this.visible){if(this.next){this.next.addClass(this.options.nextDisableClass).addEvent("click",function(){return false})}if(this.prev){this.prev.addClass(this.options.prevDisableClass).addEvent("click",function(){return false
})}if(this.stop){this.stop.addEvent("click",function(){return false})}if(this.start){this.start.addEvent("click",function(){return false})}this.gallery.addClass("stopped no-active");this.fireEvent("start",this.current,this.visible,this.items.length,this.items[this.current]);return false}this.options.steps=this.options.steps>this.visible?this.visible:this.options.steps;this.options.duration=this.options.duration<1000?1000:this.options.duration;this.options.speed=this.options.speed>6000?6000:this.options.speed;if(this.options.speed>this.options.duration){this.options.speed=this.options.duration}this.fx=new Fx.Tween(this.itemsParent,{property:this.direction,duration:this.options.speed,transition:this.options.transition,link:"cancel",fps:100,onCancel:function(){if(!this.callChain()){this.fireEvent("chainComplete",this.subject)}return this}});if(this.options.random){this.shuffle()}this.getInitialCurrent();if(this.options.mode=="circle"){while(this.items.length<this.options.steps+this.visible){this.itemsParent.innerHTML+=this.itemsParent.innerHTML;
this.items=this.itemsParent.getElements(this.options.elements)}for(var c=0;c<this.current;c++){this.items[c].inject(this.itemsParent,"bottom")}this.options.paging=false}else{if(this.options.paging){this.createPaging()}this.play(false)}if(this.next){this.next.addEvent("click",function(){this.nextSlide();return false}.bind(this))}if(this.prev){this.prev.addEvent("click",function(){this.prevSlide();return false}.bind(this))}if(this.options.autoplay||this.options.autoplayOpposite){this.timer=this.bound.rotate.delay(this.options.duration)}else{this.gallery.addClass("stopped")}if(this.start){this.start.addEvent("click",function(){clearTimeout(this.timer);this.gallery.removeClass("stopped");this.timer=this.bound.rotate.delay(this.options.duration);return false}.bind(this))}if(this.stop){this.stop.addEvent("click",function(){this.gallery.addClass("stopped");clearTimeout(this.timer);return false}.bind(this))}if(this.options.stopOnHover){this.gallery.addEvent("mouseenter",function(){clearTimeout(this.timer)
}.bind(this));this.gallery.addEvent("mouseleave",function(){if(!this.gallery.hasClass("stopped")){clearTimeout(this.timer);this.timer=this.bound.rotate.delay(this.options.duration)}}.bind(this))}this.fireEvent("start",this.current,this.visible,this.items.length,this.items[this.current])},getInitialCurrent:function(){var a=this.items.get("class").indexOf(this.options.currentClass);if(a!=-1){this.current=a}else{if(this.current>this.items.length-1){this.current=this.items.length-1}else{if(this.current<0){this.current=0}}}if(this.options.mode!="circle"&&this.visible+this.current>=this.items.length){this.current=this.items.length-this.visible}return this},rotate:function(){if(!this.options.autoplayOpposite){this.nextSlide()}else{this.prevSlide()}this.timer=this.bound.rotate.delay(this.options.duration);return this},play:function(a){if(this.options.mode=="line"){this.sidesChecking()}if(a){this.fx.start(-this.current*this.size)}else{this.fx.set(-this.current*this.size)}if(this.options.paging){this.setActivePage()
}this.fireEvent("play",this.current,this.visible,this.items.length,this.items[this.current]);return this},nextSlide:function(){if(this.options.mode!="circle"){if(this.visible+this.current>=this.items.length){if(this.options.mode=="callback"){this.current=0}}else{if(this.visible+this.current+this.options.steps>=this.items.length){this.current=this.items.length-this.visible}else{this.current+=this.options.steps}}this.play(true)}else{var a=this.current;if((this.current+=this.options.steps)>=this.items.length){this.current-=this.items.length}this.fx.start(-this.size*this.options.steps).chain(function(){for(var b=0;b<this.options.steps;b++){if(a>=this.items.length){a=0}this.items[a++].inject(this.itemsParent,"bottom")}this.fx.set(0)}.bind(this));this.fireEvent("play",this.current,this.visible,this.items.length,this.items[this.current])}return this},prevSlide:function(){if(this.options.mode!="circle"){if(this.current<=0){if(this.options.mode=="callback"){this.current=this.items.length-this.visible
}}else{if(this.current-this.options.steps<=0){this.current=0}else{this.current-=this.options.steps}}this.play(true)}else{for(var a=0;a<this.options.steps;a++){if(this.current-1<0){this.current=this.items.length}this.items[--this.current].inject(this.itemsParent,"top")}this.fx.set(-this.size*this.options.steps).start(0);this.fireEvent("play",this.current,this.visible,this.items.length,this.items[this.current])}return this},sidesChecking:function(){this.next.removeClass(this.options.nextDisableClass);this.prev.removeClass(this.options.prevDisableClass);if(this.visible+this.current>=this.items.length){this.next.addClass(this.options.nextDisableClass)}else{if(this.current==0){this.prev.addClass(this.options.prevDisableClass)}}return this},createPaging:function(){this.paging=new Element("ul");var c=this.gallery.getElement(this.options.pagingHolder);if(c!=null){this.paging.inject(c)}else{this.paging.inject(this.gallery).addClass("paging")}var b=Math.ceil((this.items.length-this.visible)/this.options.steps)+1;
var d="";for(var a=0;a<b;a++){d+='<li><a href="#">'+parseInt(a+1)+"</a></li>"}this.paging=this.paging.set("html",d).getElements("a");this.paging.each(function(f,e){f.addEvent(this.options.pagingEvent,function(){if(e<b-1){this.current=e*this.options.steps}else{this.current=this.items.length-this.visible}this.play(true);return false}.bind(this))}.bind(this));return this},setActivePage:function(){this.paging.removeClass("active")[Math.ceil(this.current/this.options.steps)].addClass("active");return this},shuffle:function(){var a="";this.items.sort(function(){return 0.5-Math.random()}).each(function(b){a+=new Element("div").adopt(b).get("html")});this.items=this.itemsParent.set("html",a).getElements(this.options.elements);return this}});var fadeGallery=new Class({Extends:slideGallery,initialize:function(a,b){if(b.mode=="circle"){b.mode="callback"}this.parent(a,b);this.fxFade=[];this.items.each(function(d,c){this.fxFade[c]=new Fx.Tween(d,{property:"opacity",duration:this.options.speed,transition:this.options.transition,link:"cancel"});
this.fxFade[c].set(0)}.bind(this));this.play(false)},play:function(a){if(this.previous==null){this.previous=0;return false}if(this.options.mode=="line"){this.sidesChecking()}if(a){this.fxFade[this.previous].start(0);this.fxFade[this.current].start(1)}else{this.fxFade[this.previous].set(0);this.fxFade[this.current].set(1)}this.previous=this.current;if(this.options.paging){this.setActivePage()}this.fireEvent("play",this.current,this.visible,this.items.length,this.items[this.current])}});var scrollNav=new Class({Implements:[Options,Events],options:{wrapper:window,activeClass:"select",disActiveClass:"disable",managerNode:{manager:"dl",panel:"dt",node:"dt label"},isFlag:false},position:0,oldposition:0,managerHeight:0,oldmanagerHeight:0,initialize:function(b,a){this.setOptions(a);this.wrapper=this.options.wrapper;this.nav=this.element=document.id(b);this.elements=[];this.offset=this.nav.getPosition().y;this.isFlag=this.options.isFlag;this.manager=this.nav.getElements(this.options.managerNode.manager);
this.panel=this.nav.getElements(this.options.managerNode.panel);this.node=this.nav.getElements(this.options.managerNode.node);this.createManager();this.attach();this.scrolla=new Fx.Scroll(window,{duration:1000,wait:false,link:"cancel",onComplete:function(){}.bind(this),onCancel:function(){}.bind(this)})},attach:function(){if(!this.boundScroll){this.boundScroll=this.scroll.bind(this)}this.wrapper.addEvent("scroll",this.boundScroll)},scroll:function(){this.position=this.wrapper.getScroll().y;if((this.position-this.oldposition).abs()<30){return}this.oldposition=this.position;footH=$$(".ui_footer")[0]?$$(".ui_footer")[0].getDimensions().y+40:0;var c=this.wrapper.getScroll().y,a,b=this.wrapper==window?document.body:this.wrapper;if((window.getScrollSize().y-footH)<=(this.wrapper.getScroll().y+this.nav.getDimensions().y)){this.nav.setStyles({top:window.getScrollSize().y-footH-this.nav.getDimensions().y,position:"absolute"})}else{this.nav.removeProperty("style")}if(!this.isFlag&&c>this.offset){this.nav.removeClass("fix_top").addClass("fix_nav");
this.isFlag=true}if(this.isFlag&&c<=this.offset){this.nav.removeClass("fix_nav").addClass("fix_top");this.isFlag=false}if(this.wrapper.getScroll().y<document.getElement('div[data*="movieBox"]').getDimensions().y){if($("movieAc")){$("movieAc").addClass("none")}}this.autoScroll()},createManager:function(){var a=this;this.node.addEvent("click",function(d){var b=this.getParent("dl");var c=document.getElement("div[data="+this.get("rel")+"]");if(c){if(b.hasClass("select")){a.scrolla.toElement(c)}else{a.scrolla.toElement(c);(function(){a.goWalk(b)}).delay(1000)}}})},goWalk:function(a){if(a.retrieve("loadLeftMenuAd")==null){GewaraUtil.sendLoad($(a.get("data-news")),"/ajax/loadLeftMenuAd.xhtml",{tag:a.get("data-tag")},function(c){});a.store("loadLeftMenuAd",true)}this.manager.removeClass("select");if(a.get("rel")=="movieBox"){if($("movieAc")){$("movieAc").addClass("none")}}if(a.getPrevious()){a.getAllPrevious().addClass("disable")}if(a.getNext()){a.getAllNext().removeClass("disable")}a.removeClass("disable");
a.addClass("select");var b=a.getDimensions().y;this.toggleSlide(a,b)},autoScroll:function(){var a=this;this.manager.each(function(b){var c=document.getElement("div[data="+b.get("rel")+"]");if(c){if(a.wrapper.getScroll().y>=c.getCoordinates().top-200&&a.wrapper.getScroll().y+500<(c.getCoordinates().top)+(c.getCoordinates().height)){a.goWalk(b)}}})},toggleSlide:function(a,b){var a=$(a);this.manager.each(function(c){if(a.get("rel")=="movieBox"){if($("movieAc")){$("movieAc").removeClass("none")}}else{if(c!=a){c.setStyle("height","auto")}}})}});var noobSlide=new Class({initialize:function(d){this.items=d.items;this.mode=d.mode||"horizontal";this.modes={horizontal:["left","width"],vertical:["top","height"]};this.size=d.size||240;this.box=d.box.setStyle(this.modes[this.mode][1],(this.size*this.items.length)+"px");this.button_event=d.button_event||"click";this.handle_event=d.handle_event||"click";this.onWalk=d.onWalk||null;this.currentIndex=null;this.previousIndex=null;this.nextIndex=null;this.interval=d.interval||5000;this.autoPlay=d.autoPlay||false;this._play=null;this.handles=d.handles||null;if(this.handles){this.addHandleButtons(this.handles)}this.buttons={previous:[],next:[],play:[],playback:[],stop:[]};if(d.addButtons){for(var c in d.addButtons){this.addActionButtons(c,$type(d.addButtons[c])=="array"?d.addButtons[c]:[d.addButtons[c]])}}this.fx=new Fx.Tween(this.box,$extend((d.fxOptions||{duration:500,wait:false}),{property:this.modes[this.mode][0]}));this.walk((d.startItem||0),true,true)},addHandleButtons:function(b){for(var c=0;
c<b.length;c++){b[c].addEvent(this.handle_event,this.walk.pass([c,true],this))}},addActionButtons:function(d,c){for(var e=0;e<c.length;e++){switch(d){case"previous":c[e].addEvent(this.button_event,this.previous.pass([true],this));break;case"next":c[e].addEvent(this.button_event,this.next.pass([true],this));break;case"play":c[e].addEvent(this.button_event,this.play.pass([this.interval,"next",false],this));break;case"playback":c[e].addEvent(this.button_event,this.play.pass([this.interval,"previous",false],this));break;case"stop":c[e].addEvent(this.button_event,this.stop.create({bind:this}));break}this.buttons[d].push(c[e])}},previous:function(b){this.walk((this.currentIndex>0?this.currentIndex-1:this.items.length-1),b)},next:function(b){this.walk((this.currentIndex<this.items.length-1?this.currentIndex+1:0),b)},play:function(e,d,f){this.stop();if(!f){this[d](false)}this._play=this[d].periodical(e,this,[false])},stop:function(){$clear(this._play)},walk:function(e,d,f){if(e!=this.currentIndex){this.currentIndex=e;
this.previousIndex=this.currentIndex+(this.currentIndex>0?-1:this.items.length-1);this.nextIndex=this.currentIndex+(this.currentIndex<this.items.length-1?1:1-this.items.length);if(d){this.stop()}if(f){this.fx.cancel().set((this.size*-this.currentIndex)+"px")}else{this.fx.start(this.size*-this.currentIndex)}if(d&&this.autoPlay){this.play(this.interval,"next",true)}if(this.onWalk){this.onWalk((this.items[this.currentIndex]||null),(this.handles&&this.handles[this.currentIndex]?this.handles[this.currentIndex]:null))}}}});(function(i,f,c){var q={Implements:[Options,Events],options:{step:30,scrollerHtml:'<span class="decrease"></span><div class="scroll"><div class="handle"><div class="handleL"><div class="handleR"><div class="handleC"></div></div></div></div></div><span class="increase"></span>',mode:"vertical",rtl:false,laze:false,margins:0,wrapped:null,callback:$empty,hasWheel:true,flag:false},element:null,scroller:null,scrollSize:0,areaSize:0,position:0,slider:null,events:null,generated:false,attached:false,isAttached:true,axis:"y",dir:"top",property:"height",initialize:function b(w,v){this.setOptions(v);this.element=f(w);this.axis=(this.options.mode=="vertical")?"y":"x";this.dir=(this.options.mode=="vertical")?"top":this.options.rtl?"right":"left";this.property=(this.options.mode=="vertical")?"height":"width";this.constrcut();this.attach();if(this.options.flag){var u=f(this.options.wrapped).getDimensions().x-this.element.getDimensions().x,t=0;var y=function(){if(t<=u*2-10){this.slider.set(t);t++}else{$clear(s)
}}.bind(this);var s=y.periodical(40);this.element.addEvent("mouseenter",function(){$clear(s)})}if(this.options.laze&&this.isAttached){this.lazeObject()}},constrcut:function n(){var v=this;this.scroller={};var s=this.scroller.element=new Element("div",{"class":"scroller",html:this.options.scrollerHtml}).addClass(this.options.mode),u,v=this,t;this.scroller.inc=s.getElement(".decrease");this.scroller.dec=s.getElement(".increase");this.scroller.scroll=s.getElement(".scroll");this.scroller.handle=s.getElement(".handle");this.scrolled=(this.options.wrapped)?f(this.options.wrapped):(function(){var w=v.element.get("html");v.element.empty();return new Element("div",{html:w,"class":"wrapped"}).inject(v.element)}());this.element.setStyle("overflow","hidden");this.element.adopt(s);if(this.axis=="y"){this.scroller.scroll.setStyle("height",this.element.getDimensions()[this.axis]-this.element.getElement(".increase").getDimensions()[this.axis]*2)}if(this.axis=="x"){this.scroller.scroll.setStyle("width",this.element.getDimensions()[this.axis]-this.element.getElement(".increase").getDimensions()[this.axis]*2)
}this.areaSize=this.element.getDimensions()[this.axis];this.scrollSize=this.scrolled.getDimensions()[this.axis];u=this.areaSize/this.scrollSize;t=+this.scroller.scroll.getDimensions()[this.axis]*u-2;this.scroller.handle.setStyle(this.property,t.toInt());if(this.slider==null){this.slider=new Slider(this.scroller.scroll,this.scroller.handle,{mode:this.options.mode,range:[0,this.scrollSize-this.areaSize]})}else{this.isAttach()}this.generated=true},resizeScroll:function(){var t,u=this,s;this.scrolled=f(this.options.wrapped);this.element.setStyle("overflow","hidden");this.scrolled.removeProperties("style");this.scrolled.setStyle("overflow","scroll");this.scrollSize=this.scrolled.getScrollSize()[this.axis];this.scrolled.setStyle("overflow","hidden");var v=this.position;this.areaSize=this.element.getDimensions()[this.axis];t=this.areaSize/this.scrollSize;s=this.areaSize*t-2;this.scroller.handle.setStyle(this.property,s.toInt());this.scrolled.setStyle(this.property,this.scrollSize);this.slider.setRange([0,this.scrollSize-this.areaSize]);
this.slider.autosize();this.slider.set(v)},attach:function o(){var v=this;if(this.attached){return}if(!this.generated){this.generate()}this.events={scrollUp:function t(){v.scorllSize=v.position-v.options.step;v.slider.set(v.scorllSize)},scrollDown:function s(){v.scorllSize=v.position+v.options.step;v.slider.set(v.scorllSize)},manageWheel:function u(w){w.preventDefault();if(w.wheel>0){v.events.scrollUp()}else{v.events.scrollDown()}}.bind(this)};if(this.options.hasWheel){this.element.addEvent("mousewheel",this.events.manageWheel)}this.scroller.inc.addEvent("click",this.events.scrollUp);this.scroller.dec.addEvent("click",this.events.scrollDown);this.slider.addEvent("change",function(w){v.options.callback.delay(60,this,[w]);if(w<v.position){v.decrease(v.position-w)}else{v.increase(w-v.position)}if(v.options.laze){v.lazeObject()}});this.attached=true;this.isAttach()},isAttach:function g(){if(this.scrollSize-this.areaSize>0){if(!this.element.hasEvent("mousewheel")&&this.options.hasWheel){this.element.addEvent("mousewheel",this.events.manageWheel)
}this.scroller.element.fade(1);this.slider.setRange([0,this.scrollSize-this.areaSize])}else{this.element.removeEvents("mousewheel");this.scroller.element.fade(0)}this.slider.autosize();this.slider.set(0)},detach:function r(){this.element.removeEvent("mousewheel",this.events.manageWheel);this.slider.detach();this.scroller.each(function(s){s.destroy()});this.generated=false;this.attached=false},increase:function k(s){s=s||this.options.step;if(this.position+s>this.scrollSize-this.areaSize){this.position=this.scrollSize-this.areaSize}else{this.position+=s}this.scrolled.setStyle("margin-"+this.dir,-1*this.position);this.fireEvent("increase",[this.position])},decrease:function a(s){s=s||this.options.step;if(this.position-s<0){this.position=0}else{this.position-=s}this.scrolled.setStyle("margin-"+this.dir,-1*this.position);this.fireEvent("decrease",[this.position])},toElement:function j(){return this.element},lazeObject:function d(){if(this.scrolled.getChildren().length>0){this.scrolled.getChildren().each(function(t,s){if(t.getDimensions()[this.axis]*(s+1)-(this.areaSize+(this.isAttached?0:this.position))<=t.getDimensions()[this.axis]){this.showLaze(t)
}}.bind(this))}this.isAttached=false},showLaze:function m(s){this.recursionLaze(s);s.morph("opacity",1)},recursionLaze:function h(s){if(s.getChildren().length>0){s.getChildren().each(function(t){this.recursionLaze(t)}.bind(this))}else{if(s.hasProperty("lazeSrc")){Asset.image(s.get("lazeSrc"),{onLoad:function(){s.setStyle("background","#eee url("+this.get("src")+") center center no-repeat");s.removeProperty("lazeSrc");this.dispose()}})}}},getSub:function p(){return this.scrollSize-this.areaSize},setStyle:function e(s,t){return this.scrolled.getChildren().each(function(v,u){if(s==0&&u==0){return t(v)}if(s==u){return t(v)}}.bind(this))}},l=this.ScrollerBar=new Class(q)}).apply(this,[this,document.id]);var amTips=new Class({Implements:[Options,Events],options:{position:"right",fixed:false,center:true,content:"title",html:false,isHover:false,balloon:true,arrowSize:16,arrowOffset:12,distance:8,motion:6,motionOnShow:true,motionOnHide:true,showOn:"mouseenter",hideOn:"mouseleave",showDelay:0,hideDelay:0,callback:$empty,className:"plugs_tips",borderColor:"#ffa463",bgColor:"#ffffe1",color:"#333",width:"auto",offset:{x:0,y:0},automove:false,ispointer:true,delay:3000,isFly:false,fx:{duration:"short"},mouseBandCallback:"",ajax:false},initialize:function(c,a){this.setOptions(a);var b=this;this.boundShow=(function(d){this.store("isHover",true);if(b.options.isHover){(function(){if(this.retrieve("isHover")){b.doAttach.apply(this,[b])}else{return}}.bind(this)).delay(600)}else{b.doAttach.apply(this,[b])}});this.boundHide=(function(){this.store("isHover",null);this.store("isLeave",null);if(b.options.automove){(function(){if(this.retrieve("isLeave")==null){b.hide(this)}}.bind(this)).delay(400)}else{b.hide(this)
}});if(!["top","right","bottom","left","inside"].contains(this.options.position)){this.options.position="top"}if(c){this.attach(c)}return this},doAttach:function(a){if(!a.options.ajax){this.store("isLeave",true);if(a.options.mouseBandCallback){if(typeof a.options.mouseBandCallback=="function"){a.options.mouseBandCallback.run({_this:a})}}else{a.show(this)}}else{if(typeof a.options.mouseBandCallback=="function"){a.options.mouseBandCallback.apply(a,[this])}}},attach:function(b){var a=this;$$(b).each(function(c){if(!a.options.isFly){if(c.retrieve("hasevent")){return}evs={};evs[a.options.showOn]=a.boundShow;evs[a.options.hideOn]=a.boundHide;c.addEvents(evs);c.store("hasevent",true)}c.store("object",a)});return this},detach:function(c){var b=this;var a={};a[this.options.showOn]=this.boundShow;a[this.options.hideOn]=this.boundHide;$$(c).each(function(d){b.hide(d);d.removeEvents(a);d.eliminate("hasevent");d.eliminate("object")});return this},show:function(b){var a=b.retrieve("_tips");if(a){if(a.getStyle("opacity")==1){clearTimeout(a.retrieve("timeout"));
return this}}var c=this._create(b);if(c==null){return this}b.store("_tips",c);this._animate(c,"in");b.store("visible",true);this.fireEvent("show",[c,b]);return this},hide:function(a){var b=a.retrieve("_tips");if(!b){return this}this._animate(b,"out");a.store("visible",false);this.fireEvent("hide",[b,a]);return this},toggle:function(a){if(a.retrieve("visible")){return this.hide(a)}else{return this.show(a)}},_create:function(d){var e=this.options;e.c=e.content;e.opos=e.position;if(e.c=="title"){e.c="plugs-tips";if(!d.get("plugs-tips")){d.setProperty("plugs-tips",d.get("title"))}d.set("title","")}if(!e.center){if(e.position=="left"||e.position=="right"){e.offset.y=-e.arrowSize/2}else{e.offset.x=-e.arrowSize/2}}e.cnt=(typeof(e.c)=="string"?d.get(e.c):e.c(d));e.cwr=new Element("div").addClass(e.className).setStyles({margin:0,border:"1px solid "+e.borderColor,padding:"1px 10px 3px",background:e.bgColor,"border-radius":"3px","z-index":999,color:e.color});if(!e.isFly){var c={};c[e.showOn]=function(){d.store("isLeave",true)
};c[e.hideOn]=this.boundHide.bind(d);e.cwr.addEvents(c)}e.tip=new Element("div").addClass(e.className+"-wrapper").setStyles({margin:0,padding:0,"z-index":e.cwr.getStyle("z-index")>100?e.cwr.getStyle("z-index"):100}).adopt(e.cwr);e.tip.setStyle("max-width",e.width);if(e.cnt){if($(e.cnt)){if(e.adoptdom){e.cwr.adopt(e.cnt)}else{e.cwr.set("html",typeof(e.cnt)=="string"?e.cnt:e.cnt.get("html"))}}else{e.cwr.set("html",e.cnt)}}else{return null}e.tip.setStyles({position:(e.fixed?"fixed":"absolute"),opacity:0,top:0,left:0}).inject(document.body);if(e.balloon&&e.ispointer?(!e.isFly):(!e.ispointer)){var a=new Element("div").addClass(e.className+"-triangle").setStyles({margin:0,padding:0});e.tipborder=new Element("i",{html:"◆",styles:{"z-index":1,color:e.borderColor}}).inject(a);e.tipbg=new Element("i",{html:"◆",styles:{"z-index":9,color:e.bgColor}}).inject(a);e.ccstyle={width:e.arrowSize,height:e.arrowSize,display:"block","font-family":"SimSun",position:"absolute","font-style":"normal"};e.tipborder.setStyles(e.ccstyle);
e.tipbg.setStyles(e.ccstyle);e.borderStyle={};var b={width:e.arrowSize,height:e.arrowSize,"line-height":e.arrowSize,overflow:"hidden",position:"absolute","z-index":3,"font-size":"1.2em"};switch(e.opos){case"inside":case"top":b.top="auto";b.bottom=-8;e.borderStyle.bottom=-1;break;case"right":e.borderStyle.left=-1;b.left=10;e.cwr.setStyle("margin-left",e.arrowSize);break;case"bottom":b.top=-7;if(Browser.ie6){b.top=-5}if(Browser.ie6){b.bottom=-10}e.borderStyle.top=-1;break;case"left":b.right=8;e.borderStyle.right=-1;if(Browser.ie7){b.position="absolute";b.right=8}else{b["float"]="right"}e.cwr.setStyle("margin-right",e.arrowSize);break}switch(e.opos){case"inside":case"top":case"bottom":b["margin-left"]=e.center?((e.tip.getSize().x/2>e.arrowSize)?(e.tip.getSize().x/2+e.arrowSize/2)-e.arrowSize:5):e.arrowOffset;break;case"left":case"right":b["margin-top"]=e.center?((e.tip.getSize().y/2>e.arrowSize)?(e.tip.getSize().y/2+e.arrowSize/2)-e.arrowSize:5):e.arrowOffset;break}e.tipborder.setStyles(e.borderStyle);
a.setStyles(b).inject(e.tip,(e.opos=="top"||e.opos=="inside")?"bottom":"top")}e.tipSz=e.tip.getSize();e.trgC=d.getCoordinates();e.offsetOption=("function"===typeof(e.offset)?Object.merge({x:0,y:0},e.offset(d)):e.offset);e.pos={x:e.trgC.left+e.offsetOption.x,y:e.trgC.top+e.offsetOption.y};if(e.opos=="inside"){e.tip.setStyles({width:e.tip.getStyle("width"),height:e.tip.getStyle("height")});d.setStyle("position","relative").adopt(e.tip);e.pos={x:e.offset.x,y:e.offset.y}}else{switch(e.opos){case"top":e.pos.y-=e.tipSz.y+e.distance;break;case"right":e.pos.x+=e.trgC.width+e.distance;break;case"bottom":e.pos.y+=e.trgC.height+e.distance;break;case"left":e.pos.x-=e.tipSz.x+e.distance;break}}if(e.center){switch(e.opos){case"top":case"bottom":e.pos.x+=(e.trgC.width/2-e.tipSz.x/2);break;case"left":case"right":e.pos.y+=(e.trgC.height/2-e.tipSz.y/2);break;case"inside":e.pos.x+=(e.trgC.width/2-e.tipSz.x/2);e.pos.y+=(e.trgC.height/2-e.tipSz.y/2);break}}e.pos.y=(d==$(document.body))?0:e.pos.y;e.pos.x=(d==$(document.body))?e.pos.x*2:e.pos.x;
if(d.match("body")){e.pos.y=15;e.pos.x=e.pos.x-$(document.body).getSize().x/2+e.tip.getSize().x/2;e.tip.getElement("div").setStyle("padding","1px 50px")}d.store("tips",e.tip);e.tip.set("morph",e.fx).store("position",e.pos);e.tip.setStyles({top:e.pos.y,left:e.pos.x});return e.tip},_animate:function(a,b){var c=this;clearTimeout(a.retrieve("timeout"));a.store("timeout",(function(e){var g=this.options,f=(b=="in");var d={opacity:f?1:0};if((g.motionOnShow&&f)||(g.motionOnHide&&!f)){var h=e.retrieve("position");if(!h){return}switch(g.position){case"inside":case"top":d.top=f?[h.y-g.motion,h.y]:h.y-g.motion;break;case"right":d.left=f?[h.x+g.motion,h.x]:h.x+g.motion;break;case"bottom":d.top=f?[h.y+g.motion,h.y]:h.y+g.motion;break;case"left":d.left=f?[h.x-g.motion,h.x]:h.x-g.motion;break}}e.morph(d);if(!f){e.get("morph").chain(function(){c.options.callback.call(c);this.dispose()}.bind(e))}}).delay((b=="in")?this.options.showDelay:this.options.hideDelay,this,a));return this}});Element.implement({amTips:function(a){new amTips(this,a);
return this},amTipsShow:function(a){var c=this;var b=this.retrieve("object");if(b){b.show(this)}if(b.options.isFly||a){this.amTipsHide.delay(b.options.delay,[this])}return this},amTipsHide:function(){var b=this;if(typeof this=="object"){b=this[0]}else{b=this}var a=b.retrieve("object");if(a){a.hide(b)}return b},amTipsToggle:function(){var a=this.retrieve("object");if(a){a.toggle(this)}return this}});Element.Properties.amTips={get:function(){return this.retrieve("object")}};function setDefault(b,a){if(!a){a="请输入搜索关键词"}if(b.value.trim()==""){b.value=a}}function clearDefault(a){if(a.value.indexOf("输入")>=0){a.value=""}}function search(c,a){if(c=="countycode"){$("indexareacode").value=""}$(c).value=a;try{clearlist=namefield.split(",");clearlist.each(function(d){if(c!=d&&c!="order"){$(d).value=""}})}catch(b){}$("searchForm").submit()}function addMoreButton(c,b){if($(c).getScrollSize().y>$(c).getSize().y){var a=new Element("a",{id:b,"class":"left morebutton",href:"javascript:void(0)",styles:{color:"#FF6200"},html:"更多>>",events:{click:function(){var d=$(c).getSize().y+60;if(d>$(c).getScrollSize().y){d=$(c).getScrollSize().y;$(b).dispose()}$(c).setStyle("height",d)}}});a.inject(c,"after")}else{$(c).setStyle("height","auto")}}function getFxScroll(b){var a=new Fx.Scroll(b,{duration:"long",transition:Fx.Transitions.Sine.easeOut});return a}function goLeft(d,a){var b=getFxScroll(d),c=$(d).getScroll();if(!a){a=200}b.start(c.x-a,c.y)}function goRight(d,a){var b=getFxScroll(d),c=$(d).getScroll();
if(!a){a=200}b.start(c.x+a,c.y)}function toLeft(a){scroll=getFxScroll(a);scroll.toLeft()}function toRight(a){scroll=getFxScroll(a);scroll.toRight()}function goTop(d,a){var b=getFxScroll(d),c=$(d).getScroll();if(!a){a=200}b.start(c.x,c.y-a)}function goBottom(d,a){var b=getFxScroll(d),c=$(d).getScroll();if(!a){a=200}b.start(c.x,c.y+a)}function removeCurrent(a){$(a).removeClass("cur")}function setCurrent(a,c,b){$(a).addClass("cur");$("newspic").src=b}var RemoteErrorCode={notLogon:1,noRights:2,repeated:3,notFound:4,blacklist:6};function xiangqu(e,b,c,d){if(!c){c="xiangqu"}var a=true;if(d){a=false}checkLogin(a,function(){GewaraUtil.sendRequest(GewaraUtil.basePath+"ajax/common/addXiangqu.xhtml",{relatedid:e,tag:b},function(f){if(f.success){$(c).innerHTML=f.retval;gewaUtil.alert("添加成功！")}else{gewaUtil.alert(f.msg)}},"get")})}function quguo(c,a,b){if(!b){b="quguo"}checkLogin(true,function(){GewaraUtil.sendRequest(GewaraUtil.basePath+"ajax/common/addQuguo.xhtml",{relatedid:c,tag:a},function(d){if(d.success){$(b).innerHTML=d.retval;
if(a=="movie"||a=="cinema"||a=="sport"||a=="theatre"||a=="drama"){showMovieMark()}else{gewaUtil.alert("操作成功！")}}else{gewaUtil.alert(d.msg)}},"get")})}function collection(c,a,b){if(!b){b="collection"}checkLogin(true,function(){var e=GewaraUtil.basePath+"ma/common/addCollection.xhtml?v"+GewaraUtil.rtime,d={tag:a,relatedid:c};GewaraUtil.sendRequest(e,d,function(f){if(f.success){if(a=="movie"||a=="cinema"||a=="theatre"||a=="drama"||a=="sport"||a=="sportservice"){$("nCollect").addClass("none");$("hCollect").removeClass("none");gewaUtil.alert("成功添加至“哇啦”我感兴趣！")}else{if($("nCollect")){$("nCollect").addClass("none")}if($("hCollect")){$("hCollect").removeClass("none")}if(a=="activity"){gewaUtil.alert("成功添加至“哇啦”我感兴趣！")}else{gewaUtil.alert("操作成功！")}}if($(b)){$(b).set("html",f.retval)}}else{gewaUtil.alert(f.msg)}},"get")})}function addDiaryFlower(b,c,a){checkLogin(true,function(){GewaraUtil.mask(a);var e=GewaraUtil.basePath+"ma/blog/addDiaryFlower.xhtml";var d={diaryId:b,math:Math.random()};GewaraUtil.sendRequest(e,d,function(f){GewaraUtil.unmask();
if(f.success){$(c).innerHTML=f.retval}else{if(RemoteErrorCode.notLogon==f.errcode){gewaUtil.alert("您没有登录！")}else{if(RemoteErrorCode.repeated==f.errcode){gewaUtil.alert("12小时以内只能推荐一次")}else{if(f.msg){gewaUtil.alert(f.msg)}else{gewaUtil.alert("推荐失败！")}}}}},"get")})}function addCommentFlower(b,a){checkLogin(true,function(){GewaraUtil.mask(a);GewaraUtil.sendRequest(GewaraUtil.basePath+"activity/ajax/sns/memberSupport.xhtml",{type:"comment",relatedid:b},function(c){GewaraUtil.unmask();if(c.success){$(a).innerHTML=$(a).innerHTML.toInt()+1}else{gewaUtil.alert(c.msg)}},"get")})}function toggleMoreContent(c,b,a,d){if(!d){d=150}if($(c).get("text").length>d){$(c).set("text",$(b).get("text").substring(0,d));$(a).set("text",">>")}else{$(c).set("text",$(b).get("text"));$(a).set("text","<<")}}function toggleMore(){if($("mark").getStyle("height")=="20px"){$("mark").setStyle("height","auto");$("markmore").removeClass("mb1");$("markmore").addClass("mb2")}else{$("mark").setStyle("height","20px");$("markmore").removeClass("mb2");
$("markmore").addClass("mb1")}}function setLoading(a){$(a).innerHTML="<div style='width:75px; height:70px; margin:auto; padding: 2px;'><img style='border:none; ' src='"+GewaraUtil.basePath+"component/images/extanim32.gif' title='正在加载数据...' /></div>"}var StaticRating=new Class({initialize:function(d,c){this.itemList=$(d).getElements("li");c=c*1;var b=1;var e=this;var a="";this.itemList.each(function(g,f){if(c>=b*10){if(f%2!=0){a="on"}else{a="half"}}else{if(c+9>b*10&&f%2==0){a="half"}else{if(f%2!=0){a="no"}else{a=""}}}g.set("class",a);b++})}});var StaticRating2=new Class({initialize:function(d,c){this.itemList=$(d).getElements("li");c=c*1;var b=1;var e=this;var a="";this.itemList.each(function(f){if(c>=b){a="on"}else{a="no"}f.removeClass("no");f.addClass(a);b++})}});var SliderGroup=new Class({current:0,contentList:[],navList:[],activeClass:"active",hideClass:"none",eventName:"mouseover",pauseSlide:false,show:function(a){if(this.current==a.idx){return}this.navList[this.current].removeClass(this.activeClass);
this.contentList[this.current].addClass(this.hideClass);this.current=a.idx;this.navList[a.idx].addClass(this.activeClass);this.contentList[a.idx].removeClass(this.hideClass);this.contentList[a.idx].get("tween",{property:"opacity",duration:2000}).start(0,1)},showNext:function(){if(this.pauseSlide){return}var a=(this.current+1)%7;this.show(this.navList[a])},initialize:function(b,i,d,g,a,h,c){this.contentList=b;this.navList=i;if(a){this.activeClass=a}if(h){this.hideClass=h}if(c){this.eventName=c}if(g){this.autoSlide=g}if(d){this.current=d}this.navList[this.current].addClass(this.activeClass);this.contentList[this.current].removeClass(this.hideClass);var f=this;var e=0;i.each(function(j){j.idx=e;if(e!=f.current){f.contentList[e].set("opacity",0)}j.addEvent(f.eventName,function(){f.show(j);f.pauseSlide=true});j.addEvent("mouseout",function(){f.pauseSlide=false});e++})}});var Fxex=new Class({options:{},initialize:function(a){this.id=a.id;var c=this;var b=new Fx.Tween(c.id,{wait:false,duration:600,transition:Fx.Transitions.Circ.easeInOut});
$(c.id).addEvents({mouseover:function(){b.start("height",20,60)},mouseout:function(){b.start("height",60,20)}})}});function getActivityList(a,b){$(a).empty();new Element("option",{value:"",text:"请选择活动"}).inject($(a));GewaraUtil.sendRequest(GewaraUtil.basePath+"ajax/common/getMyActivityList.xhtml",{},function(c){if(c.success){c.activityList.each(function(d){new Element("option",{value:d.id,text:d.title.substr(0,20)}).inject($(a))})}else{gewaUtil.alert(c.msg)}if(b){b()}})};(function(q){var k,b,g="0.4.2",d="hasOwnProperty",m=/[\.\/]/,v="*",c=function(){},f=function(a,h){return a-h},j={n:{}},p=function(E,u){E+="";var r,D=b,F=Array.prototype.slice.call(arguments,2),l=p.listeners(E),w=0,B=[],z={},e=[],A=k;k=E,b=0;for(var y=0,C=l.length;C>y;y++){"zIndex" in l[y]&&(B.push(l[y].zIndex),0>l[y].zIndex&&(z[l[y].zIndex]=l[y]))}for(B.sort(f);0>B[w];){if(r=z[B[w++]],e.push(r.apply(u,F)),b){return b=D,e}}for(y=0;C>y;y++){if(r=l[y],"zIndex" in r){if(r.zIndex==B[w]){if(e.push(r.apply(u,F)),b){break}do{if(w++,r=z[B[w]],r&&e.push(r.apply(u,F)),b){break}}while(r)}else{z[r.zIndex]=r}}else{if(e.push(r.apply(u,F)),b){break}}}return b=D,k=A,e.length?e:null};p._events=j,p.listeners=function(F){var B,a,y,w,s,x,E,D,A=F.split(m),h=j,C=[h],z=[];for(w=0,s=A.length;s>w;w++){for(D=[],x=0,E=C.length;E>x;x++){for(h=C[x].n,a=[h[A[w]],h[v]],y=2;y--;){B=a[y],B&&(D.push(B),z=z.concat(B.f||[]))}}C=D}return z},p.on=function(h,u){if(h+="","function"!=typeof u){return function(){}}for(var o=h.split(m),a=j,w=0,l=o.length;
l>w;w++){a=a.n,a=a.hasOwnProperty(o[w])&&a[o[w]]||(a[o[w]]={n:{}})}for(a.f=a.f||[],w=0,l=a.f.length;l>w;w++){if(a.f[w]==u){return c}}return a.f.push(u),function(e){+e==+e&&(u.zIndex=+e)}},p.f=function(a){var h=[].slice.call(arguments,1);return function(){p.apply(null,[a,null].concat(h).concat([].slice.call(arguments,0)))}},p.stop=function(){b=1},p.nt=function(a){return a?RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)").test(k):k},p.nts=function(){return k.split(m)},p.off=p.unbind=function(D,z){if(!D){return p._events=j={n:{}},void 0}var a,u,n,s,B,y,h,A=D.split(m),w=[j];for(s=0,B=A.length;B>s;s++){for(y=0;w.length>y;y+=n.length-2){if(n=[y,1],a=w[y].n,A[s]!=v){a[A[s]]&&n.push(a[A[s]])}else{for(u in a){a[d](u)&&n.push(a[u])}}w.splice.apply(w,n)}}for(s=0,B=w.length;B>s;s++){for(a=w[s];a.n;){if(z){if(a.f){for(y=0,h=a.f.length;h>y;y++){if(a.f[y]==z){a.f.splice(y,1);break}}!a.f.length&&delete a.f}for(u in a.n){if(a.n[d](u)&&a.n[u].f){var C=a.n[u].f;for(y=0,h=C.length;h>y;y++){if(C[y]==z){C.splice(y,1);
break}}!C.length&&delete a.n[u].f}}}else{delete a.f;for(u in a.n){a.n[d](u)&&a.n[u].f&&delete a.n[u].f}}a=a.n}}},p.once=function(a,i){var h=function(){return p.unbind(a,h),i.apply(this,arguments)};return p.on(a,h)},p.version=g,p.toString=function(){return"You are running Eve "+g},"undefined"!=typeof module&&module.exports?module.exports=p:"undefined"!=typeof define?define("eve",[],function(){return p}):q.eve=p})(this),function(a,b){"function"==typeof define&&define.amd?define(["eve"],function(c){return b(a,c)}):b(a,a.eve)}(this,function(aG,a1){function aI(b){if(aI.is(b,"function")){return a6?b():a1.on("raphael.DOMload",b)}if(aI.is(b,bB)){return aI._engine.create[bs](aI,b.splice(0,3+aI.is(b[0],bf))).add(b)}var a=Array.prototype.slice.call(arguments,0);if(aI.is(a[a.length-1],"function")){var c=a.pop();return a6?c.call(aI._engine.create[bs](aI,a)):a1.on("raphael.DOMload",function(){c.call(aI._engine.create[bs](aI,a))})}return aI._engine.create[bs](aI,arguments)}function aV(a){if(Object(a)!==a){return a
}var c=new a.constructor;for(var b in a){a[bK](b)&&(c[b]=aV(a[b]))}return c}function aO(b,d){for(var c=0,a=b.length;a>c;c++){if(b[c]===d){return b.push(b.splice(c,1)[0])}}}function a7(b,d,c){function a(){var f=Array.prototype.slice.call(arguments,0),g=f.join("␀"),h=a.cache=a.cache||{},e=a.count=a.count||[];return h[bK](g)?(aO(e,g),c?c(h[g]):h[g]):(e.length>=1000&&delete h[e.shift()],e.push(g),h[g]=b[bs](d,f),c?c(h[g]):h[g])}return a}function aH(){return this.hex}function aN(d,g){for(var f=[],c=0,h=d.length;h-2*!g>c;c+=2){var b=[{x:+d[c-2],y:+d[c-1]},{x:+d[c],y:+d[c+1]},{x:+d[c+2],y:+d[c+3]},{x:+d[c+4],y:+d[c+5]}];g?c?h-4==c?b[3]={x:+d[0],y:+d[1]}:h-2==c&&(b[2]={x:+d[0],y:+d[1]},b[3]={x:+d[2],y:+d[3]}):b[0]={x:+d[h-2],y:+d[h-1]}:h-4==c?b[3]=b[2]:c||(b[0]={x:+d[c],y:+d[c+1]}),f.push(["C",(-b[0].x+6*b[1].x+b[2].x)/6,(-b[0].y+6*b[1].y+b[2].y)/6,(b[1].x+6*b[2].x-b[3].x)/6,(b[1].y+6*b[2].y-b[3].y)/6,b[2].x,b[2].y])}return f}function aS(d,h,g,c,j){var b=-3*h+9*g-9*c+3*j,f=d*b+6*h-12*g+6*c;return d*f-3*h+3*g
}function aW(q,I,z,E,C,L,w,B,F){null==F&&(F=1),F=F>1?1:0>F?0:F;for(var l=F/2,K=12,H=[-0.1252,0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],A=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],J=0,G=0;K>G;G++){var j=l*H[G]+l,k=aS(j,q,z,C,w),b=aS(j,I,E,L,B),D=k*k+b*b;J+=A[G]*aK.sqrt(D)}return l*J}function aF(A,v,b,m,j,y,B,h,k){if(!(0>k||k>aW(A,v,b,m,j,y,B,h))){var z,x=1,q=x/2,g=x-q,w=0.01;for(z=aW(A,v,b,m,j,y,B,h,g);bh(z-k)>w;){q/=2,g+=(k>z?1:-1)*q,z=aW(A,v,b,m,j,y,B,h,g)}return g}}function a3(C,x,b,q,k,A,D,j){if(!(bG(C,b)<bq(k,D)||bq(C,b)>bG(k,D)||bG(x,q)<bq(A,j)||bq(x,q)>bG(A,j))){var m=(C*q-x*b)*(k-D)-(C-b)*(k*j-A*D),v=(C*q-x*b)*(A-j)-(x-q)*(k*j-A*D),B=(C-b)*(A-j)-(x-q)*(k-D);if(B){var z=m/B,w=v/B,g=+z.toFixed(2),y=+w.toFixed(2);if(!(+bq(C,b).toFixed(2)>g||g>+bG(C,b).toFixed(2)||+bq(k,D).toFixed(2)>g||g>+bG(k,D).toFixed(2)||+bq(x,q).toFixed(2)>y||y>+bG(x,q).toFixed(2)||+bq(A,j).toFixed(2)>y||y>+bG(A,j).toFixed(2))){return{x:z,y:w}
}}}}function a0(D,Q,N){var J=aI.bezierBBox(D),V=aI.bezierBBox(Q);if(!aI.isBBoxIntersect(J,V)){return N?0:[]}for(var E=aW.apply(0,D),I=aW.apply(0,Q),L=~~(E/5),A=~~(I/5),P=[],H=[],R={},O=N?0:[],q=0;L+1>q;q++){var z=aI.findDotsAtSegment.apply(aI,D.concat(q/L));P.push({x:z.x,y:z.y,t:q/L})}for(q=0;A+1>q;q++){z=aI.findDotsAtSegment.apply(aI,Q.concat(q/A)),H.push({x:z.x,y:z.y,t:q/A})}for(q=0;L>q;q++){for(var j=0;A>j;j++){var K=P[q],U=P[q+1],W=H[j],r=H[j+1],M=0.001>bh(U.x-K.x)?"y":"x",F=0.001>bh(r.x-W.x)?"y":"x",G=a3(K.x,K.y,U.x,U.y,W.x,W.y,r.x,r.y);if(G){if(R[G.x.toFixed(4)]==G.y.toFixed(4)){continue}R[G.x.toFixed(4)]=G.y.toFixed(4);var h=K.t+bh((G[M]-K[M])/(U[M]-K[M]))*(U.t-K.t),c=W.t+bh((G[F]-W[F])/(r[F]-W[F]))*(r.t-W.t);h>=0&&1>=h&&c>=0&&1>=c&&(N?O++:O.push({x:G.x,y:G.y,t1:h,t2:c}))}}}return O}function aM(A,N,K){A=aI._path2curve(A),N=aI._path2curve(N);for(var G,R,B,F,I,L,z,P,E,O,M=K?0:[],j=0,r=A.length;r>j;j++){var f=A[j];if("M"==f[0]){G=I=f[1],R=L=f[2]}else{"C"==f[0]?(E=[G,R].concat(f.slice(1)),G=E[6],R=E[7]):(E=[G,R,G,R,I,L,I,L],G=I,R=L);
for(var H=0,Q=N.length;Q>H;H++){var S=N[H];if("M"==S[0]){B=z=S[1],F=P=S[2]}else{"C"==S[0]?(O=[B,F].concat(S.slice(1)),B=O[6],F=O[7]):(O=[B,F,B,F,z,P,z,P],B=z,F=P);var q=a0(E,O,K);if(K){M+=q}else{for(var J=0,D=q.length;D>J;J++){q[J].segment1=j,q[J].segment2=H,q[J].bez1=E,q[J].bez2=O}M=M.concat(q)}}}}}return M}function a2(d,g,f,c,h,b){null!=d?(this.a=+d,this.b=+g,this.c=+f,this.d=+c,this.e=+h,this.f=+b):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function aZ(){return this.x+az+this.y+az+this.width+" × "+this.height}function aB(C,x,b,q,k,A){function D(a){return((z*a+B)*a+v)*a}function j(a,d){var c=m(a,d);return((y*c+g)*c+w)*c}function m(h,s){var p,f,E,d,u,c;for(E=h,c=0;8>c;c++){if(d=D(E)-h,s>bh(d)){return E}if(u=(3*z*E+2*B)*E+v,0.000001>bh(u)){break}E-=d/u}if(p=0,f=1,E=h,p>E){return p}if(E>f){return f}for(;f>p;){if(d=D(E),s>bh(d-h)){return E}h>d?p=E:f=E,E=(f-p)/2+p}return E}var v=3*x,B=3*(q-x)-v,z=1-v-B,w=3*b,g=3*(k-b)-w,y=1-w-g;return j(C,1/(200*A))}function aD(b,d){var c=[],a={};
if(this.ms=d,this.times=1,b){for(var f in b){b[bK](f)&&(a[bw(f)]=b[f],c.push(bw(f)))}c.sort(aJ)}this.anim=a,this.top=c[c.length-1],this.percents=c}function aA(Q,cg,be,cm,W,ar){be=bw(be);var cd,ch,P,ck,cj,ae,ci=Q.ms,K={},H={},cc={};if(cm){for(cn=0,ce=aE.length;ce>cn;cn++){var cl=aE[cn];if(cl.el.id==cg.id&&cl.anim==Q){cl.percent!=be?(aE.splice(cn,1),P=1):ch=cl,cg.attr(cl.totalOrigin);break}}}else{cm=+H}for(var cn=0,ce=Q.percents.length;ce>cn;cn++){if(Q.percents[cn]==be||Q.percents[cn]>cm*Q.top){be=Q.percents[cn],cj=Q.percents[cn-1]||0,ci=ci/Q.top*(be-cj),ck=Q.percents[cn+1],cd=Q.anim[be];break}cm&&cg.attr(Q.anim[Q.percents[cn]])}if(cd){if(ch){ch.initstatus=cm,ch.start=new Date-ch.ms*cm}else{for(var X in cd){if(cd[bK](X)&&(aQ[bK](X)||cg.paper.customAttributes[bK](X))){switch(K[X]=cg.attr(X),null==K[X]&&(K[X]=b8[X]),H[X]=cd[X],aQ[X]){case bf:cc[X]=(H[X]-K[X])/ci;break;case"colour":K[X]=aI.getRGB(K[X]);var r=aI.getRGB(H[X]);cc[X]={r:(r.r-K[X].r)/ci,g:(r.g-K[X].g)/ci,b:(r.b-K[X].b)/ci};break;
case"path":var e=ak(K[X],H[X]),Z=e[1];for(K[X]=e[0],cc[X]=[],cn=0,ce=K[X].length;ce>cn;cn++){cc[X][cn]=[0];for(var B=1,F=K[X][cn].length;F>B;B++){cc[X][cn][B]=(Z[cn][B]-K[X][cn][B])/ci}}break;case"transform":var E=cg._,G=bI(E[X],H[X]);if(G){for(K[X]=G.from,H[X]=G.to,cc[X]=[],cc[X].real=!0,cn=0,ce=K[X].length;ce>cn;cn++){for(cc[X][cn]=[K[X][cn][0]],B=1,F=K[X][cn].length;F>B;B++){cc[X][cn][B]=(H[X][cn][B]-K[X][cn][B])/ci}}}else{var w=cg.matrix||new a2,J={_:{transform:E.transform},getBBox:function(){return cg.getBBox(1)}};K[X]=[w.a,w.b,w.c,w.d,w.e,w.f],ah(J,H[X]),H[X]=J._.transform,cc[X]=[(J.matrix.a-w.a)/ci,(J.matrix.b-w.b)/ci,(J.matrix.c-w.c)/ci,(J.matrix.d-w.d)/ci,(J.matrix.e-w.e)/ci,(J.matrix.f-w.f)/ci]}break;case"csv":var cf=bE(cd[X])[bp](aC),Y=bE(K[X])[bp](aC);if("clip-rect"==X){for(K[X]=Y,cc[X]=[],cn=Y.length;cn--;){cc[X][cn]=(cf[cn]-K[X][cn])/ci}}H[X]=cf;break;default:for(cf=[][bF](cd[X]),Y=[][bF](K[X]),cc[X]=[],cn=cg.paper.customAttributes[X].length;cn--;){cc[X][cn]=((cf[cn]||0)-(Y[cn]||0))/ci
}}}}var U=cd.easing,x=aI.easing_formulas[U];if(!x){if(x=bE(U).match(bo),x&&5==x.length){var d=x;x=function(a){return aB(a,+d[1],+d[2],+d[3],+d[4],ci)}}else{x=aq}}if(ae=cd.start||Q.start||+new Date,cl={anim:Q,percent:be,timestamp:ae,start:ae+(Q.del||0),status:0,initstatus:cm||0,stop:!1,ms:ci,easing:x,from:K,diff:cc,to:H,el:cg,callback:cd.callback,prev:cj,next:ck,repeat:ar||Q.times,origin:cg.attr(),totalOrigin:W},aE.push(cl),cm&&!ch&&!P&&(cl.stop=!0,cl.start=new Date-ci*cm,1==aE.length)){return ba()}P&&(cl.start=new Date-cl.ms*cm),1==aE.length&&b2(ba)}a1("raphael.anim.start."+cg.id,cg,Q)}}function aP(a){for(var b=0;aE.length>b;b++){aE[b].el.paper==a&&aE.splice(b--,1)}}aI.version="2.1.0",aI.eve=a1;var a6,a8,aC=/[, ]+/,aT={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},bJ=/\{(\d+)\}/g,bK="hasOwnProperty",bl={doc:document,win:aG},bj={was:Object.prototype[bK].call(bl.win,"Raphael"),is:bl.win.Raphael},bM=function(){this.ca=this.customAttributes={}},bs="apply",bF="concat",bv="ontouchstart" in bl.win||bl.win.DocumentTouch&&bl.doc instanceof DocumentTouch,bu="",az=" ",bE=String,bp="split",bm="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[bp](az),by={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},aU=bE.prototype.toLowerCase,aK=Math,bG=aK.max,bq=aK.min,bh=aK.abs,bc=aK.pow,bD=aK.PI,bf="number",bd="string",bB="array",bi=Object.prototype.toString,bX=(aI._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),bb={NaN:1,Infinity:1,"-Infinity":1},bo=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,bx=aK.round,bw=parseFloat,bH=parseInt,ad=bE.prototype.toUpperCase,b8=aI._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},aQ=aI._availableAnimAttrs={blur:bf,"clip-rect":"csv",cx:bf,cy:bf,fill:"colour","fill-opacity":bf,"font-size":bf,height:bf,opacity:bf,path:"path",r:bf,rx:bf,ry:bf,stroke:"colour","stroke-opacity":bf,"stroke-width":bf,transform:"transform",width:bf,x:bf,y:bf},bz=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,bP={hs:1,rg:1},bV=/,?([achlmqrstvxz]),?/gi,aX=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,b6=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,br=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,a4=(aI._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),aJ=function(a,b){return bw(a)-bw(b)
},b4=function(){},aq=function(a){return a},an=aI._rectPath=function(b,d,c,a,f){return f?[["M",b+f,d],["l",c-2*f,0],["a",f,f,0,0,1,f,f],["l",0,a-2*f],["a",f,f,0,0,1,-f,f],["l",2*f-c,0],["a",f,f,0,0,1,-f,-f],["l",0,2*f-a],["a",f,f,0,0,1,f,-f],["z"]]:[["M",b,d],["l",c,0],["l",0,a],["l",-c,0],["z"]]},bR=function(b,d,c,a){return null==a&&(a=c),[["M",b,d],["m",0,-a],["a",c,a,0,1,1,0,2*a],["a",c,a,0,1,1,0,-2*a],["z"]]},ca=aI._getPath={path:function(a){return a.attr("path")},circle:function(a){var b=a.attrs;return bR(b.cx,b.cy,b.r)},ellipse:function(a){var b=a.attrs;return bR(b.cx,b.cy,b.rx,b.ry)},rect:function(a){var b=a.attrs;return an(b.x,b.y,b.width,b.height,b.r)},image:function(a){var b=a.attrs;return an(b.x,b.y,b.width,b.height)},text:function(a){var b=a._getBBox();return an(b.x,b.y,b.width,b.height)},set:function(a){var b=a._getBBox();return an(b.x,b.y,b.width,b.height)}},au=aI.mapPath=function(k,h){if(!h){return k}var b,g,d,j,m,c,f;for(k=ak(k),d=0,m=k.length;m>d;d++){for(f=k[d],j=1,c=f.length;
c>j;j+=2){b=h.x(f[j],f[j+1]),g=h.y(f[j],f[j+1]),f[j]=b,f[j+1]=g}}return k};if(aI._g=bl,aI.type=bl.win.SVGAngle||bl.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==aI.type){var bY,bT=bl.doc.createElement("div");if(bT.innerHTML='<v:shape adj="1"/>',bY=bT.firstChild,bY.style.behavior="url(#default#VML)",!bY||"object"!=typeof bY.adj){return aI.type=bu}bT=null}aI.svg=!(aI.vml="VML"==aI.type),aI._Paper=bM,aI.fn=a8=bM.prototype=aI.prototype,aI._id=0,aI._oid=0,aI.is=function(a,b){return b=aU.call(b),"finite"==b?!bb[bK](+a):"array"==b?a instanceof Array:"null"==b&&null===a||b==typeof a&&null!==a||"object"==b&&a===Object(a)||"array"==b&&Array.isArray&&Array.isArray(a)||bi.call(a).slice(8,-1).toLowerCase()==b},aI.angle=function(f,h,d,k,c,g){if(null==c){var j=f-d,b=h-k;return j||b?(180+180*aK.atan2(-b,-j)/bD+360)%360:0}return aI.angle(f,h,c,g)-aI.angle(d,k,c,g)},aI.rad=function(a){return a%360*bD/180},aI.deg=function(a){return 180*a/bD%360
},aI.snapTo=function(d,f,c){if(c=aI.is(c,"finite")?c:10,aI.is(d,bB)){for(var g=d.length;g--;){if(c>=bh(d[g]-f)){return d[g]}}}else{d=+d;var b=f%d;if(c>b){return f-b}if(b>d-c){return f-b+d}}return f},aI.createUUID=function(a,b){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a,b).toUpperCase()}}(/[xy]/g,function(a){var c=0|16*aK.random(),b="x"==a?c:8|3&c;return b.toString(16)}),aI.setWindow=function(a){a1("raphael.setWindow",aI,bl.win,a),bl.win=a,bl.doc=bl.win.document,aI._engine.initWin&&aI._engine.initWin(bl.win)};var bk=function(c){if(aI.vml){var f,b=/^\s+|\s+$/g;try{var h=new ActiveXObject("htmlfile");h.write("<body>"),h.close(),f=h.body}catch(d){f=createPopup().document.body}var g=f.createTextRange();bk=a7(function(e){try{f.style.color=bE(e).replace(b,bu);var i=g.queryCommandValue("ForeColor");return i=(255&i)<<16|65280&i|(16711680&i)>>>16,"#"+("000000"+i.toString(16)).slice(-6)}catch(j){return"none"}})}else{var a=bl.doc.createElement("i");a.title="Raphaël Colour Picker",a.style.display="none",bl.doc.body.appendChild(a),bk=a7(function(e){return a.style.color=e,bl.doc.defaultView.getComputedStyle(a,bu).getPropertyValue("color")
})}return bk(c)},ac=function(){return"hsb("+[this.h,this.s,this.b]+")"},aj=function(){return"hsl("+[this.h,this.s,this.l]+")"},af=function(){return this.hex},bt=function(b,c,a){if(null==c&&aI.is(b,"object")&&"r" in b&&"g" in b&&"b" in b&&(a=b.b,c=b.g,b=b.r),null==c&&aI.is(b,bd)){var d=aI.getRGB(b);b=d.r,c=d.g,a=d.b}return(b>1||c>1||a>1)&&(b/=255,c/=255,a/=255),[b,c,a]},bS=function(d,f,c,g){d*=255,f*=255,c*=255;var b={r:d,g:f,b:c,hex:aI.rgb(d,f,c),toString:af};return aI.is(g,"finite")&&(b.opacity=g),b};aI.color=function(a){var b;return aI.is(a,"object")&&"h" in a&&"s" in a&&"b" in a?(b=aI.hsb2rgb(a),a.r=b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):aI.is(a,"object")&&"h" in a&&"s" in a&&"l" in a?(b=aI.hsl2rgb(a),a.r=b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):(aI.is(a,"string")&&(a=aI.getRGB(a)),aI.is(a,"object")&&"r" in a&&"g" in a&&"b" in a?(b=aI.rgb2hsl(a),a.h=b.h,a.s=b.s,a.l=b.l,b=aI.rgb2hsb(a),a.v=b.b):(a={hex:"none"},a.r=a.g=a.b=a.h=a.s=a.v=a.l=-1)),a.toString=af,a},aI.hsb2rgb=function(k,h,b,g){this.is(k,"object")&&"h" in k&&"s" in k&&"b" in k&&(b=k.b,h=k.s,k=k.h,g=k.o),k*=360;
var d,j,m,c,f;return k=k%360/60,f=b*h,c=f*(1-bh(k%2-1)),d=j=m=b-f,k=~~k,d+=[f,c,0,0,c,f][k],j+=[c,f,f,c,0,0][k],m+=[0,0,c,f,f,c][k],bS(d,j,m,g)},aI.hsl2rgb=function(k,h,b,g){this.is(k,"object")&&"h" in k&&"s" in k&&"l" in k&&(b=k.l,h=k.s,k=k.h),(k>1||h>1||b>1)&&(k/=360,h/=100,b/=100),k*=360;var d,j,m,c,f;return k=k%360/60,f=2*h*(0.5>b?b:1-b),c=f*(1-bh(k%2-1)),d=j=m=b-f/2,k=~~k,d+=[f,c,0,0,c,f][k],j+=[c,f,f,c,0,0][k],m+=[0,0,c,f,f,c][k],bS(d,j,m,g)},aI.rgb2hsb=function(d,h,g){g=bt(d,h,g),d=g[0],h=g[1],g=g[2];var c,j,b,f;return b=bG(d,h,g),f=b-bq(d,h,g),c=0==f?null:b==d?(h-g)/f:b==h?(g-d)/f+2:(d-h)/f+4,c=60*((c+360)%6)/360,j=0==f?0:f/b,{h:c,s:j,b:b,toString:ac}},aI.rgb2hsl=function(k,h,b){b=bt(k,h,b),k=b[0],h=b[1],b=b[2];var g,d,j,m,c,f;return m=bG(k,h,b),c=bq(k,h,b),f=m-c,g=0==f?null:m==k?(h-b)/f:m==h?(b-k)/f+2:(k-h)/f+4,g=60*((g+360)%6)/360,j=(m+c)/2,d=0==f?0:0.5>j?f/(2*j):f/(2-2*j),{h:g,s:d,l:j,toString:aj}},aI._path2string=function(){return this.join(",").replace(bV,"$1")},aI._preload=function(a,c){var b=bl.doc.createElement("img");
b.style.cssText="position:absolute;left:-9999em;top:-9999em",b.onload=function(){c.call(this),this.onload=null,bl.doc.body.removeChild(this)},b.onerror=function(){bl.doc.body.removeChild(this)},bl.doc.body.appendChild(b),b.src=a},aI.getRGB=a7(function(f){if(!f||(f=bE(f)).indexOf("-")+1){return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:aH}}if("none"==f){return{r:-1,g:-1,b:-1,hex:"none",toString:aH}}!(bP[bK](f.toLowerCase().substring(0,2))||"#"==f.charAt())&&(f=bk(f));var j,d,m,c,k,b,g=f.match(bX);return g?(g[2]&&(m=bH(g[2].substring(5),16),d=bH(g[2].substring(3,5),16),j=bH(g[2].substring(1,3),16)),g[3]&&(m=bH((k=g[3].charAt(3))+k,16),d=bH((k=g[3].charAt(2))+k,16),j=bH((k=g[3].charAt(1))+k,16)),g[4]&&(b=g[4][bp](bz),j=bw(b[0]),"%"==b[0].slice(-1)&&(j*=2.55),d=bw(b[1]),"%"==b[1].slice(-1)&&(d*=2.55),m=bw(b[2]),"%"==b[2].slice(-1)&&(m*=2.55),"rgba"==g[1].toLowerCase().slice(0,4)&&(c=bw(b[3])),b[3]&&"%"==b[3].slice(-1)&&(c/=100)),g[5]?(b=g[5][bp](bz),j=bw(b[0]),"%"==b[0].slice(-1)&&(j*=2.55),d=bw(b[1]),"%"==b[1].slice(-1)&&(d*=2.55),m=bw(b[2]),"%"==b[2].slice(-1)&&(m*=2.55),("deg"==b[0].slice(-3)||"°"==b[0].slice(-1))&&(j/=360),"hsba"==g[1].toLowerCase().slice(0,4)&&(c=bw(b[3])),b[3]&&"%"==b[3].slice(-1)&&(c/=100),aI.hsb2rgb(j,d,m,c)):g[6]?(b=g[6][bp](bz),j=bw(b[0]),"%"==b[0].slice(-1)&&(j*=2.55),d=bw(b[1]),"%"==b[1].slice(-1)&&(d*=2.55),m=bw(b[2]),"%"==b[2].slice(-1)&&(m*=2.55),("deg"==b[0].slice(-3)||"°"==b[0].slice(-1))&&(j/=360),"hsla"==g[1].toLowerCase().slice(0,4)&&(c=bw(b[3])),b[3]&&"%"==b[3].slice(-1)&&(c/=100),aI.hsl2rgb(j,d,m,c)):(g={r:j,g:d,b:m,toString:aH},g.hex="#"+(16777216|m|d<<8|j<<16).toString(16).slice(1),aI.is(c,"finite")&&(g.opacity=c),g)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:aH}
},aI),aI.hsb=a7(function(b,c,a){return aI.hsb2rgb(b,c,a).hex}),aI.hsl=a7(function(b,c,a){return aI.hsl2rgb(b,c,a).hex}),aI.rgb=a7(function(a,c,b){return"#"+(16777216|b|c<<8|a<<16).toString(16).slice(1)}),aI.getColor=function(a){var c=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||0.75},b=this.hsb2rgb(c.h,c.s,c.b);return c.h+=0.075,c.h>1&&(c.h=0,c.s-=0.2,0>=c.s&&(this.getColor.start={h:0,s:1,b:c.b})),b.hex},aI.getColor.reset=function(){delete this.start},aI.parsePathString=function(b){if(!b){return null}var c=cb(b);if(c.arr){return b5(c.arr)}var a={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},d=[];return aI.is(b,bB)&&aI.is(b[0],bB)&&(d=b5(b)),d.length||bE(b).replace(aX,function(g,j,i){var f=[],h=j.toLowerCase();if(i.replace(br,function(k,l){l&&f.push(+l)}),"m"==h&&f.length>2&&(d.push([j][bF](f.splice(0,2))),h="l",j="m"==j?"l":"L"),"r"==h){d.push([j][bF](f))}else{for(;f.length>=a[h]&&(d.push([j][bF](f.splice(0,a[h]))),a[h]);){}}}),d.toString=aI._path2string,c.arr=b5(d),d},aI.parseTransformString=a7(function(a){if(!a){return null
}var b=[];return aI.is(a,bB)&&aI.is(a[0],bB)&&(b=b5(a)),b.length||bE(a).replace(b6,function(d,e,c){var f=[];aU.call(e),c.replace(br,function(g,h){h&&f.push(+h)}),b.push([e][bF](f))}),b.toString=aI._path2string,b});var cb=function(a){var b=cb.ps=cb.ps||{};return b[a]?b[a].sleep=100:b[a]={sleep:100},setTimeout(function(){for(var c in b){b[bK](c)&&c!=a&&(b[c].sleep--,!b[c].sleep&&delete b[c])}}),b[a]};aI.findDotsAtSegment=function(D,R,G,N,J,V,E,I,L){var O=1-L,B=bc(O,3),T=bc(O,2),Q=L*L,H=Q*L,S=B*D+3*T*L*G+3*O*L*L*J+H*E,P=B*R+3*T*L*N+3*O*L*L*V+H*I,q=D+2*L*(G-D)+Q*(J-2*G+D),A=R+2*L*(N-R)+Q*(V-2*N+R),j=G+2*L*(J-G)+Q*(E-2*J+G),K=N+2*L*(V-N)+Q*(I-2*V+N),U=O*D+L*G,W=O*R+L*N,z=O*J+L*E,M=O*V+L*I,F=90-180*aK.atan2(q-j,A-K)/bD;return(q>j||K>A)&&(F+=180),{x:S,y:P,m:{x:q,y:A},n:{x:j,y:K},start:{x:U,y:W},end:{x:z,y:M},alpha:F}},aI.bezierBBox=function(m,j,f,c,k,p,b,d){aI.is(m,"array")||(m=[m,j,f,c,k,p,b,d]);var g=a5.apply(null,m);return{x:g.min.x,y:g.min.y,x2:g.max.x,y2:g.max.y,width:g.max.x-g.min.x,height:g.max.y-g.min.y}
},aI.isPointInsideBBox=function(a,c,b){return c>=a.x&&a.x2>=c&&b>=a.y&&a.y2>=b},aI.isBBoxIntersect=function(b,c){var a=aI.isPointInsideBBox;return a(c,b.x,b.y)||a(c,b.x2,b.y)||a(c,b.x,b.y2)||a(c,b.x2,b.y2)||a(b,c.x,c.y)||a(b,c.x2,c.y)||a(b,c.x,c.y2)||a(b,c.x2,c.y2)||(b.x<c.x2&&b.x>c.x||c.x<b.x2&&c.x>b.x)&&(b.y<c.y2&&b.y>c.y||c.y<b.y2&&c.y>b.y)},aI.pathIntersection=function(a,b){return aM(a,b)},aI.pathIntersectionNumber=function(a,b){return aM(a,b,1)},aI.isPointInsidePath=function(b,c,a){var d=aI.pathBBox(b);return aI.isPointInsideBBox(d,c,a)&&1==aM(b,[["M",c,a],["H",d.x2+10]],1)%2},aI._removedFactory=function(a){return function(){a1("raphael.log",null,"Raphaël: you are calling to method “"+a+"” of removed object",a)}};var bZ=aI.pathBBox=function(G){var z=cb(G);if(z.bbox){return aV(z.bbox)}if(!G){return{x:0,y:0,width:0,height:0,x2:0,y2:0}}G=ak(G);for(var b,k=0,D=0,H=[],j=[],m=0,q=G.length;q>m;m++){if(b=G[m],"M"==b[0]){k=b[1],D=b[2],H.push(k),j.push(D)}else{var F=a5(k,D,b[1],b[2],b[3],b[4],b[5],b[6]);
H=H[bF](F.min.x,F.max.x),j=j[bF](F.min.y,F.max.y),k=b[5],D=b[6]}}var B=bq[bs](0,H),y=bq[bs](0,j),i=bG[bs](0,H),A=bG[bs](0,j),w=i-B,C=A-y,E={x:B,y:y,x2:i,y2:A,width:w,height:C,cx:B+w/2,cy:y+C/2};return z.bbox=aV(E),E},b5=function(a){var b=aV(a);return b.toString=aI._path2string,b},bW=aI._pathToRelative=function(G){var z=cb(G);if(z.rel){return b5(z.rel)}aI.is(G,bB)&&aI.is(G&&G[0],bB)||(G=aI.parsePathString(G));var q=[],k=0,D=0,H=0,j=0,m=0;"M"==G[0][0]&&(k=G[0][1],D=G[0][2],H=k,j=D,m++,q.push(["M",k,D]));for(var r=m,F=G.length;F>r;r++){var B=q[r]=[],y=G[r];if(y[0]!=aU.call(y[0])){switch(B[0]=aU.call(y[0]),B[0]){case"a":B[1]=y[1],B[2]=y[2],B[3]=y[3],B[4]=y[4],B[5]=y[5],B[6]=+(y[6]-k).toFixed(3),B[7]=+(y[7]-D).toFixed(3);break;case"v":B[1]=+(y[1]-D).toFixed(3);break;case"m":H=y[1],j=y[2];default:for(var b=1,A=y.length;A>b;b++){B[b]=+(y[b]-(b%2?k:D)).toFixed(3)}}}else{B=q[r]=[],"m"==y[0]&&(H=y[1]+k,j=y[2]+D);for(var w=0,C=y.length;C>w;w++){q[r][w]=y[w]}}var E=q[r].length;switch(q[r][0]){case"z":k=H,D=j;
break;case"h":k+=+q[r][E-1];break;case"v":D+=+q[r][E-1];break;default:k+=+q[r][E-2],D+=+q[r][E-1]}}return q.toString=aI._path2string,z.rel=b5(q),q},ap=aI._pathToAbsolute=function(q){var G=cb(q);if(G.abs){return b5(G.abs)}if(aI.is(q,bB)&&aI.is(q&&q[0],bB)||(q=aI.parsePathString(q)),!q||!q.length){return[["M",0,0]]}var C=[],z=0,J=0,r=0,B=0,D=0;"M"==q[0][0]&&(z=+q[0][1],J=+q[0][2],r=z,B=J,D++,C[0]=["M",z,J]);for(var o,I,F=3==q.length&&"M"==q[0][0]&&"R"==q[1][0].toUpperCase()&&"Z"==q[2][0].toUpperCase(),w=D,H=q.length;H>w;w++){if(C.push(o=[]),I=q[w],I[0]!=ad.call(I[0])){switch(o[0]=ad.call(I[0]),o[0]){case"A":o[1]=I[1],o[2]=I[2],o[3]=I[3],o[4]=I[4],o[5]=I[5],o[6]=+(I[6]+z),o[7]=+(I[7]+J);break;case"V":o[1]=+I[1]+J;break;case"H":o[1]=+I[1]+z;break;case"R":for(var E=[z,J][bF](I.slice(1)),j=2,k=E.length;k>j;j++){E[j]=+E[j]+z,E[++j]=+E[j]+J}C.pop(),C=C[bF](aN(E,F));break;case"M":r=+I[1]+z,B=+I[2]+J;default:for(j=1,k=I.length;k>j;j++){o[j]=+I[j]+(j%2?z:J)}}}else{if("R"==I[0]){E=[z,J][bF](I.slice(1)),C.pop(),C=C[bF](aN(E,F)),o=["R"][bF](I.slice(-2))
}else{for(var b=0,A=I.length;A>b;b++){o[b]=I[b]}}}switch(o[0]){case"Z":z=r,J=B;break;case"H":z=o[1];break;case"V":J=o[1];break;case"M":r=o[o.length-2],B=o[o.length-1];default:z=o[o.length-2],J=o[o.length-1]}}return C.toString=aI._path2string,G.abs=b5(C),C},ai=function(b,d,c,a){return[b,d,c,a,c,a]},b9=function(d,h,g,c,k,b){var f=1/3,j=2/3;return[f*d+j*g,f*h+j*c,f*k+j*g,f*b+j*c,k,b]},bN=function(cn,cB,cp,cx,cs,co,cr,cu,cy,cm){var cD,cA=120*bD/180,cq=bD/180*(+cs||0),cC=[],cz=a7(function(c,f,d){var b=c*aK.cos(d)-f*aK.sin(d),g=c*aK.sin(d)+f*aK.cos(d);return{x:b,y:g}});if(cm){ce=cm[0],cf=cm[1],ck=cm[2],cv=cm[3]}else{cD=cz(cn,cB,-cq),cn=cD.x,cB=cD.y,cD=cz(cu,cy,-cq),cu=cD.x,cy=cD.y;var cj=(aK.cos(bD/180*cs),aK.sin(bD/180*cs),(cn-cu)/2),cl=(cB-cy)/2,ci=cj*cj/(cp*cp)+cl*cl/(cx*cx);ci>1&&(ci=aK.sqrt(ci),cp=ci*cp,cx=ci*cx);var ct=cp*cp,cE=cx*cx,cF=(co==cr?-1:1)*aK.sqrt(bh((ct*cE-ct*cl*cl-cE*cj*cj)/(ct*cl*cl+cE*cj*cj))),ck=cF*cp*cl/cx+(cn+cu)/2,cv=cF*-cx*cj/cp+(cB+cy)/2,ce=aK.asin(((cB-cv)/cx).toFixed(9)),cf=aK.asin(((cy-cv)/cx).toFixed(9));
ce=ck>cn?bD-ce:ce,cf=ck>cu?bD-cf:cf,0>ce&&(ce=2*bD+ce),0>cf&&(cf=2*bD+cf),cr&&ce>cf&&(ce-=2*bD),!cr&&cf>ce&&(cf-=2*bD)}var K=cf-ce;if(bh(K)>cA){var J=cf,cg=cu,V=cy;cf=ce+cA*(cr&&cf>ce?1:-1),cu=ck+cp*aK.cos(cf),cy=cv+cx*aK.sin(cf),cC=bN(cu,cy,cp,cx,cs,0,cr,cg,V,[cf,J,ck,cv])}K=cf-ce;var ae=aK.cos(ce),Z=aK.sin(ce),ch=aK.cos(cf),cc=aK.sin(cf),P=aK.tan(K/4),ar=4/3*cp*P,cw=4/3*cx*P,cd=[cn,cB],Q=[cn+ar*Z,cB-cw*ae],a=[cu+ar*cc,cy-cw*ch],E=[cu,cy];if(Q[0]=2*cd[0]-Q[0],Q[1]=2*cd[1]-Q[1],cm){return[Q,a,E][bF](cC)}cC=[Q,a,E][bF](cC).join()[bp](",");for(var q=[],be=0,G=cC.length;G>be;be++){q[be]=be%2?cz(cC[be-1],cC[be],cq).y:cz(cC[be],cC[be+1],cq).x}return q},ag=function(p,k,b,g,d,m,q,c,f){var j=1-f;return{x:bc(j,3)*p+3*bc(j,2)*f*b+3*j*f*f*d+bc(f,3)*q,y:bc(j,3)*k+3*bc(j,2)*f*g+3*j*f*f*m+bc(f,3)*c}},a5=a7(function(E,z,b,v,m,C,F,k){var q,w=m-2*b+E-(F-2*m+b),D=2*(b-E)-2*(m-b),B=E-b,y=(-D+aK.sqrt(D*D-4*w*B))/2/w,j=(-D-aK.sqrt(D*D-4*w*B))/2/w,A=[z,k],x=[E,F];return bh(y)>"1e12"&&(y=0.5),bh(j)>"1e12"&&(j=0.5),y>0&&1>y&&(q=ag(E,z,b,v,m,C,F,k,y),x.push(q.x),A.push(q.y)),j>0&&1>j&&(q=ag(E,z,b,v,m,C,F,k,j),x.push(q.x),A.push(q.y)),w=C-2*v+z-(k-2*C+v),D=2*(v-z)-2*(C-v),B=z-v,y=(-D+aK.sqrt(D*D-4*w*B))/2/w,j=(-D-aK.sqrt(D*D-4*w*B))/2/w,bh(y)>"1e12"&&(y=0.5),bh(j)>"1e12"&&(j=0.5),y>0&&1>y&&(q=ag(E,z,b,v,m,C,F,k,y),x.push(q.x),A.push(q.y)),j>0&&1>j&&(q=ag(E,z,b,v,m,C,F,k,j),x.push(q.x),A.push(q.y)),{min:{x:bq[bs](0,x),y:bq[bs](0,A)},max:{x:bG[bs](0,x),y:bG[bs](0,A)}}
}),ak=aI._path2curve=a7(function(E,z){var b=!z&&cb(E);if(!z&&b.curve){return b5(b.curve)}for(var v=ap(E),m=z&&ap(z),C={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},F={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k=(function(c,f){var d,a;if(!c){return["C",f.x,f.y,f.x,f.y,f.x,f.y]}switch(!(c[0] in {T:1,Q:1})&&(f.qx=f.qy=null),c[0]){case"M":f.X=c[1],f.Y=c[2];break;case"A":c=["C"][bF](bN[bs](0,[f.x,f.y][bF](c.slice(1))));break;case"S":d=f.x+(f.x-(f.bx||f.x)),a=f.y+(f.y-(f.by||f.y)),c=["C",d,a][bF](c.slice(1));break;case"T":f.qx=f.x+(f.x-(f.qx||f.x)),f.qy=f.y+(f.y-(f.qy||f.y)),c=["C"][bF](b9(f.x,f.y,f.qx,f.qy,c[1],c[2]));break;case"Q":f.qx=c[1],f.qy=c[2],c=["C"][bF](b9(f.x,f.y,c[1],c[2],c[3],c[4]));break;case"L":c=["C"][bF](ai(f.x,f.y,c[1],c[2]));break;case"H":c=["C"][bF](ai(f.x,f.y,c[1],f.y));break;case"V":c=["C"][bF](ai(f.x,f.y,f.x,c[1]));break;case"Z":c=["C"][bF](ai(f.x,f.y,f.X,f.Y))}return c}),q=function(a,d){if(a[d].length>7){a[d].shift();for(var c=a[d];c.length;){a.splice(d++,0,["C"][bF](c.splice(0,6)))
}a.splice(d,1),B=bG(v.length,m&&m.length||0)}},w=function(d,h,g,c,f){d&&h&&"M"==d[f][0]&&"M"!=h[f][0]&&(h.splice(f,0,["M",c.x,c.y]),g.bx=0,g.by=0,g.x=d[f][1],g.y=d[f][2],B=bG(v.length,m&&m.length||0))},D=0,B=bG(v.length,m&&m.length||0);B>D;D++){v[D]=k(v[D],C),q(v,D),m&&(m[D]=k(m[D],F)),m&&q(m,D),w(v,m,C,F,D),w(m,v,F,C,D);var y=v[D],j=m&&m[D],A=y.length,x=m&&j.length;C.x=y[A-2],C.y=y[A-1],C.bx=bw(y[A-4])||C.x,C.by=bw(y[A-3])||C.y,F.bx=m&&(bw(j[x-4])||F.x),F.by=m&&(bw(j[x-3])||F.y),F.x=m&&j[x-2],F.y=m&&j[x-1]}return m||(b.curve=b5(v)),m?[v,m]:v},null,b5),bA=(aI._parseDots=a7(function(p){for(var j=[],f=0,c=p.length;c>f;f++){var k={},q=p[f].match(/^([^:]*):?([\d\.]*)/);if(k.color=aI.getRGB(q[1]),k.color.error){return null}k.color=k.color.hex,q[2]&&(k.offset=q[2]+"%"),j.push(k)}for(f=1,c=j.length-1;c>f;f++){if(!j[f].offset){for(var b=bw(j[f-1].offset||0),d=0,g=f+1;c>g;g++){if(j[g].offset){d=j[g].offset;break}}d||(d=100,g=c),d=bw(d);for(var m=(d-b)/(g-f+1);g>f;f++){b+=m,j[f].offset=b+"%"}}}return j
}),aI._tear=function(a,b){a==b.top&&(b.top=a.prev),a==b.bottom&&(b.bottom=a.next),a.next&&(a.next.prev=a.prev),a.prev&&(a.prev.next=a.next)}),ao=(aI._tofront=function(a,b){b.top!==a&&(bA(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a)},aI._toback=function(a,b){b.bottom!==a&&(bA(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a)},aI._insertafter=function(a,c,b){bA(a,b),c==b.top&&(b.top=a),c.next&&(c.next.prev=a),a.next=c.next,a.prev=c,c.next=a},aI._insertbefore=function(a,c,b){bA(a,b),c==b.bottom&&(b.bottom=a),c.prev&&(c.prev.next=a),a.prev=c.prev,c.prev=a,a.next=c},aI.toMatrix=function(b,d){var c=bZ(b),a={_:{transform:bu},getBBox:function(){return c}};return ah(a,d),a.matrix}),ah=(aI.transformPath=function(a,b){return au(a,ao(a,b))},aI._extractTransform=function(A,M){if(null==M){return A._.transform}M=bE(M).replace(/\.{3}|\u2026/g,A._.transform||bu);var I=aI.parseTransformString(M),E=0,P=0,B=0,D=1,G=1,J=A._,z=new a2;if(J.transform=I||[],I){for(var N=0,L=I.length;L>N;N++){var C,K,j,r,d,F=I[N],O=F.length,Q=bE(F[0]).toLowerCase(),q=F[0]!=Q,H=q?z.invert():0;
"t"==Q&&3==O?q?(C=H.x(0,0),K=H.y(0,0),j=H.x(F[1],F[2]),r=H.y(F[1],F[2]),z.translate(j-C,r-K)):z.translate(F[1],F[2]):"r"==Q?2==O?(d=d||A.getBBox(1),z.rotate(F[1],d.x+d.width/2,d.y+d.height/2),E+=F[1]):4==O&&(q?(j=H.x(F[2],F[3]),r=H.y(F[2],F[3]),z.rotate(F[1],j,r)):z.rotate(F[1],F[2],F[3]),E+=F[1]):"s"==Q?2==O||3==O?(d=d||A.getBBox(1),z.scale(F[1],F[O-1],d.x+d.width/2,d.y+d.height/2),D*=F[1],G*=F[O-1]):5==O&&(q?(j=H.x(F[3],F[4]),r=H.y(F[3],F[4]),z.scale(F[1],F[2],j,r)):z.scale(F[1],F[2],F[3],F[4]),D*=F[1],G*=F[2]):"m"==Q&&7==O&&z.add(F[1],F[2],F[3],F[4],F[5],F[6]),J.dirtyT=1,A.matrix=z}}A.matrix=z,J.sx=D,J.sy=G,J.deg=E,J.dx=P=z.e,J.dy=B=z.f,1==D&&1==G&&!E&&J.bbox?(J.bbox.x+=+P,J.bbox.y+=+B):J.dirtyT=1}),aR=function(a){var b=a[0];switch(b.toLowerCase()){case"t":return[b,0,0];case"m":return[b,1,0,0,1,0,0];case"r":return 4==a.length?[b,0,a[2],a[3]]:[b,0];case"s":return 5==a.length?[b,1,1,a[3],a[4]]:3==a.length?[b,1,1]:[b,1]}},bI=aI._equaliseTransform=function(p,j){j=bE(j).replace(/\.{3}|\u2026/g,p),p=aI.parseTransformString(p)||[],j=aI.parseTransformString(j)||[];
for(var f,c,k,q,b=bG(p.length,j.length),d=[],g=[],m=0;b>m;m++){if(k=p[m]||aR(j[m]),q=j[m]||aR(k),k[0]!=q[0]||"r"==k[0].toLowerCase()&&(k[2]!=q[2]||k[3]!=q[3])||"s"==k[0].toLowerCase()&&(k[3]!=q[3]||k[4]!=q[4])){return}for(d[m]=[],g[m]=[],f=0,c=bG(k.length,q.length);c>f;f++){f in k&&(d[m][f]=k[f]),f in q&&(g[m][f]=q[f])}}return{from:d,to:g}};aI._getContainer=function(d,f,c,g){var b;return b=null!=g||aI.is(d,"object")?d:bl.doc.getElementById(d),null!=b?b.tagName?null==f?{container:b,width:b.style.pixelWidth||b.offsetWidth,height:b.style.pixelHeight||b.offsetHeight}:{container:b,width:f,height:c}:{container:1,x:d,y:f,width:c,height:g}:void 0},aI.pathToRelative=bW,aI._engine={},aI.path2curve=ak,aI.matrix=function(d,g,f,c,h,b){return new a2(d,g,f,c,h,b)},function(b){function c(d){return d[0]*d[0]+d[1]*d[1]}function a(d){var e=aK.sqrt(c(d));d[0]&&(d[0]/=e),d[1]&&(d[1]/=e)}b.add=function(z,v,d,m,j,x){var A,g,k,p,y=[[],[],[]],w=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],q=[[z,d,j],[v,m,x],[0,0,1]];
for(z&&z instanceof a2&&(q=[[z.a,z.c,z.e],[z.b,z.d,z.f],[0,0,1]]),A=0;3>A;A++){for(g=0;3>g;g++){for(p=0,k=0;3>k;k++){p+=w[A][k]*q[k][g]}y[A][g]=p}}this.a=y[0][0],this.b=y[1][0],this.c=y[0][1],this.d=y[1][1],this.e=y[0][2],this.f=y[1][2]},b.invert=function(){var d=this,f=d.a*d.d-d.b*d.c;return new a2(d.d/f,-d.b/f,-d.c/f,d.a/f,(d.c*d.f-d.d*d.e)/f,(d.b*d.e-d.a*d.f)/f)},b.clone=function(){return new a2(this.a,this.b,this.c,this.d,this.e,this.f)},b.translate=function(d,f){this.add(1,0,0,1,d,f)},b.scale=function(f,h,g,d){null==h&&(h=f),(g||d)&&this.add(1,0,0,1,g,d),this.add(f,0,0,h,0,0),(g||d)&&this.add(1,0,0,1,-g,-d)},b.rotate=function(g,h,f){g=aI.rad(g),h=h||0,f=f||0;var j=+aK.cos(g).toFixed(9),d=+aK.sin(g).toFixed(9);this.add(j,d,-d,j,h,f),this.add(1,0,0,1,-h,-f)},b.x=function(d,f){return d*this.a+f*this.c+this.e},b.y=function(d,f){return d*this.b+f*this.d+this.f},b.get=function(d){return +this[bE.fromCharCode(97+d)].toFixed(4)},b.toString=function(){return aI.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()
},b.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},b.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},b.split=function(){var e={};e.dx=this.e,e.dy=this.f;var g=[[this.a,this.c],[this.b,this.d]];e.scalex=aK.sqrt(c(g[0])),a(g[0]),e.shear=g[0][0]*g[1][0]+g[0][1]*g[1][1],g[1]=[g[1][0]-g[0][0]*e.shear,g[1][1]-g[0][1]*e.shear],e.scaley=aK.sqrt(c(g[1])),a(g[1]),e.shear/=e.scaley;var d=-g[0][1],f=g[1][1];return 0>f?(e.rotate=aI.deg(aK.acos(f)),0>d&&(e.rotate=360-e.rotate)):e.rotate=aI.deg(aK.asin(d)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},b.toTransformString=function(d){var f=d||this[bp]();return f.isSimple?(f.scalex=+f.scalex.toFixed(4),f.scaley=+f.scaley.toFixed(4),f.rotate=+f.rotate.toFixed(4),(f.dx||f.dy?"t"+[f.dx,f.dy]:bu)+(1!=f.scalex||1!=f.scaley?"s"+[f.scalex,f.scaley,0,0]:bu)+(f.rotate?"r"+[f.rotate,0,0]:bu)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]
}}(a2.prototype);var a9=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);a8.safari="Apple Computer, Inc."==navigator.vendor&&(a9&&4>a9[1]||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&a9&&8>a9[1]?function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:b4;for(var ab=function(){this.returnValue=!1},b7=function(){return this.originalEvent.preventDefault()},ax=function(){this.cancelBubble=!0},al=function(){return this.originalEvent.stopPropagation()},bU=function(){return bl.doc.addEventListener?function(d,g,f,c){var h=bv&&by[g]?by[g]:g,b=function(r){var i=bl.doc.documentElement.scrollTop||bl.doc.body.scrollTop,m=bl.doc.documentElement.scrollLeft||bl.doc.body.scrollLeft,p=r.clientX+m,e=r.clientY+i;if(bv&&by[bK](g)){for(var k=0,j=r.targetTouches&&r.targetTouches.length;j>k;k++){if(r.targetTouches[k].target==d){var q=r;r=r.targetTouches[k],r.originalEvent=q,r.preventDefault=b7,r.stopPropagation=al;
break}}}return f.call(c,r,p,e)};return d.addEventListener(h,b,!1),function(){return d.removeEventListener(h,b,!1),!0}}:bl.doc.attachEvent?function(d,g,f,c){var h=function(j){j=j||bl.win.event;var l=bl.doc.documentElement.scrollTop||bl.doc.body.scrollTop,m=bl.doc.documentElement.scrollLeft||bl.doc.body.scrollLeft,i=j.clientX+m,k=j.clientY+l;return j.preventDefault=j.preventDefault||ab,j.stopPropagation=j.stopPropagation||ax,f.call(c,j,i,k)};d.attachEvent("on"+g,h);var b=function(){return d.detachEvent("on"+g,h),!0};return b}:void 0}(),bO=[],bC=function(A){for(var b,m=A.clientX,j=A.clientY,y=bl.doc.documentElement.scrollTop||bl.doc.body.scrollTop,B=bl.doc.documentElement.scrollLeft||bl.doc.body.scrollLeft,g=bO.length;g--;){if(b=bO[g],bv){for(var k,q=A.touches.length;q--;){if(k=A.touches[q],k.identifier==b.el._drag.id){m=k.clientX,j=k.clientY,(A.originalEvent?A.originalEvent:A).preventDefault();break}}}else{A.preventDefault()}var z,x=b.el.node,v=x.nextSibling,e=x.parentNode,w=x.style.display;
bl.win.opera&&e.removeChild(x),x.style.display="none",z=b.el.paper.getElementByPoint(m,j),x.style.display=w,bl.win.opera&&(v?e.insertBefore(x,v):e.appendChild(x)),z&&a1("raphael.drag.over."+b.el.id,b.el,z),m+=B,j+=y,a1("raphael.drag.move."+b.el.id,b.move_scope||b.el,m-b.el._drag.x,j-b.el._drag.y,m,j,A)}},b1=function(b){aI.unmousemove(bC).unmouseup(b1);for(var a,c=bO.length;c--;){a=bO[c],a.el._drag={},a1("raphael.drag.end."+a.el.id,a.end_scope||a.start_scope||a.move_scope||a.el,b)}bO=[]},av=aI.el={},aY=bm.length;aY--;){(function(a){aI[a]=av[a]=function(c,b){return aI.is(c,"function")&&(this.events=this.events||[],this.events.push({name:a,f:c,unbind:bU(this.shape||this.node||bl.doc,a,c,b||this)})),this},aI["un"+a]=av["un"+a]=function(c){for(var b=this.events||[],d=b.length;d--;){b[d].name!=a||!aI.is(c,"undefined")&&b[d].f!=c||(b[d].unbind(),b.splice(d,1),!b.length&&delete this.events)}return this}})(bm[aY])}av.data=function(d,c){var e=a4[this.id]=a4[this.id]||{};if(0==arguments.length){return e
}if(1==arguments.length){if(aI.is(d,"object")){for(var b in d){d[bK](b)&&this.data(b,d[b])}return this}return a1("raphael.data.get."+this.id,this,e[d],d),e[d]}return e[d]=c,a1("raphael.data.set."+this.id,this,c,d),this},av.removeData=function(a){return null==a?a4[this.id]={}:a4[this.id]&&delete a4[this.id][a],this},av.getData=function(){return aV(a4[this.id]||{})},av.hover=function(b,d,c,a){return this.mouseover(b,c).mouseout(d,a||c)},av.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var at=[];av.drag=function(e,d,h,c,f,g){function b(a){(a.originalEvent||a).preventDefault();var j=bl.doc.documentElement.scrollTop||bl.doc.body.scrollTop,i=bl.doc.documentElement.scrollLeft||bl.doc.body.scrollLeft;this._drag.x=a.clientX+i,this._drag.y=a.clientY+j,this._drag.id=a.identifier,!bO.length&&aI.mousemove(bC).mouseup(b1),bO.push({el:this,move_scope:c,start_scope:f,end_scope:g}),d&&a1.on("raphael.drag.start."+this.id,d),e&&a1.on("raphael.drag.move."+this.id,e),h&&a1.on("raphael.drag.end."+this.id,h),a1("raphael.drag.start."+this.id,f||c||this,a.clientX+i,a.clientY+j,a)
}return this._drag={},at.push({el:this,start:b}),this.mousedown(b),this},av.onDragOver=function(a){a?a1.on("raphael.drag.over."+this.id,a):a1.unbind("raphael.drag.over."+this.id)},av.undrag=function(){for(var a=at.length;a--;){at[a].el==this&&(this.unmousedown(at[a].start),at.splice(a,1),a1.unbind("raphael.drag.*."+this.id))}!at.length&&aI.unmousemove(bC).unmouseup(b1),bO=[]},a8.circle=function(b,c,a){var d=aI._engine.circle(this,b||0,c||0,a||0);return this.__set__&&this.__set__.push(d),d},a8.rect=function(d,g,c,h,b){var f=aI._engine.rect(this,d||0,g||0,c||0,h||0,b||0);return this.__set__&&this.__set__.push(f),f},a8.ellipse=function(d,f,c,g){var b=aI._engine.ellipse(this,d||0,f||0,c||0,g||0);return this.__set__&&this.__set__.push(b),b},a8.path=function(a){a&&!aI.is(a,bd)&&!aI.is(a[0],bB)&&(a+=bu);var b=aI._engine.path(aI.format[bs](aI,arguments),this);return this.__set__&&this.__set__.push(b),b},a8.image=function(d,g,c,h,b){var f=aI._engine.image(this,d||"about:blank",g||0,c||0,h||0,b||0);
return this.__set__&&this.__set__.push(f),f},a8.text=function(b,c,a){var d=aI._engine.text(this,b||0,c||0,bE(a));return this.__set__&&this.__set__.push(d),d},a8.set=function(a){!aI.is(a,"array")&&(a=Array.prototype.splice.call(arguments,0,arguments.length));var b=new aw(a);return this.__set__&&this.__set__.push(b),b.paper=this,b.type="set",b},a8.setStart=function(a){this.__set__=a||this.set()},a8.setFinish=function(){var a=this.__set__;return delete this.__set__,a},a8.setSize=function(a,b){return aI._engine.setSize.call(this,a,b)},a8.setViewBox=function(d,f,c,g,b){return aI._engine.setViewBox.call(this,d,f,c,g,b)},a8.top=a8.bottom=null,a8.raphael=aI;var bn=function(k){var h=k.getBoundingClientRect(),b=k.ownerDocument,g=b.body,d=b.documentElement,j=d.clientTop||g.clientTop||0,m=d.clientLeft||g.clientLeft||0,c=h.top+(bl.win.pageYOffset||d.scrollTop||g.scrollTop)-j,f=h.left+(bl.win.pageXOffset||d.scrollLeft||g.scrollLeft)-m;return{y:c,x:f}};a8.getElementByPoint=function(d,h){var g=this,c=g.canvas,k=bl.doc.elementFromPoint(d,h);
if(bl.win.opera&&"svg"==k.tagName){var b=bn(c),f=c.createSVGRect();f.x=d-b.x,f.y=h-b.y,f.width=f.height=1;var j=c.getIntersectionList(f,null);j.length&&(k=j[j.length-1])}if(!k){return null}for(;k.parentNode&&k!=c.parentNode&&!k.raphael;){k=k.parentNode}return k==g.canvas.parentNode&&(k=c),k=k&&k.raphael?g.getById(k.raphaelid):null},a8.getElementsByBBox=function(a){var b=this.set();return this.forEach(function(c){aI.isBBoxIntersect(c.getBBox(),a)&&b.push(c)}),b},a8.getById=function(a){for(var b=this.bottom;b;){if(b.id==a){return b}b=b.next}return null},a8.forEach=function(a,c){for(var b=this.bottom;b;){if(a.call(c,b)===!1){return this}b=b.next}return this},a8.getElementsByPoint=function(a,c){var b=this.set();return this.forEach(function(d){d.isPointInside(a,c)&&b.push(d)}),b},av.isPointInside=function(b,c){var a=this.realPath=this.realPath||ca[this.type](this);return aI.isPointInsidePath(a,b,c)},av.getBBox=function(a){if(this.removed){return{}}var b=this._;return a?((b.dirty||!b.bboxwt)&&(this.realPath=ca[this.type](this),b.bboxwt=bZ(this.realPath),b.bboxwt.toString=aZ,b.dirty=0),b.bboxwt):((b.dirty||b.dirtyT||!b.bbox)&&((b.dirty||!this.realPath)&&(b.bboxwt=0,this.realPath=ca[this.type](this)),b.bbox=bZ(au(this.realPath,this.matrix)),b.bbox.toString=aZ,b.dirty=b.dirtyT=0),b.bbox)
},av.clone=function(){if(this.removed){return null}var a=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(a),a},av.glow=function(d){if("text"==this.type){return null}d=d||{};var h={width:(d.width||10)+(+this.attr("stroke-width")||1),fill:d.fill||!1,opacity:d.opacity||0.5,offsetx:d.offsetx||0,offsety:d.offsety||0,color:d.color||"#000"},g=h.width/2,c=this.paper,j=c.set(),b=this.realPath||ca[this.type](this);b=this.matrix?au(b,this.matrix):b;for(var f=1;g+1>f;f++){j.push(c.path(b).attr({stroke:h.color,fill:h.fill?h.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(h.width/g*f).toFixed(3),opacity:+(h.opacity/g).toFixed(3)}))}return j.insertBefore(this).translate(h.offsetx,h.offsety)};var aa=function(m,h,g,d,k,p,b,f,j){return null==j?aW(m,h,g,d,k,p,b,f):aI.findDotsAtSegment(m,h,g,d,k,p,b,f,aF(m,h,g,d,k,p,b,f,j))},b3=function(a,b){return function(q,k,y){q=ak(q);for(var A,j,m,r,z,x="",v={},e=0,w=0,t=q.length;t>w;w++){if(m=q[w],"M"==m[0]){A=+m[1],j=+m[2]
}else{if(r=aa(A,j,m[1],m[2],m[3],m[4],m[5],m[6]),e+r>k){if(b&&!v.start){if(z=aa(A,j,m[1],m[2],m[3],m[4],m[5],m[6],k-e),x+=["C"+z.start.x,z.start.y,z.m.x,z.m.y,z.x,z.y],y){return x}v.start=x,x=["M"+z.x,z.y+"C"+z.n.x,z.n.y,z.end.x,z.end.y,m[5],m[6]].join(),e+=r,A=+m[5],j=+m[6];continue}if(!a&&!b){return z=aa(A,j,m[1],m[2],m[3],m[4],m[5],m[6],k-e),{x:z.x,y:z.y,alpha:z.alpha}}}e+=r,A=+m[5],j=+m[6]}x+=m.shift()+m}return v.end=x,z=a?e:b?v:aI.findDotsAtSegment(A,j,m[0],m[1],m[2],m[3],m[4],m[5],1),z.alpha&&(z={x:z.x,y:z.y,alpha:z.alpha}),z}},ay=b3(1),bg=b3(),bL=b3(0,1);aI.getTotalLength=ay,aI.getPointAtLength=bg,aI.getSubpath=function(b,d,c){if(0.000001>this.getTotalLength(b)-c){return bL(b,d).end}var a=bL(b,c,1);return d?bL(a,d).end:a},av.getTotalLength=function(){return"path"==this.type?this.node.getTotalLength?this.node.getTotalLength():ay(this.attrs.path):void 0},av.getPointAtLength=function(a){return"path"==this.type?bg(this.attrs.path,a):void 0},av.getSubpath=function(a,b){return"path"==this.type?aI.getSubpath(this.attrs.path,a,b):void 0
};var bQ=aI.easing_formulas={linear:function(a){return a},"<":function(a){return bc(a,1.7)},">":function(a){return bc(a,0.48)},"<>":function(d){var h=0.48-d/1.04,g=aK.sqrt(0.1734+h*h),c=g-h,k=bc(bh(c),1/3)*(0>c?-1:1),b=-g-h,f=bc(bh(b),1/3)*(0>b?-1:1),j=k+f+0.5;return 3*(1-j)*j*j+j*j*j},backIn:function(a){var b=1.70158;return a*a*((b+1)*a-b)},backOut:function(a){a-=1;var b=1.70158;return a*a*((b+1)*a+b)+1},elastic:function(a){return a==!!a?a:bc(2,-10*a)*aK.sin((a-0.075)*2*bD/0.3)+1},bounce:function(b){var d,c=7.5625,a=2.75;return 1/a>b?d=c*b*b:2/a>b?(b-=1.5/a,d=c*b*b+0.75):2.5/a>b?(b-=2.25/a,d=c*b*b+0.9375):(b-=2.625/a,d=c*b*b+0.984375),d}};bQ.easeIn=bQ["ease-in"]=bQ["<"],bQ.easeOut=bQ["ease-out"]=bQ[">"],bQ.easeInOut=bQ["ease-in-out"]=bQ["<>"],bQ["back-in"]=bQ.backIn,bQ["back-out"]=bQ.backOut;var aE=[],b2=aG.requestAnimationFrame||aG.webkitRequestAnimationFrame||aG.mozRequestAnimationFrame||aG.oRequestAnimationFrame||aG.msRequestAnimationFrame||function(a){setTimeout(a,16)},ba=function(){for(var y=+new Date,I=0;
aE.length>I;I++){var E=aE[I];if(!E.el.removed&&!E.paused){var P,z,D=y-E.start,G=E.ms,J=E.easing,r=E.from,N=E.diff,L=E.to,B=(E.t,E.el),M={},K={};if(E.initstatus?(D=(E.initstatus*E.anim.top-E.prev)/(E.percent-E.prev)*G,E.status=E.initstatus,delete E.initstatus,E.stop&&aE.splice(I--,1)):E.status=(E.prev+(E.percent-E.prev)*(D/G))/E.anim.top,!(0>D)){if(G>D){var e=J(D/G);for(var q in r){if(r[bK](q)){switch(aQ[q]){case bf:P=+r[q]+e*G*N[q];break;case"colour":P="rgb("+[aL(bx(r[q].r+e*G*N[q].r)),aL(bx(r[q].g+e*G*N[q].g)),aL(bx(r[q].b+e*G*N[q].b))].join(",")+")";break;case"path":P=[];for(var F=0,O=r[q].length;O>F;F++){P[F]=[r[q][F][0]];for(var Q=1,j=r[q][F].length;j>Q;Q++){P[F][Q]=+r[q][F][Q]+e*G*N[q][F][Q]}P[F]=P[F].join(az)}P=P.join(az);break;case"transform":if(N[q].real){for(P=[],F=0,O=r[q].length;O>F;F++){for(P[F]=[r[q][F][0]],Q=1,j=r[q][F].length;j>Q;Q++){P[F][Q]=r[q][F][Q]+e*G*N[q][F][Q]}}}else{var H=function(a){return +r[q][a]+e*G*N[q][a]};P=[["m",H(0),H(1),H(2),H(3),H(4),H(5)]]}break;case"csv":if("clip-rect"==q){for(P=[],F=4;
F--;){P[F]=+r[q][F]+e*G*N[q][F]}}break;default:var A=[][bF](r[q]);for(P=[],F=B.paper.customAttributes[q].length;F--;){P[F]=+A[F]+e*G*N[q][F]}}M[q]=P}}B.attr(M),function(b,c,a){setTimeout(function(){a1("raphael.anim.frame."+b,c,a)})}(B.id,B,E.anim)}else{if(function(b,a,c){setTimeout(function(){a1("raphael.anim.frame."+a.id,a,c),a1("raphael.anim.finish."+a.id,a,c),aI.is(b,"function")&&b.call(a)})}(E.callback,B,E.anim),B.attr(L),aE.splice(I--,1),E.repeat>1&&!E.next){for(z in L){L[bK](z)&&(K[z]=E.totalOrigin[z])}E.el.attr(K),aA(E.anim,E.el,E.anim.percents[0],null,E.totalOrigin,E.repeat-1)}E.next&&!E.stop&&aA(E.anim,E.el,E.next,null,E.totalOrigin,E.repeat)}}}}aI.svg&&B&&B.paper&&B.paper.safari(),aE.length&&b2(ba)},aL=function(a){return a>255?255:0>a?0:a};av.animateWith=function(p,j,f,c,k,q){var b=this;if(b.removed){return q&&q.call(b),b}var d=f instanceof aD?f:aI.animation(f,c,k,q);aA(d,b,d.percents[0],null,b.attr());for(var g=0,m=aE.length;m>g;g++){if(aE[g].anim==j&&aE[g].el==p){aE[m-1].start=aE[g].start;
break}}return b},av.onAnimation=function(a){return a?a1.on("raphael.anim.frame."+this.id,a):a1.unbind("raphael.anim.frame."+this.id),this},aD.prototype.delay=function(a){var b=new aD(this.anim,this.ms);return b.times=this.times,b.del=+a||0,b},aD.prototype.repeat=function(a){var b=new aD(this.anim,this.ms);return b.del=this.del,b.times=aK.floor(bG(a,0))||1,b},aI.animation=function(d,g,c,j){if(d instanceof aD){return d}(aI.is(c,"function")||!c)&&(j=j||c||null,c=null),d=Object(d),g=+g||0;var b,f,h={};for(f in d){d[bK](f)&&bw(f)!=f&&bw(f)+"%"!=f&&(b=!0,h[f]=d[f])}return b?(c&&(h.easing=c),j&&(h.callback=j),new aD({100:h},g)):new aD(d,g)},av.animate=function(d,g,c,h){var b=this;if(b.removed){return h&&h.call(b),b}var f=d instanceof aD?d:aI.animation(d,g,c,h);return aA(f,b,f.percents[0],null,b.attr()),b},av.setTime=function(a,b){return a&&null!=b&&this.status(a,bq(b,a.ms)/a.ms),this},av.status=function(d,g){var f,c,h=[],b=0;if(null!=g){return aA(d,this,-1,bq(g,1)),this}for(f=aE.length;f>b;b++){if(c=aE[b],c.el.id==this.id&&(!d||c.anim==d)){if(d){return c.status
}h.push({anim:c.anim,status:c.status})}}return d?0:h},av.pause=function(a){for(var b=0;aE.length>b;b++){aE[b].el.id!=this.id||a&&aE[b].anim!=a||a1("raphael.anim.pause."+this.id,this,aE[b].anim)!==!1&&(aE[b].paused=!0)}return this},av.resume=function(b){for(var c=0;aE.length>c;c++){if(aE[c].el.id==this.id&&(!b||aE[c].anim==b)){var a=aE[c];a1("raphael.anim.resume."+this.id,this,a.anim)!==!1&&(delete a.paused,this.status(a.anim,a.status))}}return this},av.stop=function(a){for(var b=0;aE.length>b;b++){aE[b].el.id!=this.id||a&&aE[b].anim!=a||a1("raphael.anim.stop."+this.id,this,aE[b].anim)!==!1&&aE.splice(b--,1)}return this},a1.on("raphael.remove",aP),a1.on("raphael.clear",aP),av.toString=function(){return"Raphaël’s object"};var aw=function(a){if(this.items=[],this.length=0,this.type="set",a){for(var c=0,b=a.length;b>c;c++){!a[c]||a[c].constructor!=av.constructor&&a[c].constructor!=aw||(this[this.items.length]=this.items[this.items.length]=a[c],this.length++)}}},b0=aw.prototype;b0.push=function(){for(var b,d,c=0,a=arguments.length;
a>c;c++){b=arguments[c],!b||b.constructor!=av.constructor&&b.constructor!=aw||(d=this.items.length,this[d]=this.items[d]=b,this.length++)}return this},b0.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},b0.forEach=function(b,d){for(var c=0,a=this.items.length;a>c;c++){if(b.call(d,this.items[c],c)===!1){return this}}return this};for(var am in av){av[bK](am)&&(b0[am]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a][bs](c,b)})}}(am))}return b0.attr=function(d,g){if(d&&aI.is(d,bB)&&aI.is(d[0],"object")){for(var c=0,h=d.length;h>c;c++){this.items[c].attr(d[c])}}else{for(var b=0,f=this.items.length;f>b;b++){this.items[b].attr(d,g)}}return this},b0.clear=function(){for(;this.length;){this.pop()}},b0.splice=function(d,h){d=0>d?bG(this.length+d,0):d,h=bG(0,bq(this.length-d,h));var g,c=[],j=[],b=[];for(g=2;arguments.length>g;g++){b.push(arguments[g])}for(g=0;h>g;g++){j.push(this[d+g])}for(;this.length-d>g;g++){c.push(this[d+g])}var f=b.length;
for(g=0;f+c.length>g;g++){this.items[d+g]=this[d+g]=f>g?b[g]:c[g-f]}for(g=this.items.length=this.length-=h-f;this[g];){delete this[g++]}return new aw(j)},b0.exclude=function(a){for(var c=0,b=this.length;b>c;c++){if(this[c]==a){return this.splice(c,1),!0}}},b0.animate=function(p,j,f,c){(aI.is(f,"function")||!f)&&(c=f||null);var k,q,b=this.items.length,d=b,g=this;if(!b){return this}c&&(q=function(){!--b&&c.call(g)}),f=aI.is(f,bd)?f:q;var m=aI.animation(p,j,f,q);for(k=this.items[--d].animate(m);d--;){this.items[d]&&!this.items[d].removed&&this.items[d].animateWith(k,m,m),this.items[d]&&!this.items[d].removed||b--}return this},b0.insertAfter=function(a){for(var b=this.items.length;b--;){this.items[b].insertAfter(a)}return this},b0.getBBox=function(){for(var d=[],g=[],f=[],c=[],h=this.items.length;h--;){if(!this.items[h].removed){var b=this.items[h].getBBox();d.push(b.x),g.push(b.y),f.push(b.x+b.width),c.push(b.y+b.height)}}return d=bq[bs](0,d),g=bq[bs](0,g),f=bG[bs](0,f),c=bG[bs](0,c),{x:d,y:g,x2:f,y2:c,width:f-d,height:c-g}
},b0.clone=function(a){a=this.paper.set();for(var c=0,b=this.items.length;b>c;c++){a.push(this.items[c].clone())}return a},b0.toString=function(){return"Raphaël‘s set"},b0.glow=function(a){var b=this.paper.set();return this.forEach(function(d){var c=d.glow(a);null!=c&&c.forEach(function(e){b.push(e)})}),b},b0.isPointInside=function(a,c){var b=!1;return this.forEach(function(d){return d.isPointInside(a,c)?(console.log("runned"),b=!0,!1):void 0}),b},aI.registerFont=function(d){if(!d.face){return d}this.fonts=this.fonts||{};var h={w:d.w,face:{},glyphs:{}},g=d.face["font-family"];for(var c in d.face){d.face[bK](c)&&(h.face[c]=d.face[c])}if(this.fonts[g]?this.fonts[g].push(h):this.fonts[g]=[h],!d.svg){h.face["units-per-em"]=bH(d.face["units-per-em"],10);for(var j in d.glyphs){if(d.glyphs[bK](j)){var b=d.glyphs[j];if(h.glyphs[j]={w:b.w,k:{},d:b.d&&"M"+b.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"},b.k){for(var f in b.k){b[bK](f)&&(h.glyphs[j].k[f]=b.k[f])
}}}}}return d},a8.getFont=function(p,j,f,c){if(c=c||"normal",f=f||"normal",j=+j||{normal:400,bold:700,lighter:300,bolder:800}[j]||400,aI.fonts){var k=aI.fonts[p];if(!k){var q=RegExp("(^|\\s)"+p.replace(/[^\w\d\s+!~.:_-]/g,bu)+"(\\s|$)","i");for(var b in aI.fonts){if(aI.fonts[bK](b)&&q.test(b)){k=aI.fonts[b];break}}}var d;if(k){for(var g=0,m=k.length;m>g&&(d=k[g],d.face["font-weight"]!=j||d.face["font-style"]!=f&&d.face["font-style"]||d.face["font-stretch"]!=c);g++){}}return d}},a8.print=function(z,L,H,D,P,A,C,F){A=A||"middle",C=bG(bq(C||0,1),-1),F=bG(bq(F||1,3),1);var I,w=bE(H)[bp](bu),N=0,K=0,B=bu;if(aI.is(D,"string")&&(D=this.getFont(D)),D){I=(P||16)/D.face["units-per-em"];for(var M=D.face.bbox[bp](aC),J=+M[0],q=M[3]-M[1],r=0,j=+M[1]+("baseline"==A?q+ +D.face.descent:q/2),E=0,O=w.length;O>E;E++){if("\n"==w[E]){N=0,G=0,K=0,r+=q*F}else{var Q=K&&D.glyphs[w[E-1]]||{},G=D.glyphs[w[E]];N+=K?(Q.w||D.w)+(Q.k&&Q.k[w[E]]||0)+D.w*C:0,K=1}G&&G.d&&(B+=aI.transformPath(G.d,["t",N*I,r*I,"s",I,I,J,j,"t",(z-J)/I,(L-j)/I]))
}}return this.path(B).attr({fill:"#000",stroke:"none"})},a8.add=function(d){if(aI.is(d,"array")){for(var f,c=this.set(),g=0,b=d.length;b>g;g++){f=d[g]||{},aT[bK](f.type)&&c.push(this[f.type]().attr(f))}}return c},aI.format=function(b,c){var a=aI.is(c,bB)?[0][bF](c):arguments;return b&&aI.is(b,bd)&&a.length-1&&(b=b.replace(bJ,function(d,f){return null==a[++f]?bu:a[f]})),b||bu},aI.fullfill=function(){var a=/\{([^\}]+)\}/g,c=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,b=function(e,f,d){var g=d;return f.replace(c,function(k,m,l,j,h){m=m||j,g&&(m in g&&(g=g[m]),"function"==typeof g&&h&&(g=g()))}),g=(null==g||g==d?e:g)+""};return function(f,d){return(f+"").replace(a,function(g,h){return b(g,h,d)})}}(),aI.ninja=function(){return bj.was?bl.win.Raphael=bj.is:delete Raphael,aI},aI.st=b0,function(b,c,a){function d(){/in/.test(b.readyState)?setTimeout(d,9):aI.eve("raphael.DOMload")}null==b.readyState&&b.addEventListener&&(b.addEventListener(c,a=function(){b.removeEventListener(c,a,!1),b.readyState="complete"
},!1),b.readyState="loading"),d()}(document,"DOMContentLoaded"),a1.on("raphael.DOMload",function(){a6=!0}),function(){if(aI.svg){var G="hasOwnProperty",X=String,R=parseFloat,N=parseInt,ar=Math,H=ar.max,M=ar.abs,P=ar.pow,U=/[, ]+/,F=aI.eve,Z="",W=" ",L="http://www.w3.org/1999/xlink",Y={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},V={};aI.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var z=function(c,d){if(d){"string"==typeof c&&(c=z(c));for(var b in d){d[G](b)&&("xlink:"==b.substring(0,6)?c.setAttributeNS(L,b.substring(6),X(d[b])):c.setAttribute(b,X(d[b])))}}else{c=aI._g.doc.createElementNS("http://www.w3.org/2000/svg",c),c.style&&(c.style.webkitTapHighlightColor="rgba(0,0,0,0)")}return c},E=function(cf,e){var o="linear",ce=cf.id+e,x=0.5,c=0.5,A=cf.node,s=cf.paper,cd=A.style,S=aI._g.doc.getElementById(ce);if(!S){if(e=X(e).replace(aI._radial_gradient,function(b,f,d){if(o="radial",f&&d){x=R(f),c=R(d);
var g=2*(c>0.5)-1;P(x-0.5,2)+P(c-0.5,2)>0.25&&(c=ar.sqrt(0.25-P(x-0.5,2))*g+0.5)&&0.5!=c&&(c=c.toFixed(5)-0.00001*g)}return Z}),e=e.split(/\s*\-\s*/),"linear"==o){var i=e.shift();if(i=-R(i),isNaN(i)){return null}var B=[0,0,ar.cos(aI.rad(i)),ar.sin(aI.rad(i))],cc=1/(H(M(B[2]),M(B[3]))||1);B[2]*=cc,B[3]*=cc,0>B[2]&&(B[0]=-B[2],B[2]=0),0>B[3]&&(B[1]=-B[3],B[3]=0)}var T=aI._parseDots(e);if(!T){return null}if(ce=ce.replace(/[\(\)\s,\xb0#]/g,"_"),cf.gradient&&ce!=cf.gradient.id&&(s.defs.removeChild(cf.gradient),delete cf.gradient),!cf.gradient){S=z(o+"Gradient",{id:ce}),cf.gradient=S,z(S,"radial"==o?{fx:x,fy:c}:{x1:B[0],y1:B[1],x2:B[2],y2:B[3],gradientTransform:cf.matrix.invert()}),s.defs.appendChild(S);for(var l=0,a=T.length;a>l;l++){S.appendChild(z("stop",{offset:T[l].offset?T[l].offset:l?"100%":"0%","stop-color":T[l].color||"#fff"}))}}}return z(A,{fill:"url(#"+ce+")",opacity:1,"fill-opacity":1}),cd.fill=Z,cd.opacity=1,cd.fillOpacity=1,1},r=function(a){var b=a.getBBox(1);z(a.pattern,{patternTransform:a.matrix.invert()+" translate("+b.x+","+b.y+")"})
},O=function(cp,cl,ct){if("path"==cp.type){for(var cf,ck,cn,cq,cd,cr=X(cl).toLowerCase().split("-"),cj=cp.paper,cc=ct?"end":"start",t=cp.node,cm=cp.attrs,cs=cm["stroke-width"],cu=cr.length,x="classic",co=3,cg=3,ch=5;cu--;){switch(cr[cu]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":x=cr[cu];break;case"wide":cg=5;break;case"narrow":cg=2;break;case"long":co=5;break;case"short":co=2}}if("open"==x?(co+=2,cg+=2,ch+=2,cn=1,cq=ct?4:1,cd={fill:"none",stroke:cm.stroke}):(cq=cn=co/2,cd={fill:cm.stroke,stroke:"none"}),cp._.arrows?ct?(cp._.arrows.endPath&&V[cp._.arrows.endPath]--,cp._.arrows.endMarker&&V[cp._.arrows.endMarker]--):(cp._.arrows.startPath&&V[cp._.arrows.startPath]--,cp._.arrows.startMarker&&V[cp._.arrows.startMarker]--):cp._.arrows={},"none"!=x){var d="raphael-marker-"+x,c="raphael-marker-"+cc+x+co+cg;aI._g.doc.getElementById(d)?V[d]++:(cj.defs.appendChild(z(z("path"),{"stroke-linecap":"round",d:Y[x],id:d})),V[d]=1);var ci,e=aI._g.doc.getElementById(c);e?(V[c]++,ci=e.getElementsByTagName("use")[0]):(e=z(z("marker"),{id:c,markerHeight:cg,markerWidth:co,orient:"auto",refX:cq,refY:cg/2}),ci=z(z("use"),{"xlink:href":"#"+d,transform:(ct?"rotate(180 "+co/2+" "+cg/2+") ":Z)+"scale("+co/ch+","+cg/ch+")","stroke-width":(1/((co/ch+cg/ch)/2)).toFixed(4)}),e.appendChild(ci),cj.defs.appendChild(e),V[c]=1),z(ci,cd);
var ce=cn*("diamond"!=x&&"oval"!=x);ct?(cf=cp._.arrows.startdx*cs||0,ck=aI.getTotalLength(cm.path)-ce*cs):(cf=ce*cs,ck=aI.getTotalLength(cm.path)-(cp._.arrows.enddx*cs||0)),cd={},cd["marker-"+cc]="url(#"+c+")",(ck||cf)&&(cd.d=aI.getSubpath(cm.path,cf,ck)),z(t,cd),cp._.arrows[cc+"Path"]=d,cp._.arrows[cc+"Marker"]=c,cp._.arrows[cc+"dx"]=ce,cp._.arrows[cc+"Type"]=x,cp._.arrows[cc+"String"]=cl}else{ct?(cf=cp._.arrows.startdx*cs||0,ck=aI.getTotalLength(cm.path)-cf):(cf=0,ck=aI.getTotalLength(cm.path)-(cp._.arrows.enddx*cs||0)),cp._.arrows[cc+"Path"]&&z(t,{d:aI.getSubpath(cm.path,cf,ck)}),delete cp._.arrows[cc+"Path"],delete cp._.arrows[cc+"Marker"],delete cp._.arrows[cc+"dx"],delete cp._.arrows[cc+"Type"],delete cp._.arrows[cc+"String"]}for(cd in V){if(V[G](cd)&&!V[cd]){var g=aI._g.doc.getElementById(cd);g&&g.parentNode.removeChild(g)}}}},ae={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},be=function(d,f,c){if(f=ae[X(f).toLowerCase()]){for(var h=d.attrs["stroke-width"]||"1",b={round:h,square:h,butt:0}[d.attrs["stroke-linecap"]||c["stroke-linecap"]]||0,e=[],g=f.length;
g--;){e[g]=f[g]*h+(g%2?1:-1)*b}z(d.node,{"stroke-dasharray":e.join(",")})}},D=function(cd,ci){var C=cd.node,t=cd.attrs,cf=C.style.visibility;C.style.visibility="hidden";for(var cg in ci){if(ci[G](cg)){if(!aI._availableAttrs[G](cg)){continue}var ce=ci[cg];switch(t[cg]=ce,cg){case"blur":cd.blur(ce);break;case"href":case"title":case"target":var ch=C.parentNode;if("a"!=ch.tagName.toLowerCase()){var p=z("a");ch.insertBefore(p,C),p.appendChild(C),ch=p}"target"==cg?ch.setAttributeNS(L,"show","blank"==ce?"new":ce):ch.setAttributeNS(L,cg,ce);break;case"cursor":C.style.cursor=ce;break;case"transform":cd.transform(ce);break;case"arrow-start":O(cd,ce);break;case"arrow-end":O(cd,ce,1);break;case"clip-rect":var cc=X(ce).split(U);if(4==cc.length){cd.clip&&cd.clip.parentNode.parentNode.removeChild(cd.clip.parentNode);var x=z("clipPath"),e=z("rect");x.id=aI.createUUID(),z(e,{x:cc[0],y:cc[1],width:cc[2],height:cc[3]}),x.appendChild(e),cd.paper.defs.appendChild(x),z(C,{"clip-path":"url(#"+x.id+")"}),cd.clip=e
}if(!ce){var c=C.getAttribute("clip-path");if(c){var y=aI._g.doc.getElementById(c.replace(/(^url\(#|\)$)/g,Z));y&&y.parentNode.removeChild(y),z(C,{"clip-path":Z}),delete cd.clip}}break;case"path":"path"==cd.type&&(z(C,{d:ce?t.path=aI._pathToAbsolute(ce):"M0,0"}),cd._.dirty=1,cd._.arrows&&("startString" in cd._.arrows&&O(cd,cd._.arrows.startString),"endString" in cd._.arrows&&O(cd,cd._.arrows.endString,1)));break;case"width":if(C.setAttribute(cg,ce),cd._.dirty=1,!t.fx){break}cg="x",ce=t.x;case"x":t.fx&&(ce=-t.x-(t.width||0));case"rx":if("rx"==cg&&"rect"==cd.type){break}case"cx":C.setAttribute(cg,ce),cd.pattern&&r(cd),cd._.dirty=1;break;case"height":if(C.setAttribute(cg,ce),cd._.dirty=1,!t.fy){break}cg="y",ce=t.y;case"y":t.fy&&(ce=-t.y-(t.height||0));case"ry":if("ry"==cg&&"rect"==cd.type){break}case"cy":C.setAttribute(cg,ce),cd.pattern&&r(cd),cd._.dirty=1;break;case"r":"rect"==cd.type?z(C,{rx:ce,ry:ce}):C.setAttribute(cg,ce),cd._.dirty=1;break;case"src":"image"==cd.type&&C.setAttributeNS(L,"href",ce);
break;case"stroke-width":(1!=cd._.sx||1!=cd._.sy)&&(ce/=H(M(cd._.sx),M(cd._.sy))||1),cd.paper._vbSize&&(ce*=cd.paper._vbSize),C.setAttribute(cg,ce),t["stroke-dasharray"]&&be(cd,t["stroke-dasharray"],ci),cd._.arrows&&("startString" in cd._.arrows&&O(cd,cd._.arrows.startString),"endString" in cd._.arrows&&O(cd,cd._.arrows.endString,1));break;case"stroke-dasharray":be(cd,ce,ci);break;case"fill":var h=X(ce).match(aI._ISURL);if(h){x=z("pattern");var v=z("image");x.id=aI.createUUID(),z(x,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),z(v,{x:0,y:0,"xlink:href":h[1]}),x.appendChild(v),function(a){aI._preload(h[1],function(){var d=this.offsetWidth,b=this.offsetHeight;z(a,{width:d,height:b}),z(v,{width:d,height:b}),cd.paper.safari()})}(x),cd.paper.defs.appendChild(x),z(C,{fill:"url(#"+x.id+")"}),cd.pattern=x,cd.pattern&&r(cd);break}var n=aI.getRGB(ce);if(n.error){if(("circle"==cd.type||"ellipse"==cd.type||"r"!=X(ce).charAt())&&E(cd,ce)){if("opacity" in t||"fill-opacity" in t){var m=aI._g.doc.getElementById(C.getAttribute("fill").replace(/^url\(#|\)$/g,Z));
if(m){var o=m.getElementsByTagName("stop");z(o[o.length-1],{"stop-opacity":("opacity" in t?t.opacity:1)*("fill-opacity" in t?t["fill-opacity"]:1)})}}t.gradient=ce,t.fill="none";break}}else{delete ci.gradient,delete t.gradient,!aI.is(t.opacity,"undefined")&&aI.is(ci.opacity,"undefined")&&z(C,{opacity:t.opacity}),!aI.is(t["fill-opacity"],"undefined")&&aI.is(ci["fill-opacity"],"undefined")&&z(C,{"fill-opacity":t["fill-opacity"]})}n[G]("opacity")&&z(C,{"fill-opacity":n.opacity>1?n.opacity/100:n.opacity});case"stroke":n=aI.getRGB(ce),C.setAttribute(cg,n.hex),"stroke"==cg&&n[G]("opacity")&&z(C,{"stroke-opacity":n.opacity>1?n.opacity/100:n.opacity}),"stroke"==cg&&cd._.arrows&&("startString" in cd._.arrows&&O(cd,cd._.arrows.startString),"endString" in cd._.arrows&&O(cd,cd._.arrows.endString,1));break;case"gradient":("circle"==cd.type||"ellipse"==cd.type||"r"!=X(ce).charAt())&&E(cd,ce);break;case"opacity":t.gradient&&!t[G]("stroke-opacity")&&z(C,{"stroke-opacity":ce>1?ce/100:ce});case"fill-opacity":if(t.gradient){m=aI._g.doc.getElementById(C.getAttribute("fill").replace(/^url\(#|\)$/g,Z)),m&&(o=m.getElementsByTagName("stop"),z(o[o.length-1],{"stop-opacity":ce}));
break}default:"font-size"==cg&&(ce=N(ce,10)+"px");var s=cg.replace(/(\-.)/g,function(a){return a.substring(1).toUpperCase()});C.style[s]=ce,cd._.dirty=1,C.setAttribute(cg,ce)}}}I(cd,ci),C.style.visibility=cf},Q=1.2,I=function(k,x){if("text"==k.type&&(x[G]("text")||x[G]("font")||x[G]("font-size")||x[G]("x")||x[G]("y"))){var B=k.attrs,c=k.node,e=c.firstChild?N(aI._g.doc.defaultView.getComputedStyle(c.firstChild,Z).getPropertyValue("font-size"),10):10;if(x[G]("text")){for(B.text=x.text;c.firstChild;){c.removeChild(c.firstChild)}for(var m,A=X(x.text).split("\n"),t=[],b=0,w=A.length;w>b;b++){m=z("tspan"),b&&z(m,{dy:e*Q,x:B.x}),m.appendChild(aI._g.doc.createTextNode(A[b])),c.appendChild(m),t[b]=m}}else{for(t=c.getElementsByTagName("tspan"),b=0,w=t.length;w>b;b++){b?z(t[b],{dy:e*Q,x:B.x}):z(t[0],{dy:0})}}z(c,{x:B.x,y:B.y}),k._.dirty=1;var n=k._getBBox(),y=B.y-(n.y+n.height/2);y&&aI.is(y,"finite")&&z(t[0],{dy:y})}},J=function(a,b){this[0]=this.node=a,a.raphael=!0,this.id=aI._oid++,a.raphaelid=this.id,this.matrix=aI.matrix(),this.realPath=null,this.paper=b,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!b.bottom&&(b.bottom=this),this.prev=b.top,b.top&&(b.top.next=this),b.top=this,this.next=null
},q=aI.el;J.prototype=q,q.constructor=J,aI._engine.path=function(b,d){var c=z("path");d.canvas&&d.canvas.appendChild(c);var a=new J(c,d);return a.type="path",D(a,{fill:"none",stroke:"#000",path:b}),a},q.rotate=function(c,d,e){if(this.removed){return this}if(c=X(c).split(U),c.length-1&&(d=R(c[1]),e=R(c[2])),c=R(c[0]),null==e&&(d=e),null==d||null==e){var b=this.getBBox(1);d=b.x+b.width/2,e=b.y+b.height/2}return this.transform(this._.transform.concat([["r",c,d,e]])),this},q.scale=function(c,e,f,b){if(this.removed){return this}if(c=X(c).split(U),c.length-1&&(e=R(c[1]),f=R(c[2]),b=R(c[3])),c=R(c[0]),null==e&&(e=c),null==b&&(f=b),null==f||null==b){var d=this.getBBox(1)}return f=null==f?d.x+d.width/2:f,b=null==b?d.y+d.height/2:b,this.transform(this._.transform.concat([["s",c,e,f,b]])),this},q.translate=function(a,b){return this.removed?this:(a=X(a).split(U),a.length-1&&(b=R(a[1])),a=R(a[0])||0,b=+b||0,this.transform(this._.transform.concat([["t",a,b]])),this)},q.transform=function(b){var a=this._;
if(null==b){return a.transform}if(aI._extractTransform(this,b),this.clip&&z(this.clip,{transform:this.matrix.invert()}),this.pattern&&r(this),this.node&&z(this.node,{transform:this.matrix}),1!=a.sx||1!=a.sy){var c=this.attrs[G]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":c})}return this},q.hide=function(){return !this.removed&&this.paper.safari(this.node.style.display="none"),this},q.show=function(){return !this.removed&&this.paper.safari(this.node.style.display=""),this},q.remove=function(){if(!this.removed&&this.node.parentNode){var a=this.paper;a.__set__&&a.__set__.exclude(this),F.unbind("raphael.*.*."+this.id),this.gradient&&a.defs.removeChild(this.gradient),aI._tear(this,a),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var b in this){this[b]="function"==typeof this[b]?aI._removedFactory(b):null}this.removed=!0}},q._getBBox=function(){if("none"==this.node.style.display){this.show();
var a=!0}var c={};try{c=this.node.getBBox()}catch(b){}finally{c=c||{}}return a&&this.hide(),c},q.attr=function(w,t){if(this.removed){return this}if(null==w){var k={};for(var A in this.attrs){this.attrs[G](A)&&(k[A]=this.attrs[A])}return k.gradient&&"none"==k.fill&&(k.fill=k.gradient)&&delete k.gradient,k.transform=this._.transform,k}if(null==t&&aI.is(w,"string")){if("fill"==w&&"none"==this.attrs.fill&&this.attrs.gradient){return this.attrs.gradient}if("transform"==w){return this._.transform}for(var B=w.split(U),h={},m=0,y=B.length;y>m;m++){w=B[m],h[w]=w in this.attrs?this.attrs[w]:aI.is(this.paper.customAttributes[w],"function")?this.paper.customAttributes[w].def:aI._availableAttrs[w]}return y-1?h:h[B[0]]}if(null==t&&aI.is(w,"array")){for(h={},m=0,y=w.length;y>m;m++){h[w[m]]=this.attr(w[m])}return h}if(null!=t){var v={};v[w]=t}else{null!=w&&aI.is(w,"object")&&(v=w)}for(var b in v){F("raphael.attr."+b+"."+this.id,this,v[b])}for(b in this.paper.customAttributes){if(this.paper.customAttributes[G](b)&&v[G](b)&&aI.is(this.paper.customAttributes[b],"function")){var x=this.paper.customAttributes[b].apply(this,[].concat(v[b]));
this.attrs[b]=v[b];for(var u in x){x[G](u)&&(v[u]=x[u])}}}return D(this,v),this},q.toFront=function(){if(this.removed){return this}"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var a=this.paper;return a.top!=this&&aI._tofront(this,a),this},q.toBack=function(){if(this.removed){return this}var a=this.node.parentNode;return"a"==a.tagName.toLowerCase()?a.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):a.firstChild!=this.node&&a.insertBefore(this.node,this.node.parentNode.firstChild),aI._toback(this,this.paper),this.paper,this},q.insertAfter=function(a){if(this.removed){return this}var b=a.node||a[a.length-1].node;return b.nextSibling?b.parentNode.insertBefore(this.node,b.nextSibling):b.parentNode.appendChild(this.node),aI._insertafter(this,a,this.paper),this},q.insertBefore=function(a){if(this.removed){return this}var b=a.node||a[0].node;return b.parentNode.insertBefore(this.node,b),aI._insertbefore(this,a,this.paper),this
},q.blur=function(b){var c=this;if(0!==+b){var a=z("filter"),d=z("feGaussianBlur");c.attrs.blur=b,a.id=aI.createUUID(),z(d,{stdDeviation:+b||1.5}),a.appendChild(d),c.paper.defs.appendChild(a),c._blur=a,z(c.node,{filter:"url(#"+a.id+")"})}else{c._blur&&(c._blur.parentNode.removeChild(c._blur),delete c._blur,delete c.attrs.blur),c.node.removeAttribute("filter")}return c},aI._engine.circle=function(d,g,f,c){var h=z("circle");d.canvas&&d.canvas.appendChild(h);var b=new J(h,d);return b.attrs={cx:g,cy:f,r:c,fill:"none",stroke:"#000"},b.type="circle",z(h,b.attrs),b},aI._engine.rect=function(d,h,g,c,l,b){var f=z("rect");d.canvas&&d.canvas.appendChild(f);var k=new J(f,d);return k.attrs={x:h,y:g,width:c,height:l,r:b||0,rx:b||0,ry:b||0,fill:"none",stroke:"#000"},k.type="rect",z(f,k.attrs),k},aI._engine.ellipse=function(d,h,g,c,k){var b=z("ellipse");d.canvas&&d.canvas.appendChild(b);var f=new J(b,d);return f.attrs={cx:h,cy:g,rx:c,ry:k,fill:"none",stroke:"#000"},f.type="ellipse",z(b,f.attrs),f},aI._engine.image=function(d,h,g,c,l,b){var f=z("image");
z(f,{x:g,y:c,width:l,height:b,preserveAspectRatio:"none"}),f.setAttributeNS(L,"href",h),d.canvas&&d.canvas.appendChild(f);var k=new J(f,d);return k.attrs={x:g,y:c,width:l,height:b,src:h},k.type="image",k},aI._engine.text=function(d,g,c,h){var b=z("text");d.canvas&&d.canvas.appendChild(b);var f=new J(b,d);return f.attrs={x:g,y:c,"text-anchor":"middle",text:h,font:aI._availableAttrs.font,stroke:"none",fill:"#000"},f.type="text",D(f,f.attrs),f},aI._engine.setSize=function(a,b){return this.width=a||this.width,this.height=b||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},aI._engine.create=function(){var p=aI._getContainer.apply(0,arguments),k=p&&p.container,f=p.x,c=p.y,m=p.width,u=p.height;if(!k){throw Error("SVG container not found.")}var b,d=z("svg"),g="overflow:hidden;";return f=f||0,c=c||0,m=m||512,u=u||342,z(d,{height:u,version:1.1,width:m,xmlns:"http://www.w3.org/2000/svg"}),1==k?(d.style.cssText=g+"position:absolute;left:"+f+"px;top:"+c+"px",aI._g.doc.body.appendChild(d),b=1):(d.style.cssText=g+"position:relative",k.firstChild?k.insertBefore(d,k.firstChild):k.appendChild(d)),k=new aI._Paper,k.width=m,k.height=u,k.canvas=d,k.clear(),k._left=k._top=0,b&&(k.renderfix=function(){}),k.renderfix(),k
},aI._engine.setViewBox=function(v,p,b,k,f){F("raphael.setViewBox",this,this._viewBox,[v,p,b,k,f]);var u,d,g=H(b/this.width,k/this.height),m=this.top,s=f?"meet":"xMinYMin";for(null==v?(this._vbSize&&(g=1),delete this._vbSize,u="0 0 "+this.width+W+this.height):(this._vbSize=g,u=v+W+p+W+b+W+k),z(this.canvas,{viewBox:u,preserveAspectRatio:s});g&&m;){d="stroke-width" in m.attrs?m.attrs["stroke-width"]:1,m.attr({"stroke-width":d}),m._.dirty=1,m._.dirtyT=1,m=m.prev}return this._viewBox=[v,p,b,k,!!f],this},aI.prototype.renderfix=function(){var d,g=this.canvas,f=g.style;try{d=g.getScreenCTM()||g.createSVGMatrix()}catch(c){d=g.createSVGMatrix()}var h=-d.e%1,b=-d.f%1;(h||b)&&(h&&(this._left=(this._left+h)%1,f.left=this._left+"px"),b&&(this._top=(this._top+b)%1,f.top=this._top+"px"))},aI.prototype.clear=function(){aI.eve("raphael.clear",this);for(var a=this.canvas;a.firstChild;){a.removeChild(a.firstChild)}this.bottom=this.top=null,(this.desc=z("desc")).appendChild(aI._g.doc.createTextNode("Created with Raphaël "+aI.version)),a.appendChild(this.desc),a.appendChild(this.defs=z("defs"))
},aI.prototype.remove=function(){F("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var a in this){this[a]="function"==typeof this[a]?aI._removedFactory(a):null}};var j=aI.st;for(var K in q){q[G](K)&&!j[G](K)&&(j[K]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(K))}}}(),function(){if(aI.vml){var Q="hasOwnProperty",cg=String,cc=parseFloat,Z=Math,ck=Z.round,R=Z.max,Y=Z.min,ar=Z.abs,cd="fill",O=/[, ]+/,ci=aI.eve,cf=" progid:DXImageTransform.Microsoft",X=" ",ch="",ce={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},I=/([clmz]),?([^clmz]*)/gi,K=/ progid:\S+Blur\([^\)]+\)/g,H=/-?[^,\s-]+/g,ae="position:absolute;left:0;top:0;width:1px;height:1px",cj=21600,cl={path:1,rect:1,image:1},J={circle:1,ellipse:1},be=function(x){var e=/[ahqstv]/gi,b=aI._pathToAbsolute;if(cg(x).match(e)&&(b=aI._path2curve),e=/[clmz]/g,b==aI._pathToAbsolute&&!cg(x).match(e)){var y=cg(x).replace(I,function(f,o,l){var c=[],u="m"==o.toLowerCase(),h=ce[o];
return l.replace(H,function(i){u&&2==c.length&&(h+=c+ce["m"==o?"l":"L"],c=[]),c.push(ck(i*cj))}),h+c});return y}var a,d,g=b(x);y=[];for(var w=0,m=g.length;m>w;w++){a=g[w],d=g[w][0].toLowerCase(),"z"==d&&(d="x");for(var k=1,p=a.length;p>k;k++){d+=ck(a[k]*cj)+(k!=p-1?",":ch)}y.push(d)}return y.join(X)},U=function(b,c,a){var d=aI.matrix();return d.rotate(-b,0.5,0.5),{dx:d.x(c,a),dy:d.y(c,a)}},V=function(T,A,b,p,k,M){var cm=T._,h=T.matrix,S=cm.fillpos,C=T.node,z=C.style,B=1,w="",L=cj/A,N=cj/b;if(z.visibility="hidden",A&&b){if(C.coordsize=ar(L)+X+ar(N),z.rotation=M*(0>A*b?-1:1),M){var E=U(M,p,k);p=E.dx,k=E.dy}if(0>A&&(w+="x"),0>b&&(w+=" y")&&(B=-1),z.flip=w,C.coordorigin=p*-L+X+k*-N,S||cm.fillsize){var l=C.getElementsByTagName(cd);l=l&&l[0],C.removeChild(l),S&&(E=U(M,h.x(S[0],S[1]),h.y(S[0],S[1])),l.position=E.dx*B+X+E.dy*B),cm.fillsize&&(l.size=cm.fillsize[0]*ar(A)+X+cm.fillsize[1]*ar(b)),C.appendChild(l)}z.visibility="visible"}};aI.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version
};var q=function(p,b,f){for(var d=cg(b).toLowerCase().split("-"),k=f?"end":"start",v=d.length,c="classic",e="medium",g="medium";v--;){switch(d[v]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":c=d[v];break;case"wide":case"narrow":g=d[v];break;case"long":case"short":e=d[v]}}var m=p.node.getElementsByTagName("stroke")[0];m[k+"arrow"]=c,m[k+"arrowlength"]=e,m[k+"arrowwidth"]=g},j=function(cw,cy){cw.attrs=cw.attrs||{};var cC=cw.node,cB=cw.attrs,cA=cC.style,cn=cl[cw.type]&&(cy.x!=cB.x||cy.y!=cB.y||cy.width!=cB.width||cy.height!=cB.height||cy.cx!=cB.cx||cy.cy!=cB.cy||cy.rx!=cB.rx||cy.ry!=cB.ry||cy.r!=cB.r),cq=J[cw.type]&&(cB.cx!=cy.cx||cB.cy!=cy.cy||cB.r!=cy.r||cB.rx!=cy.rx||cB.ry!=cy.ry),S=cw;for(var cx in cy){cy[Q](cx)&&(cB[cx]=cy[cx])}if(cn&&(cB.path=aI._getPath[cw.type](cw),cw._.dirty=1),cy.href&&(cC.href=cy.href),cy.title&&(cC.title=cy.title),cy.target&&(cC.target=cy.target),cy.cursor&&(cA.cursor=cy.cursor),"blur" in cy&&cw.blur(cy.blur),(cy.path&&"path"==cw.type||cn)&&(cC.path=be(~cg(cB.path).toLowerCase().indexOf("r")?aI._pathToAbsolute(cB.path):cB.path),"image"==cw.type&&(cw._.fillpos=[cB.x,cB.y],cw._.fillsize=[cB.width,cB.height],V(cw,1,1,0,0,0))),"transform" in cy&&cw.transform(cy.transform),cq){var cu=+cB.cx,k=+cB.cy,w=+cB.rx||+cB.r||0,cs=+cB.ry||+cB.r||0;
cC.path=aI.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",ck((cu-w)*cj),ck((k-cs)*cj),ck((cu+w)*cj),ck((k+cs)*cj),ck(cu*cj)),cw._.dirty=1}if("clip-rect" in cy){var A=cg(cy["clip-rect"]).split(O);if(4==A.length){A[2]=+A[2]+ +A[0],A[3]=+A[3]+ +A[1];var B=cC.clipRect||aI._g.doc.createElement("div"),cr=B.style;cr.clip=aI.format("rect({1}px {2}px {3}px {0}px)",A),cC.clipRect||(cr.position="absolute",cr.top=0,cr.left=0,cr.width=cw.paper.width+"px",cr.height=cw.paper.height+"px",cC.parentNode.insertBefore(B,cC),B.appendChild(cC),cC.clipRect=B)}cy["clip-rect"]||cC.clipRect&&(cC.clipRect.style.clip="auto")}if(cw.textpath){var t=cw.textpath.style;cy.font&&(t.font=cy.font),cy["font-family"]&&(t.fontFamily='"'+cy["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,ch)+'"'),cy["font-size"]&&(t.fontSize=cy["font-size"]),cy["font-weight"]&&(t.fontWeight=cy["font-weight"]),cy["font-style"]&&(t.fontStyle=cy["font-style"])}if("arrow-start" in cy&&q(S,cy["arrow-start"]),"arrow-end" in cy&&q(S,cy["arrow-end"],1),null!=cy.opacity||null!=cy["stroke-width"]||null!=cy.fill||null!=cy.src||null!=cy.stroke||null!=cy["stroke-width"]||null!=cy["stroke-opacity"]||null!=cy["fill-opacity"]||null!=cy["stroke-dasharray"]||null!=cy["stroke-miterlimit"]||null!=cy["stroke-linejoin"]||null!=cy["stroke-linecap"]){var p=cC.getElementsByTagName(cd),cm=!1;
if(p=p&&p[0],!p&&(cm=p=F(cd)),"image"==cw.type&&cy.src&&(p.src=cy.src),cy.fill&&(p.on=!0),(null==p.on||"none"==cy.fill||null===cy.fill)&&(p.on=!1),p.on&&cy.fill){var cz=cg(cy.fill).match(aI._ISURL);if(cz){p.parentNode==cC&&cC.removeChild(p),p.rotate=!0,p.src=cz[1],p.type="tile";var cv=cw.getBBox(1);p.position=cv.x+X+cv.y,cw._.fillpos=[cv.x,cv.y],aI._preload(cz[1],function(){cw._.fillsize=[this.offsetWidth,this.offsetHeight]})}else{p.color=aI.getRGB(cy.fill).hex,p.src=ch,p.type="solid",aI.getRGB(cy.fill).error&&(S.type in {circle:1,ellipse:1}||"r"!=cg(cy.fill).charAt())&&W(S,cy.fill,p)&&(cB.fill="none",cB.gradient=cy.fill,p.rotate=!1)}}if("fill-opacity" in cy||"opacity" in cy){var ct=((+cB["fill-opacity"]+1||2)-1)*((+cB.opacity+1||2)-1)*((+aI.getRGB(cy.fill).o+1||2)-1);ct=Y(R(ct,0),1),p.opacity=ct,p.src&&(p.color="none")}cC.appendChild(p);var u=cC.getElementsByTagName("stroke")&&cC.getElementsByTagName("stroke")[0],h=!1;!u&&(h=u=F("stroke")),(cy.stroke&&"none"!=cy.stroke||cy["stroke-width"]||null!=cy["stroke-opacity"]||cy["stroke-dasharray"]||cy["stroke-miterlimit"]||cy["stroke-linejoin"]||cy["stroke-linecap"])&&(u.on=!0),("none"==cy.stroke||null===cy.stroke||null==u.on||0==cy.stroke||0==cy["stroke-width"])&&(u.on=!1);
var b=aI.getRGB(cy.stroke);u.on&&cy.stroke&&(u.color=b.hex),ct=((+cB["stroke-opacity"]+1||2)-1)*((+cB.opacity+1||2)-1)*((+b.o+1||2)-1);var cp=0.75*(cc(cy["stroke-width"])||1);if(ct=Y(R(ct,0),1),null==cy["stroke-width"]&&(cp=cB["stroke-width"]),cy["stroke-width"]&&(u.weight=cp),cp&&1>cp&&(ct*=cp)&&(u.weight=1),u.opacity=ct,cy["stroke-linejoin"]&&(u.joinstyle=cy["stroke-linejoin"]||"miter"),u.miterlimit=cy["stroke-miterlimit"]||8,cy["stroke-linecap"]&&(u.endcap="butt"==cy["stroke-linecap"]?"flat":"square"==cy["stroke-linecap"]?"square":"round"),cy["stroke-dasharray"]){var e={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};u.dashstyle=e[Q](cy["stroke-dasharray"])?e[cy["stroke-dasharray"]]:ch}h&&cC.appendChild(u)}if("text"==S.type){S.paper.canvas.style.display=ch;var d=S.paper.span,co=100,i=cB.font&&cB.font.match(/\d+(?:\.\d*)?(?=px)/);cA=d.style,cB.font&&(cA.font=cB.font),cB["font-family"]&&(cA.fontFamily=cB["font-family"]),cB["font-weight"]&&(cA.fontWeight=cB["font-weight"]),cB["font-style"]&&(cA.fontStyle=cB["font-style"]),i=cc(cB["font-size"]||i&&i[0])||10,cA.fontSize=i*co+"px",S.textpath.string&&(d.innerHTML=cg(S.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));
var o=d.getBoundingClientRect();S.W=cB.w=(o.right-o.left)/co,S.H=cB.h=(o.bottom-o.top)/co,S.X=cB.x,S.Y=cB.y+S.H/2,("x" in cy||"y" in cy)&&(S.path.v=aI.format("m{0},{1}l{2},{1}",ck(cB.x*cj),ck(cB.y*cj),ck(cB.x*cj)+1));for(var a=["x","y","text","font","font-family","font-weight","font-style","font-size"],s=0,L=a.length;L>s;s++){if(a[s] in cy){S._.dirty=1;break}}switch(cB["text-anchor"]){case"start":S.textpath.style["v-text-align"]="left",S.bbx=S.W/2;break;case"end":S.textpath.style["v-text-align"]="right",S.bbx=-S.W/2;break;default:S.textpath.style["v-text-align"]="center",S.bbx=0}S.textpath.style["v-text-kern"]=!0}},W=function(w,p,y){w.attrs=w.attrs||{};var b=(w.attrs,Math.pow),d="linear",e=".5 .5";if(w.attrs.gradient=p,p=cg(p).replace(aI._radial_gradient,function(a,f,c){return d="radial",f&&c&&(f=cc(f),c=cc(c),b(f-0.5,2)+b(c-0.5,2)>0.25&&(c=Z.sqrt(0.25-b(f-0.5,2))*(2*(c>0.5)-1)+0.5),e=f+X+c),ch}),p=p.split(/\s*\-\s*/),"linear"==d){var v=p.shift();if(v=-cc(v),isNaN(v)){return null}}var m=aI._parseDots(p);
if(!m){return null}if(w=w.shape||w.node,m.length){w.removeChild(y),y.on=!0,y.method="none",y.color=m[0].color,y.color2=m[m.length-1].color;for(var k=[],i=0,n=m.length;n>i;i++){m[i].offset&&k.push(m[i].offset+X+m[i].color)}y.colors=k.length?k.join():"0% "+y.color,"radial"==d?(y.type="gradientTitle",y.focus="100%",y.focussize="0 0",y.focusposition=e,y.angle=0):(y.type="gradient",y.angle=(270-v)%360),w.appendChild(y)}return 1},r=function(a,b){this[0]=this.node=a,a.raphael=!0,this.id=aI._oid++,a.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=b,this.matrix=aI.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!b.bottom&&(b.bottom=this),this.prev=b.top,b.top&&(b.top.next=this),b.top=this,this.next=null},P=aI.el;r.prototype=P,P.constructor=r,P.transform=function(E){if(null==E){return this._.transform}var k,d=this.paper._viewBoxShift,A=d?"s"+[d.scale,d.scale]+"-1-1t"+[d.dx,d.dy]:ch;d&&(k=E=cg(E).replace(/\.{3}|\u2026/g,this._.transform||ch)),aI._extractTransform(this,A+E);
var L,b=this.matrix.clone(),e=this.skew,m=this.node,C=~cg(this.attrs.fill).indexOf("-"),y=!cg(this.attrs.fill).indexOf("url(");if(b.translate(-0.5,-0.5),y||C||"image"==this.type){if(e.matrix="1 0 0 1",e.offset="0 0",L=b.split(),C&&L.noRotation||!L.isSimple){m.style.filter=b.toFilter();var w=this.getBBox(),p=this.getBBox(1),z=w.x-p.x,B=w.y-p.y;m.coordorigin=z*-cj+X+B*-cj,V(this,1,1,z,B,0)}else{m.style.filter=ch,V(this,L.scalex,L.scaley,L.dx,L.dy,L.rotate)}}else{m.style.filter=ch,e.matrix=cg(b),e.offset=b.offset()}return k&&(this._.transform=k),this},P.rotate=function(c,d,e){if(this.removed){return this}if(null!=c){if(c=cg(c).split(O),c.length-1&&(d=cc(c[1]),e=cc(c[2])),c=cc(c[0]),null==e&&(d=e),null==d||null==e){var b=this.getBBox(1);d=b.x+b.width/2,e=b.y+b.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",c,d,e]])),this}},P.translate=function(a,b){return this.removed?this:(a=cg(a).split(O),a.length-1&&(b=cc(a[1])),a=cc(a[0])||0,b=+b||0,this._.bbox&&(this._.bbox.x+=a,this._.bbox.y+=b),this.transform(this._.transform.concat([["t",a,b]])),this)
},P.scale=function(c,e,f,b){if(this.removed){return this}if(c=cg(c).split(O),c.length-1&&(e=cc(c[1]),f=cc(c[2]),b=cc(c[3]),isNaN(f)&&(f=null),isNaN(b)&&(b=null)),c=cc(c[0]),null==e&&(e=c),null==b&&(f=b),null==f||null==b){var d=this.getBBox(1)}return f=null==f?d.x+d.width/2:f,b=null==b?d.y+d.height/2:b,this.transform(this._.transform.concat([["s",c,e,f,b]])),this._.dirtyT=1,this},P.hide=function(){return !this.removed&&(this.node.style.display="none"),this},P.show=function(){return !this.removed&&(this.node.style.display=ch),this},P._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},P.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),aI.eve.unbind("raphael.*.*."+this.id),aI._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var a in this){this[a]="function"==typeof this[a]?aI._removedFactory(a):null
}this.removed=!0}},P.attr=function(v,m){if(this.removed){return this}if(null==v){var h={};for(var z in this.attrs){this.attrs[Q](z)&&(h[z]=this.attrs[z])}return h.gradient&&"none"==h.fill&&(h.fill=h.gradient)&&delete h.gradient,h.transform=this._.transform,h}if(null==m&&aI.is(v,"string")){if(v==cd&&"none"==this.attrs.fill&&this.attrs.gradient){return this.attrs.gradient}for(var A=v.split(O),c={},k=0,u=A.length;u>k;k++){v=A[k],c[v]=v in this.attrs?this.attrs[v]:aI.is(this.paper.customAttributes[v],"function")?this.paper.customAttributes[v].def:aI._availableAttrs[v]}return u-1?c:c[A[0]]}if(this.attrs&&null==m&&aI.is(v,"array")){for(c={},k=0,u=v.length;u>k;k++){c[v[k]]=this.attr(v[k])}return c}var b;null!=m&&(b={},b[v]=m),null==m&&aI.is(v,"object")&&(b=v);for(var w in b){ci("raphael.attr."+w+"."+this.id,this,b[w])}if(b){for(w in this.paper.customAttributes){if(this.paper.customAttributes[Q](w)&&b[Q](w)&&aI.is(this.paper.customAttributes[w],"function")){var t=this.paper.customAttributes[w].apply(this,[].concat(b[w]));
this.attrs[w]=b[w];for(var y in t){t[Q](y)&&(b[y]=t[y])}}}b.text&&"text"==this.type&&(this.textpath.string=b.text),j(this,b)}return this},P.toFront=function(){return !this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&aI._tofront(this,this.paper),this},P.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),aI._toback(this,this.paper)),this)},P.insertAfter=function(a){return this.removed?this:(a.constructor==aI.st.constructor&&(a=a[a.length-1]),a.node.nextSibling?a.node.parentNode.insertBefore(this.node,a.node.nextSibling):a.node.parentNode.appendChild(this.node),aI._insertafter(this,a,this.paper),this)},P.insertBefore=function(a){return this.removed?this:(a.constructor==aI.st.constructor&&(a=a[0]),a.node.parentNode.insertBefore(this.node,a.node),aI._insertbefore(this,a,this.paper),this)},P.blur=function(b){var c=this.node.runtimeStyle,a=c.filter;
return a=a.replace(K,ch),0!==+b?(this.attrs.blur=b,c.filter=a+X+cf+".Blur(pixelradius="+(+b||1.5)+")",c.margin=aI.format("-{0}px 0 0 -{0}px",ck(+b||1.5))):(c.filter=a,c.margin=0,delete this.attrs.blur),this},aI._engine.path=function(d,g){var f=F("shape");f.style.cssText=ae,f.coordsize=cj+X+cj,f.coordorigin=g.coordorigin;var c=new r(f,g),h={fill:"none",stroke:"#000"};d&&(h.path=d),c.type="path",c.path=[],c.Path=ch,j(c,h),g.canvas.appendChild(f);var b=F("skew");return b.on=!0,f.appendChild(b),c.skew=b,c.transform(ch),c},aI._engine.rect=function(p,k,f,c,m,u){var b=aI._rectPath(k,f,c,m,u),d=p.path(b),g=d.attrs;return d.X=g.x=k,d.Y=g.y=f,d.W=g.width=c,d.H=g.height=m,g.r=u,g.path=b,d.type="rect",d},aI._engine.ellipse=function(d,g,f,c,h){var b=d.path();return b.attrs,b.X=g-c,b.Y=f-h,b.W=2*c,b.H=2*h,b.type="ellipse",j(b,{cx:g,cy:f,rx:c,ry:h}),b},aI._engine.circle=function(b,d,c,a){var f=b.path();return f.attrs,f.X=d-a,f.Y=c-a,f.W=f.H=2*a,f.type="circle",j(f,{cx:d,cy:c,r:a}),f},aI._engine.image=function(x,m,h,d,v,y){var b=aI._rectPath(h,d,v,y),g=x.path(b).attr({stroke:"none"}),w=g.attrs,p=g.node,k=p.getElementsByTagName(cd)[0];
return w.src=m,g.X=w.x=h,g.Y=w.y=d,g.W=w.width=v,g.H=w.height=y,w.path=b,g.type="image",k.parentNode==p&&p.removeChild(k),k.rotate=!0,k.src=m,k.type="tile",g._.fillpos=[h,d],g._.fillsize=[v,y],p.appendChild(k),V(g,1,1,0,0,0),g},aI._engine.text=function(v,e,b,w){var a=F("shape"),d=F("path"),g=F("textpath");e=e||0,b=b||0,w=w||"",d.v=aI.format("m{0},{1}l{2},{1}",ck(e*cj),ck(b*cj),ck(e*cj)+1),d.textpathok=!0,g.string=cg(w),g.on=!0,a.style.cssText=ae,a.coordsize=cj+X+cj,a.coordorigin="0 0";var p=new r(a,v),m={fill:"#000",stroke:"none",font:aI._availableAttrs.font,text:w};p.shape=a,p.path=d,p.textpath=g,p.type="text",p.attrs.text=cg(w),p.attrs.x=e,p.attrs.y=b,p.attrs.w=1,p.attrs.h=1,j(p,m),a.appendChild(g),a.appendChild(d),v.canvas.appendChild(a);var k=F("skew");return k.on=!0,a.appendChild(k),p.skew=k,p.transform(ch),p},aI._engine.setSize=function(b,c){var a=this.canvas.style;return this.width=b,this.height=c,b==+b&&(b+="px"),c==+c&&(c+="px"),a.width=b,a.height=c,a.clip="rect(0 "+b+" "+c+" 0)",this._viewBox&&aI._engine.setViewBox.apply(this,this._viewBox),this
},aI._engine.setViewBox=function(w,m,g,d,s){aI.eve("raphael.setViewBox",this,this._viewBox,[w,m,g,d,s]);var b,f,k=this.width,v=this.height,p=1/R(g/k,d/v);return s&&(b=v/d,f=k/g,k>g*b&&(w-=(k-g*b)/2/b),v>d*f&&(m-=(v-d*f)/2/f)),this._viewBox=[w,m,g,d,!!s],this._viewBoxShift={dx:-w,dy:-m,scale:p},this.forEach(function(a){a.transform("...")}),this};var F;aI._engine.initWin=function(a){var c=a.document;c.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!c.namespaces.rvml&&c.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),F=function(d){return c.createElement("<rvml:"+d+' class="rvml">')}}catch(b){F=function(d){return c.createElement("<"+d+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},aI._engine.initWin(aI._g.win),aI._engine.create=function(){var p=aI._getContainer.apply(0,arguments),k=p.container,f=p.height,c=p.width,m=p.x,u=p.y;if(!k){throw Error("VML container not found.")}var b=new aI._Paper,d=b.canvas=aI._g.doc.createElement("div"),g=d.style;return m=m||0,u=u||0,c=c||512,f=f||342,b.width=c,b.height=f,c==+c&&(c+="px"),f==+f&&(f+="px"),b.coordsize=1000*cj+X+1000*cj,b.coordorigin="0 0",b.span=aI._g.doc.createElement("span"),b.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",d.appendChild(b.span),g.cssText=aI.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",c,f),1==k?(aI._g.doc.body.appendChild(d),g.left=m+"px",g.top=u+"px",g.position="absolute"):k.firstChild?k.insertBefore(d,k.firstChild):k.appendChild(d),b.renderfix=function(){},b
},aI.prototype.clear=function(){aI.eve("raphael.clear",this),this.canvas.innerHTML=ch,this.span=aI._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},aI.prototype.remove=function(){aI.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var a in this){this[a]="function"==typeof this[a]?aI._removedFactory(a):null}return !0};var D=aI.st;for(var G in P){P[Q](G)&&!D[Q](G)&&(D[G]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(G))}}}(),bj.was?bl.win.Raphael=aI:Raphael=aI,aI});Element.implement({setRGBA:function(j,h,c,d){if(!Browser.ie){this.setStyle("background-color","rgba("+Array.from(arguments).join(",")+")")}else{var f=[];for(var e=0;e<3;e++){f.push(arguments[e])}f=f.rgbToHex().replace("#","#"+Math.floor(d*255).toString(16));this.setStyles({zoom:1,filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr="+f+",endColorstr="+f+")"})}}});var screenPicture={options:{o:"",oList:[],backUrl:"",isPicture:"picture",hasMenu:true,tag:"",type:"",mid:"",vid:"",isAjax:false,menu:{}},panel:{},R:"",img:"",count:0,scroll:"",scrolldiv:"",stepCount:0,loadding:function(){var a=this.panel.center.getDimensions();this.lazeImg=new Element("img",{src:gewara.util.cdnPath+"css/images/loading3.gif",styles:{position:"absolute",top:a.height/2-85,left:a.width/2,"z-index":999}}).inject(this.panel.center)},showPicture:function(a){a=a.indexOf("http")>=0?a:gewara.util.cdnPath+a||gewara.util.cdnPath+"images/movie/201303/sb0c347b_13d66b88d81__7f32.jpg";var f=0,d=1,e=0,i=0,j=0,c=0,h=this,b=this.panel.center.getDimensions();
b.height=b.height-80;var g=new Image();if(this.R){g.src=a;h.lazeImg.show();g.onload=function(){var l=e=(b.width-this.width)/2,k=i=(b.height-this.height)/2;h.lazeImg.hide();h.img.attr({src:a});h.img.animate({width:this.width,height:this.height,transform:"t"+[l,k]+"r"+f+"s"+d},10,"<>");g=null};return}this.inner=new Element("div",{styles:{position:"absolute",height:b.height-100,width:"100%",top:0,left:0}}).inject(this.panel.center);h.R=Raphael(this.inner,b.width,b.height-30);g.src=a;h.R.rect(0,0,b.width,b.height).attr({stroke:"#000",fill:"#000","fill-opacity":0.4,"stroke-width":2,opacity:0.4});g.onload=function(){h.lazeImg.hide();h.img=h.R.image(a,0,0,this.width,this.height);var q=e=j=(b.width-this.width)/2,k=i=c=(b.height-this.height)/2;h.img.attr({transform:"t"+[q,k]+"r"+f+"s"+d});g=null;h.img.drag(function(){h.img.attr({transform:"t"+[arguments[0]+j,arguments[1]+c]+"r"+f+"s"+d})},function(){e=arguments[0];i=arguments[1]},function(s){j=s.clientX-e+j;c=s.clientY-i+c});var r=h.R.set(),p=h.R.set(),o=h.R.set(),n=h.R.set(),m=h.R.set(),l=h.R.set();
r.push(h.R.circle(24.833,26.917,26.667).attr({stroke:"#4d4d4d",fill:"#000",cursor:"pointer","fill-opacity":0.4,"stroke-width":2}),h.R.path("M12.582,9.551C3.251,16.237,0.921,29.021,7.08,38.564l-2.36,1.689l4.893,2.262l4.893,2.262l-0.568-5.36l-0.567-5.359l-2.365,1.694c-4.657-7.375-2.83-17.185,4.352-22.33c7.451-5.338,17.817-3.625,23.156,3.824c5.337,7.449,3.625,17.813-3.821,23.152l2.857,3.988c9.617-6.893,11.827-20.277,4.935-29.896C35.591,4.87,22.204,2.658,12.582,9.551z").attr({stroke:"none",cursor:"pointer",fill:"#4d4d4d","stroke-width":2}),h.R.circle(24.833,26.917,26.667).attr({fill:"#4d4d4d",cursor:"pointer",opacity:0}));p.push(h.R.circle(24.833,26.917,26.667).attr({stroke:"#4d4d4d",fill:"#000",cursor:"pointer","fill-opacity":0.4,"stroke-width":2}),h.R.path("M37.566,9.551c9.331,6.686,11.661,19.471,5.502,29.014l2.36,1.689l-4.893,2.262l-4.893,2.262l0.568-5.36l0.567-5.359l2.365,1.694c4.657-7.375,2.83-17.185-4.352-22.33c-7.451-5.338-17.817-3.625-23.156,3.824C6.3,24.695,8.012,35.06,15.458,40.398l-2.857,3.988C2.983,37.494,0.773,24.109,7.666,14.49C14.558,4.87,27.944,2.658,37.566,9.551z").attr({stroke:"none",cursor:"pointer",fill:"#4d4d4d","stroke-width":2}),h.R.circle(24.833,26.917,26.667).attr({fill:"#4d4d4d",cursor:"pointer",opacity:0}));
o.push(h.R.path("M16,30.534c8.027,0,14.534-6.507,14.534-14.534c0-8.027-6.507-14.534-14.534-14.534C7.973,1.466,1.466,7.973,1.466,16C1.466,24.027,7.973,30.534,16,30.534zM18.335,6.276l3.536,3.538l-6.187,6.187l6.187,6.187l-3.536,3.537l-9.723-9.724L18.335,6.276z").attr({stroke:"#4d4d4d",fill:"#000",cursor:"pointer","fill-opacity":0.4,"stroke-width":2,transform:"t"+[20,b.height/2-60]+"s"+2}));n.push(h.R.path("M16,1.466C7.973,1.466,1.466,7.973,1.466,16c0,8.027,6.507,14.534,14.534,14.534c8.027,0,14.534-6.507,14.534-14.534C30.534,7.973,24.027,1.466,16,1.466zM13.665,25.725l-3.536-3.539l6.187-6.187l-6.187-6.187l3.536-3.536l9.724,9.723L13.665,25.725z").attr({stroke:"#4d4d4d",fill:"#000",cursor:"pointer","fill-opacity":0.4,"stroke-width":2,transform:"t"+[b.width-55,b.height/2-60]+"s"+2}));m.push(h.R.path("M16,1.466C7.973,1.466,1.466,7.973,1.466,16C1.466,24.027,7.973,30.534,16,30.534C24.027,30.534,30.534,24.027,30.534,15.999999999999998C30.534,7.973,24.027,1.466,17,1.466ZM8.855,15.884V16.885L22.519,16.884V15.885000000000002L7.854,15.884Z").attr({stroke:"#4d4d4d",fill:"#000",cursor:"pointer","fill-opacity":0.4,"stroke-width":2,transform:"t"+[b.width/4+200,b.height-70]+"s"+0.9}));
l.push(h.R.path("M16,1.466C7.973,1.466,1.466,7.973,1.466,16C1.466,24.027,7.973,30.534,16,30.534C24.027,30.534,30.534,24.027,30.534,15.999999999999998C30.534,7.973,24.027,1.466,17,1.466ZM22.979,14.896L17.312,14.896L17.312,9.229L14.647,9.229L14.647,14.896L8.979,14.896L8.979,16.562L15.647,16.562L14.647,23.229L17.312,23.229L17.312,16.562L22.979,16.562Z").attr({stroke:"#4d4d4d",cursor:"pointer",fill:"#000","fill-opacity":0.4,"stroke-width":2,transform:"t"+[b.width/4+240,b.height-70]+"s"+0.9}));r.attr({transform:"t"+[b.width/4+110,(b.height-80)]+"s"+0.5});p.attr({transform:"t"+[b.width/4+150,(b.height-80)]+"s"+0.5});r[2].click(function(){f-=90;h.img.stop().animate({transform:"t"+[j,c]+"r"+f+"s"+d},1000,"<>")}).mouseover(function(){r[1].animate({fill:"#fff"},300);r[0].animate({stroke:"#fff"},300)}).mouseout(function(){r[1].stop().attr({fill:"#4d4d4d"});r[0].stop().attr({stroke:"#4d4d4d"})});p[2].click(function(){f+=90;h.img.animate({transform:"t"+[j,c]+"r"+f+"s"+d},1000,"<>")}).mouseover(function(){p[1].animate({fill:"#fff"},300);
p[0].animate({stroke:"#fff"},300)}).mouseout(function(){p[1].stop().attr({fill:"#4d4d4d"});p[0].stop().attr({stroke:"#4d4d4d"})});o[0].click(function(){h.countStep(true);n[0].show();if(h.count==0){o[0].hide()}}).mouseover(function(){o[0].animate({stroke:"#fff"},300)}).mouseout(function(){o[0].stop().attr({stroke:"#4d4d4d"})});n[0].click(function(){h.countStep(false);o[0].show();if(h.count==h.options.oList.length-1){n[0].hide()}}).mouseover(function(){n[0].animate({stroke:"#fff"},300)}).mouseout(function(){n[0].stop().attr({stroke:"#4d4d4d"})});m[0].click(function(){d-=0.5;if(d==0){d=0.5}h.img.animate({transform:"t"+[j,c]+"r"+f+"s"+d},1000,"<>")}).mouseover(function(){m[0].animate({stroke:"#fff"},300)}).mouseout(function(){m[0].stop().attr({stroke:"#4d4d4d"})});l[0].click(function(){d=d+0.5;h.img.animate({transform:"t"+[j,c]+"r"+f+"s"+d},1000,"<>")}).mouseover(function(){l[0].animate({stroke:"#fff"},300)}).mouseout(function(){l[0].stop().attr({stroke:"#4d4d4d"})})};if(!this.options.isAjax){this.pictureSolider()
}},countStep:function(a){if(a){if(this.count>0){this.count--}else{this.count=0}this.stepCount=6}else{if(this.count<this.options.oList.length-1){this.count++}else{this.count=this.options.oList.length-1}this.stepCount=7}this.doScroll()},doScroll:function(){if(this.options.isPicture=="picture"){this.showPicture(this.options.oList[this.count].picturename)}else{if(this.options.isPicture=="video"){this.showVideo(this.options.oList[this.count].url)}else{this.closePanel()}}var a=[];if(this.scroll){a=this.scroll.element.getElements("li");if(this.count%this.stepCount==0){this.scroll.slider.set((this.count/this.stepCount+(this.stepCount==6?(-1):0))*this.stepCount*106)}}else{a=this.panel.center.getElements("li")}a.removeClass("select");a[this.count].addClass("select");this.pictureCommentList(this.options.oList[this.count].id)},showVideo:function(c){var a=this.panel.center.getDimensions();if(!this.inner){this.inner=new Element("div",{styles:{position:"absolute",height:a.height-70,width:"100%",top:0,left:0}}).inject(this.panel.center)
}var b=new SWFObject(c,"video"+GewaraUtil.rtime(),a.width,a.height-120,"10","#fff",true);b.addParam("wmode","transparent");b.addParam("allowscriptaccess","always");b.addParam("allowFullScreen",true);b.write(this.inner);this.lazeImg.hide()},pictureCommentList:function(c){var a={relatedid:c,tag:this.options.isPicture,pageNo:0,maxnum:5};var b="/ma/comment/qryCommentList.xhtml";GewaraUtil.sendLoad("tips_ablum_right",b,a,function(d){if(!d.success){gewaUtil.alert(d.msg)}},c)},pictureSolider:function(){if(!this.options.oList){this.scrolldiv.dispose();this.scrolldiv="";return}if(!this.scrolldiv){this.scrolldiv=new Element("div",{"class":"groupImgsControl",styles:{position:"absolute",bottom:10,left:24,width:744,height:75}}).inject(this.panel.center)}this.scrolldiv.empty();var a=new Element("ul",{"class":"clear"}).inject(this.scrolldiv),b=this;this.options.oList.each(function(c,d){var e=new Element("li",{}).inject(a);new Element("img",{"data-vid":this.options.oList[d].id,src:d<7?(this.options.oList[d].minpic.indexOf("http")==-1?gewara.util.cdnPath:"")+this.options.oList[d].minpic:gewara.util.cdnPath+"css/images/blank.gif",lazeSrc:(this.options.oList[d].minpic.indexOf("http")==-1?gewara.util.cdnPath:"")+this.options.oList[d].minpic,"class":d==0?"select":"",styles:{"background-image":"url("+gewara.util.cdnPath+"css/images/loading3.gif)","background-position":"center center","background-repeat":"no-repeat"}}).addEvent("click",function(){b.count=a.getElements("img").indexOf(this);
b.doScroll()}).inject(e);new Element("i",{html:"◆"}).inject(e)}.bind(this));if(this.options.oList.length>7){a.setStyle("width",106*this.options.oList.length);this.scroll=new ScrollerBar(this.scrolldiv,{mode:"horizontal",laze:true,wrapped:a})}},layoutLeft:function(a){if(!this.options.hasMenu){return}var b='<ul style="margin:30px 10px;border-right:2px solid #111;"><li data-type="picture">剧照<em>('+this.options.menu.picturecount+')</em></li><li data-type="video">预告片<em>('+this.options.menu.videocount+")</em></li></ul>";this.panel.left=new Element("div",{html:b,styles:{width:150,height:"100%",left:0,top:0,position:"absolute",background:"#131313"}}).inject(a);this.panel.left.getElements("li").setStyles({background:"#111",display:"block",height:32,"line-height":32,"text-indent":10,"margin-bottom":10,cursor:"pointer"});var d=this.panel.left.getElements("li"),c=this;d.each(function(f,e){if(c.options.isPicture==f.get("data-type")){f.setStyle("background","#666")}f.addEvents({mouseenter:function(){if(this.get("data-type")!=c.options.isPicture){this.setStyle("background","#FFF6EE")
}},mouseleave:function(){if(this.get("data-type")!=c.options.isPicture){this.setStyle("background","#111111")}},click:function(){d.setStyle("background","#111");this.setStyle("background","#666");c.options.isPicture=this.get("data-type");if(c.options.isPicture=="picture"){c.options.type=c.options.pictureType}else{c.options.type=c.options.videoType}c.layoutRight();c.R="";c.img="";c.count=0;c.scroll="";c.ajaxData({url:c.options.menu[c.options.isPicture+"url"],values:c.options.menu[c.options.isPicture+"values"]})}})}.bind(this))},layoutRight:function(a){if(!this.panel.right){var b='<div class="inner"><h2>'+(this.options.isPicture=="picture"?"剧照":"视频")+'评论</h2><input type="hidden" id="miniType" name="miniType" value="'+this.options.type+'"/><input type="hidden" id="miniTtag" name="miniTtag" value="'+this.options.tag+'"/><div id="tips_ablum_right"></div></div>';this.panel.right=new Element("div",{html:b,"class":"tips_ablum_right",styles:{width:250,height:"100%",right:"0",top:0,position:"absolute",background:"#3b3b3b"}}).inject(a)
}else{this.panel.right.getElement("h2").innerHTML=(this.options.isPicture=="picture"?"剧照":"视频")+"评论";$("miniType").value=this.options.type}},closePanel:function(){this.panelLayout.dispose();$(document.body).setStyles({width:"auto",height:"auto",overflow:"auto",position:"inherit"});$(document.body).removeProperties("style");this.options={o:"",oList:[],backUrl:"",isPicture:"picture",hasMenu:true,tag:"",type:"",mid:"",vid:"",esc:false,isAjax:false,menu:{}};this.panel={};this.R="";this.img="";this.count=0;this.scroll="";this.inner="";this.scrolldiv=""},ajaxData:function(a){this.lazeImg.show();GewaraUtil.sendRequest(a.url,a.values,function(b){if(b.success){if(this.inner){this.inner.dispose();this.inner=""}this.options.oList=this.options.isPicture=="video"?b.videoList:b.pictureList;this.options.o=b.mid;this.pictureSolider();if(this.options.isPicture=="video"&&b.videoList.length==0||this.options.isPicture=="picture"&&b.pictureList.length==0){this.dataEmpty()}else{this.doScroll()}this.lazeImg.hide()
}else{gewaUtil.alert(b.msg,function(){this.closePanel()}.bind(this))}}.bind(this))},dataEmpty:function(){var a=this.panel.center.getDimensions();if(!this.inner){this.inner=new Element("div",{html:"暂无"+(this.options.isPicture=="picture"?"图片":"视频")+"数据！",styles:{position:"absolute","line-height":a.height-70,height:a.height-70,width:"100%",top:0,left:0,"text-align":"center"}}).inject(this.panel.center)}$("tips_ablum_right").empty()},esc:function(){document.addEvent("keypress",function(a){if(a.key=="esc"){this.closePanel()}document.removeEvent("keypress",arguments.callee)}.bind(this))},createPanel:function(c){var d=this;$extend(this.options,c);var a=new Element("div",{"class":"ui_tips_album",styles:{width:"1200px",background:"#000",position:"relative",margin:"20px auto",height:document.documentElement.clientHeight<500?"500px":document.documentElement.clientHeight-40}});var b=new Element("span",{title:"关闭",styles:{display:"block",width:"50px",height:"50px",position:"absolute","z-index":"100",right:"-15px",top:"-15px",background:"url("+gewara.util.cdnPath+"css/global/pic_close.png) 0 0 no-repeat",cursor:"pointer"}});
b.inject(a);b.addEvent("click",function(){d.closePanel()});$(document.body).setStyles({width:"100%",height:document.documentElement.clientHeight<500?"540px":document.documentElement.clientHeight,overflow:"hidden",position:"relative"});this.panelLayout=new Element("div",{styles:{width:document.documentElement.clientWidth,left:0,top:document.getScroll().y,height:"100%",position:"absolute","z-index":51}}).inject($(document.body));a.inject(this.panelLayout);this.panelLayout.setRGBA(0,0,0,0.65);this.layoutLeft.apply(this,[a]);this.panel.center=new Element("div",{styles:{width:800,height:document.documentElement.clientHeight-40,left:150,top:0,overflow:"hidden",position:"absolute"}}).inject(a);this.layoutRight.apply(this,[a]);this.loadding();if(this.options.isAjax){this.ajaxData({url:this.options.menu[this.options.isPicture+"url"],values:this.options.menu[this.options.isPicture+"values"]})}else{this.doScroll()}if(this.options.esc){this.esc()}}};